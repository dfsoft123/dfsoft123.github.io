<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊåñÁüøÊ∏∏Êàè</title>
    <style>
        :root {
            --primary-color: #2196F3;
            --secondary-color: #4CAF50;
            --accent-color: #FF9800;
            --danger-color: #f44336;
            --dark-color: #333;
            --light-color: #f5f5f5;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
    </style>
    
    <script>
        // ÊàêÂ∞±Á≥ªÁªüÊ†∏ÂøÉÈÄªËæë
        (function() {
            // ÊàêÂ∞±Á±ªÂûãÂÆö‰πâ
            const achievementTypes = {
                // ËµÑÊ∫êÁ±ªÊàêÂ∞±
                gold: { name: 'ÈáëÂ∏ÅÊî∂ÈõÜËÄÖ', description: 'Êî∂ÈõÜ{value}ÈáëÂ∏Å', category: 'resources' },
                alchemyPoints: { name: 'ÁÇºËçØÂ∏à', description: 'Ëé∑Âæó{value}ÁÇºËçØÂÄº', category: 'resources' },
                alchemyCrystals: { name: 'ÁªìÊô∂Â§ßÂ∏à', description: 'Ëé∑Âæó{value}ÁÇºËçØÁªìÊô∂', category: 'resources' },
                iridiumIngots: { name: 'Èì±ÁüøÁüøÂ∑•', description: 'Ëé∑Âæó{value}Èì±Èî≠', category: 'resources' },
                hassiumIngots: { name: '¨≠∂ÁüøÁüøÂ∑•', description: 'Ëé∑Âæó{value}¨≠∂Èî≠', category: 'resources' },
                singularity: { name: 'Â•áÁÇπÊî∂ÈõÜËÄÖ', description: 'Ëé∑Âæó{value}Â•áÁÇπ', category: 'resources' },
                matter: { name: 'Áâ©Ë¥®ÊìçÊéßËÄÖ', description: 'Ëé∑Âæó{value}Áâ©Ë¥®', category: 'resources' },
                energy: { name: 'ËÉΩÈáèÊéåÊéßËÄÖ', description: 'Ëé∑Âæó{value}ËÉΩÈáè', category: 'resources' },
                productionCore: { name: 'Ê†∏ÂøÉÁîü‰∫ßËÄÖ', description: 'Ëé∑Âæó{value}Èáè‰∫ßÊ†∏ÂøÉ', category: 'resources' },
                endCore: { name: 'ÁªàÁÑâ‰ΩøËÄÖ', description: 'Ëé∑Âæó{value}ÁªàÁÑâÊ†∏ÂøÉ', category: 'resources' },
                
                // Â±ûÊÄßÁ±ªÊàêÂ∞±
                usageBonus: { name: '‰ΩøÁî®Â§ßÂ∏à', description: 'ËææÂà∞{value}‰ΩøÁî®Â¢ûÁõä', category: 'stats' },
                alchemyBonus: { name: 'ÁÇºËçØÂ¢ûÂº∫', description: 'ËææÂà∞{value}ÁÇºËçØÂ¢ûÁõä', category: 'stats' },
                energyMultiplier: { name: 'ËÉΩÈáèÂÄçÂ¢û', description: 'ËææÂà∞{value}ËÉΩÈáèÂÄçÈÄü', category: 'stats' },
                
                // Ê∑¨ÁÇºÂ±ûÊÄßÊàêÂ∞±
                damageBonus: { name: '‰º§ÂÆ≥Âº∫Âåñ', description: 'ËææÂà∞{value}%‰º§ÂÆ≥Â¢ûÁõä', category: 'stats', path: 'forgingStats.damageBonus' },
                usageBonusGain: { name: '‰ΩøÁî®Â¢ûÁõäËé∑Âèñ', description: 'ËææÂà∞{value}%‰ΩøÁî®Â¢ûÁõäËé∑Âèñ', category: 'stats', path: 'forgingStats.usageBonusGain' },
                goldGain: { name: 'ÈáëÂ∏ÅËé∑ÂèñÂ¢ûÂº∫', description: 'ËææÂà∞{value}%ÈáëÂ∏ÅËé∑Âèñ', category: 'stats', path: 'forgingStats.goldGain' },
                crystalBonusGain: { name: 'ÁªìÊô∂Â¢ûÁõäËé∑Âèñ', description: 'ËææÂà∞{value}%ÁªìÊô∂Â¢ûÁõäËé∑Âèñ', category: 'stats', path: 'forgingStats.crystalBonusGain' },
                
                // Èï∂ÂµåÊàêÂ∞±
                embedding1: { name: 'ÊîªÂáªÈï∂ÂµåÂ§ßÂ∏à', description: 'ÊîªÂáªÂ¢ûÁõäÈï∂ÂµåËææÂà∞{value}‰∏™', category: 'stats', path: 'embeddingBlocks[0].count' },
                embedding2: { name: 'ÁÇºËçØÂÄºÈï∂ÂµåÂ§ßÂ∏à', description: 'ÁÇºËçØÂÄºËé∑ÂèñÂ¢ûÁõäÈï∂ÂµåËææÂà∞{value}‰∏™', category: 'stats', path: 'embeddingBlocks[1].count' },
                embedding3: { name: '‰ΩøÁî®Â¢ûÁõäÈï∂ÂµåÂ§ßÂ∏à', description: '‰ΩøÁî®Â¢ûÁõäËé∑ÂèñÂ¢ûÁõäÈï∂ÂµåËææÂà∞{value}‰∏™', category: 'stats', path: 'embeddingBlocks[2].count' },
                embedding4: { name: 'ÈáëÂ∏ÅÈï∂ÂµåÂ§ßÂ∏à', description: 'ÈáëÂ∏ÅËé∑ÂèñÂ¢ûÁõäÈï∂ÂµåËææÂà∞{value}‰∏™', category: 'stats', path: 'embeddingBlocks[3].count' },
                embedding5: { name: 'ÂÖ®Â±ûÊÄßÈï∂ÂµåÂ§ßÂ∏à', description: 'ÂÖ®Â±ûÊÄßÂ¢ûÁõäÈï∂ÂµåËææÂà∞{value}‰∏™', category: 'stats', path: 'embeddingBlocks[4].count' },
                
                // ÊåñÁüøÁ±ªÊàêÂ∞±
                miningCount: { name: 'ÊåñÁüøÂ§ßÂ∏à', description: 'Á¥ØËÆ°ÊåñÁüø{value}Ê¨°', category: 'mining' },
                miningPerSecond: { name: 'ÊåñÁüøÊïàÁéá', description: 'ËææÂà∞ÊØèÁßíÊåñÁüø{value}Ê¨°', category: 'mining' },
                ownedPickaxes: { name: 'Êî∂ËóèÂÆ∂', description: 'Êã•Êúâ{value}ÊääÈïêÂ≠ê', category: 'mining', getValue: function() { return gameData.ownedPickaxes.length; } }
            };
            
            // ÁîüÊàêÊàêÂ∞±ÁõÆÊ†áÂÄºÔºàÁõ¥Êé•‰ΩøÁî®1e4, 1e8, 1e12Á≠âÈÄíÂ¢ûÂΩ¢ÂºèÔºâ
            function generateAchievementValues() {
                const values = [];
                // Áõ¥Êé•ÂÆö‰πâÁõÆÊ†áÂÄºÊï∞ÁªÑÔºö1e4, 1e8, 1e12, 1e16, 1e20, 1e24, 1e28, 1e32, 1e36, 1e40
                const targetValues = [1e4, 1e8, 1e12, 1e16, 1e20, 1e24, 1e28, 1e32, 1e36, 1e40, 1e44, 1e48, 1e52, 1e56, 1e60, 1e64, 1e68, 1e72, 1e76, 1e80, 1e84, 1e88, 1e92, 1e96, 1e100];
                values.push(...targetValues);
                return values;
            }
            
            // Ëé∑ÂèñÊï∞ÊçÆË∑ØÂæÑÁöÑÂÄº
            function getValueByPath(obj, path) {
                if (path.includes('.')) {
                    const parts = path.split('.');
                    let current = obj;
                    for (let part of parts) {
                        if (part.includes('[')) {
                            const key = part.match(/(\w+)\[(\d+)\]/);
                            if (key) {
                                current = current[key[1]][parseInt(key[2])];
                            }
                        } else {
                            current = current[part];
                        }
                    }
                    return current;
                } else if (path.includes('[')) {
                    const key = path.match(/(\w+)\[(\d+)\]/);
                    if (key) {
                        return obj[key[1]][parseInt(key[2])];
                    }
                }
                return obj[path];
            }
            
            // Ê†ºÂºèÂåñÂ§ßÊï∞Â≠ó
            function formatAchievementValue(value) {
                const suffixes = ['', '‰∏á', '‰∫ø', 'ÂÖÜ', '‰∫¨', 'Âûì', 'Áß≠', 'Á©∞', 'Ê≤ü', 'Ê∂ß', 'Ê≠£', 'ËΩΩ', 'ÊûÅ', 'ÊÅíÊ≤≥Ê≤ô', 'ÈòøÂÉßÁ•á', 'ÈÇ£Áî±‰ªñ', '‰∏çÂèØÊÄùËÆÆ', 'Êó†ÈáèÂ§ßÊï∞', 'ÂçÅÊó†ÈáèÊï∞', 'ÁôæÊó†ÈáèÊï∞', 'ÂçÉÊó†ÈáèÊï∞', '‰∏áÊó†ÈáèÊï∞', '‰∫øÊó†ÈáèÊï∞', 'ÂÖÜÊó†ÈáèÊï∞', '‰∫¨Êó†ÈáèÊï∞', 'ÂûìÊó†ÈáèÊï∞', 'Áß≠Êó†ÈáèÊï∞', 'Á©∞Êó†ÈáèÊï∞', 'Ê≤üÊó†ÈáèÊï∞', 'Ê∂ßÊó†ÈáèÊï∞', 'Ê≠£Êó†ÈáèÊï∞', 'ËΩΩÊó†ÈáèÊï∞', 'ÊûÅÊó†ÈáèÊï∞', 'ÊÅíÊ≤≥Ê≤ôÊó†ÈáèÊï∞', 'ÈòøÂÉßÁ•áÊó†ÈáèÊï∞', 'ÈÇ£Áî±‰ªñÊó†ÈáèÊï∞', '‰∏çÂèØÊÄùËÆÆÊó†ÈáèÊï∞', 'Êó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'ÂçÅÊó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'ÁôæÊó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'ÂçÉÊó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', '‰∏áÊó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', '‰∫øÊó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'ÂÖÜÊó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', '‰∫¨Êó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'ÂûìÊó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'Áß≠Êó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'Á©∞Êó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'Ê≤üÊó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'Ê∂ßÊó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'Ê≠£Êó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'ËΩΩÊó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'ÊûÅÊó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'ÊÅíÊ≤≥Ê≤ôÊó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'ÈòøÂÉßÁ•áÊó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'ÈÇ£Áî±‰ªñÊó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', '‰∏çÂèØÊÄùËÆÆÊó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'Êó†ÈáèÂ§ßÊï∞Êó†ÈáèÂ§ßÊï∞Êó†ÈáèÊï∞', 'ÂÖÉ', 'ÂÖÉ‰∏á', 'ÂÖÉ‰∫ø', 'ÂÖÉÂÖÜ', 'ÂÖÉ‰∫¨', 'ÂÖÉÂûì', 'ÂÖÉÁß≠', 'ÂÖÉÁ©∞', 'ÂÖÉÊ≤ü', 'ÂÖÉÊ∂ß', 'ÂÖÉÊ≠£', 'ÂÖÉËΩΩ', 'ÂÖÉÊûÅ', 'ÂÖÉÊÅíÊ≤≥Ê≤ô', 'ÂÖÉÈòøÂÉßÁ•á', 'ÂÖÉÈÇ£Áî±‰ªñ', 'ÂÖÉ‰∏çÂèØÊÄùËÆÆ', 'ÂÖÉÂçêÔºàÈÄöÂÖ≥ÔºÅÔºâ'];
                
                if (value === 0) return '0';
                
                let suffixIndex = 0;
                let currentValue = value;
                
                while (currentValue >= 10000 && suffixIndex < suffixes.length - 1) {
                    currentValue /= 10000;
                    suffixIndex++;
                }
                
                if (currentValue >= 1000) {
                    return currentValue.toFixed(0) + suffixes[suffixIndex];
                } else if (currentValue >= 100) {
                    return currentValue.toFixed(1) + suffixes[suffixIndex];
                } else if (currentValue >= 10) {
                    return currentValue.toFixed(2) + suffixes[suffixIndex];
                } else {
                    return currentValue.toFixed(3) + suffixes[suffixIndex];
                }
            }
            
            // ÁîüÊàêÊâÄÊúâÊàêÂ∞±
            function generateAchievements() {
                const achievements = [];
                const targetValues = generateAchievementValues();
                
                Object.entries(achievementTypes).forEach(([key, config]) => {
                    targetValues.forEach((target, index) => {
                        // ÂØπ‰∫éÁôæÂàÜÊØîÁ±ªÂûãÁöÑÊàêÂ∞±ÔºåÁâπÊÆäÂ§ÑÁêÜ
                        const isPercentage = ['damageBonus', 'usageBonusGain', 'goldGain', 'crystalBonusGain'].includes(key);
                        const formattedTarget = isPercentage ? Math.floor(target / 100) : formatAchievementValue(target);
                        
                        achievements.push({
                            id: `${key}_${index}`,
                            type: key,
                            target: target,
                            name: `${config.name} ${index + 1}`,
                            description: config.description.replace('{value}', formattedTarget),
                            category: config.category,
                            path: config.path,
                            getValue: config.getValue,
                            completed: false,
                            progress: 0
                        });
                    });
                });
                
                return achievements;
            }
            
            // ÂàùÂßãÂåñÊàêÂ∞±Á≥ªÁªü
            function initAchievements() {
                // Â¶ÇÊûúÊàêÂ∞±Êú™ÂàùÂßãÂåñÔºåÁîüÊàêÊñ∞ÁöÑÊàêÂ∞±ÂàóË°®
                if (!gameData.achievements || gameData.achievements.length === 0) {
                    gameData.achievements = generateAchievements();
                }
                
                // ÂàùÂßãÂåñÂ∑≤ÂÆåÊàêÊàêÂ∞±ËÆ∞ÂΩï
                if (!gameData.completedAchievements) {
                    gameData.completedAchievements = {};
                }
                
                // Êõ¥Êñ∞ÊàêÂ∞±ÂàóË°®ÊòæÁ§∫
                updateAchievementsList();
                
                // ÁªëÂÆöÊàêÂ∞±Á≥ªÁªü‰∫ã‰ª∂
                bindAchievementEvents();
            }
            
            // ÁªëÂÆöÊàêÂ∞±Á≥ªÁªü‰∫ã‰ª∂
            function bindAchievementEvents() {
                // Ê†áÁ≠æÈ°µÂàáÊç¢
                document.getElementById('achievements-tab').addEventListener('click', () => {
                    showAchievements();
                });
                
                // ÂàÜÁ±ªÁ≠õÈÄâÊåâÈíÆ
                document.getElementById('achievement-category-all').addEventListener('click', () => {
                    filterAchievements('all');
                });
                
                document.getElementById('achievement-category-resources').addEventListener('click', () => {
                    filterAchievements('resources');
                });
                
                document.getElementById('achievement-category-stats').addEventListener('click', () => {
                    filterAchievements('stats');
                });
                
                document.getElementById('achievement-category-mining').addEventListener('click', () => {
                    filterAchievements('mining');
                });
                
                document.getElementById('achievement-category-completed').addEventListener('click', () => {
                    filterAchievements('completed');
                });
                
                // ÊêúÁ¥¢ÂäüËÉΩ
                document.getElementById('achievement-search').addEventListener('input', () => {
                    const searchTerm = document.getElementById('achievement-search').value.toLowerCase();
                    searchAchievements(searchTerm);
                });
            }
            
            // ÊòæÁ§∫ÊàêÂ∞±Á≥ªÁªü
            function showAchievements() {
                // ÈöêËóèÊâÄÊúâÂÖ∂‰ªñÁ≥ªÁªü
                document.querySelectorAll('.mining-area, .alchemy-system, .forging-system, .embedding-system').forEach(el => {
                    el.style.display = 'none';
                });
                
                // ÊòæÁ§∫ÊàêÂ∞±Á≥ªÁªü
                document.getElementById('achievements-system').style.display = 'block';
                
                // Êõ¥Êñ∞Ê†áÁ≠æÈ°µÁä∂ÊÄÅ
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.getElementById('achievements-tab').classList.add('active');
                
                // Êõ¥Êñ∞ÊàêÂ∞±ÂàóË°®
                updateAchievementsList();
            }
            
            // Êõ¥Êñ∞ÊàêÂ∞±ÂàóË°®ÊòæÁ§∫
            function updateAchievementsList() {
                const achievementsList = document.getElementById('achievements-list');
                achievementsList.innerHTML = '';
                
                let completedCount = 0;
                
                gameData.achievements.forEach(achievement => {
                    const achievementElement = document.createElement('div');
                    achievementElement.className = `achievement-item ${achievement.completed ? 'completed' : ''}`;
                    
                    // Ê∑ªÂä†ÊàêÂ∞±ÂæΩÁ´†
                    const badge = document.createElement('div');
                    badge.className = `achievement-badge ${achievement.completed ? 'completed' : 'pending'}`;
                    badge.textContent = achievement.completed ? '‚úì' : ' ';
                    achievementElement.appendChild(badge);
                    
                    // Ê∑ªÂä†ÊàêÂ∞±Ê†áÈ¢ò
                    const title = document.createElement('div');
                    title.className = 'achievement-title';
                    title.textContent = achievement.name;
                    achievementElement.appendChild(title);
                    
                    // Ê∑ªÂä†ÊàêÂ∞±ÊèèËø∞
                    const description = document.createElement('div');
                    description.className = 'achievement-description';
                    description.textContent = achievement.description;
                    achievementElement.appendChild(description);
                    
                    // Ê∑ªÂä†ÊàêÂ∞±ËøõÂ∫¶
                    const progress = document.createElement('div');
                    progress.className = 'achievement-progress';
                    progress.textContent = `ËøõÂ∫¶: ${formatAchievementValue(achievement.progress)} / ${formatAchievementValue(achievement.target)}`;
                    achievementElement.appendChild(progress);
                    
                    achievementsList.appendChild(achievementElement);
                    
                    if (achievement.completed) {
                        completedCount++;
                    }
                });
                
                // Êõ¥Êñ∞ÊàêÂ∞±ÁªüËÆ°
                document.getElementById('completed-achievements-count').textContent = completedCount;
                document.getElementById('total-achievements-count').textContent = gameData.achievements.length;
            }
            
            // Á≠õÈÄâÊàêÂ∞±
            function filterAchievements(category) {
                const achievementItems = document.querySelectorAll('.achievement-item');
                
                achievementItems.forEach((item, index) => {
                    const achievement = gameData.achievements[index];
                    let show = true;
                    
                    if (category === 'all') {
                        show = true;
                    } else if (category === 'completed') {
                        show = achievement.completed;
                    } else {
                        show = achievement.category === category;
                    }
                    
                    item.style.display = show ? 'block' : 'none';
                });
            }
            
            // ÊêúÁ¥¢ÊàêÂ∞±
            function searchAchievements(searchTerm) {
                const achievementItems = document.querySelectorAll('.achievement-item');
                
                achievementItems.forEach((item, index) => {
                    const achievement = gameData.achievements[index];
                    const matches = achievement.name.toLowerCase().includes(searchTerm) || 
                                  achievement.description.toLowerCase().includes(searchTerm);
                    
                    item.style.display = matches ? 'block' : 'none';
                });
            }
            
            // Ê£ÄÊü•ÊàêÂ∞±ËøõÂ∫¶
            function checkAchievements() {
                let hasNewAchievements = false;
                
                gameData.achievements.forEach(achievement => {
                    if (!achievement.completed) {
                        let currentValue = 0;
                        
                        // Ëé∑ÂèñÂΩìÂâçÂÄº
                        if (achievement.getValue) {
                            currentValue = achievement.getValue();
                        } else if (achievement.path) {
                            currentValue = getValueByPath(gameData, achievement.path);
                        } else {
                            currentValue = gameData[achievement.type] || 0;
                        }
                        
                        // ÂØπ‰∫éÁôæÂàÜÊØîÁ±ªÂûãÁöÑÊàêÂ∞±ÔºåÁâπÊÆäÂ§ÑÁêÜ
                        const isPercentage = ['damageBonus', 'usageBonusGain', 'goldGain', 'crystalBonusGain'].includes(achievement.type);
                        if (isPercentage) {
                            currentValue *= 100; // ËΩ¨Êç¢‰∏∫ÁôæÂàÜÊØî
                        }
                        
                        // Êõ¥Êñ∞ËøõÂ∫¶
                        achievement.progress = currentValue;
                        
                        // Ê£ÄÊü•ÊòØÂê¶ÂÆåÊàê
                        if (currentValue >= achievement.target) {
                            achievement.completed = true;
                            gameData.completedAchievements[achievement.id] = true;
                            hasNewAchievements = true;
                            
                            // Ëß¶ÂèëÊàêÂ∞±Ëß£ÈîÅÂä®Áîª
                            unlockAchievement(achievement);
                        }
                    }
                });
                
                // Â¶ÇÊûúÊúâÊñ∞ÊàêÂ∞±ÔºåÊõ¥Êñ∞UI
                if (hasNewAchievements) {
                    updateAchievementsList();
                }
            }
            
            // Ëß£ÈîÅÊàêÂ∞±Âä®Áîª
            function unlockAchievement(achievement) {
                // ÂàõÂª∫‰∏¥Êó∂ÈÄöÁü•
                const notification = document.createElement('div');
                notification.className = 'achievement-unlock';
                notification.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background-color: var(--secondary-color);
                    color: white;
                    padding: 20px;
                    border-radius: var(--border-radius);
                    font-size: 18px;
                    font-weight: bold;
                    z-index: 1001;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
                    text-align: center;
                    min-width: 300px;
                `;
                
                notification.innerHTML = `
                    <div style="font-size: 14px; margin-bottom: 5px;">üèÜ ÊàêÂ∞±Ëß£ÈîÅÔºÅ</div>
                    <div style="font-size: 18px; font-weight: bold; margin-bottom: 5px;">${achievement.name}</div>
                    <div style="font-size: 14px;">${achievement.description}</div>
                `;
                
                document.body.appendChild(notification);
                
                // 2ÁßíÂêéÁßªÈô§ÈÄöÁü•
                setTimeout(() => {
                    notification.style.opacity = '0';
                    notification.style.transition = 'opacity 0.5s ease';
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 500);
                }, 2000);
            }
            
            // Êâ©Â±ïÁé∞ÊúâÂáΩÊï∞‰ª•ÈõÜÊàêÊàêÂ∞±Ê£ÄÊü•
            const originalUpdateStats = window.updateStats || function() {};
            window.updateStats = function() {
                originalUpdateStats();
                checkAchievements();
            };
            
            // ÂØºÂá∫ÊàêÂ∞±Á≥ªÁªüÂáΩÊï∞Âà∞ÂÖ®Â±Ä
            window.initAchievements = initAchievements;
            window.checkAchievements = checkAchievements;
            window.showAchievements = showAchievements;
        })();
        
        // ÂàùÂßãÂåñÊàêÂ∞±Á≥ªÁªüÂ∞ÜÂú®gameDataÂÆö‰πâÂêéË∞ÉÁî®
    </script>
    
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            margin: 0;
            padding: 20px;
            color: #333;
            min-height: 100vh;
        }
        
        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            backdrop-filter: blur(10px);
        }
        
        h1 {
            color: var(--dark-color);
            margin-bottom: 25px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        /* ÁªüËÆ°‰ø°ÊÅØÈù¢Êùø‰ºòÂåñ */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .stats-group {
            background: var(--light-color);
            padding: 15px;
            border-radius: var(--border-radius);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--primary-color);
        }
        
        .stats-group.resources {
            border-left-color: var(--secondary-color);
        }
        
        .stats-group.advanced {
            border-left-color: var(--accent-color);
        }
        
        .stats-group h3 {
            margin-top: 0;
            margin-bottom: 12px;
            font-size: 1.1rem;
            color: var(--dark-color);
            border-bottom: 1px solid #ddd;
            padding-bottom: 8px;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }
        
        .stat-label {
            font-weight: 500;
            color: #555;
        }
        
        .stat-value {
            font-weight: 600;
            color: var(--dark-color);
        }
        
        #auto-save-status {
            color: var(--secondary-color);
            font-weight: 600;
        }
        
        /* Á≥ªÁªüÊ†áÁ≠æÈ°µ‰ºòÂåñ */
        .system-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            padding: 12px 24px;
            font-size: 16px;
            background-color: var(--light-color);
            color: var(--dark-color);
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .tab-btn:hover {
            background-color: #e0e0e0;
            transform: translateY(-2px);
        }
        
        .tab-btn.active {
            background-color: var(--primary-color);
            color: white;
            box-shadow: 0 4px 8px rgba(33, 150, 243, 0.3);
        }
        
        /* ÊåñÁüøÂå∫Âüü‰ºòÂåñ */
        .mining-area {
            background: linear-gradient(145deg, #f0f0f0, #e0e0e0);
            padding: 25px;
            border-radius: var(--border-radius);
            margin: 20px 0;
            box-shadow: var(--box-shadow);
        }
        
        .block-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .control-btn {
            padding: 12px 20px;
            font-size: 16px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .control-btn:hover {
            background-color: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .control-btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .mine-block {
            width: 280px;
            height: 280px;
            margin: 20px auto;
            border: 4px solid #666;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            position: relative;
            transition: transform 0.1s;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .mine-block:hover {
            transform: scale(1.03);
        }
        
        .mine-block:active {
            transform: scale(0.98);
        }
        
        .block-level {
            font-size: 11.25px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #ffffff;
            text-shadow: 1px 1px 3px #000000;
        }
        
        .health-bar {
            width: 80%;
            height: 20px;
            background-color: #ddd;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        .health-fill {
            height: 100%;
            background: linear-gradient(to right, #4CAF50, #8BC34A);
            transition: width 0.3s ease;
        }
        
        .block-health {
            font-size: 10px;
            color: #ffffff;
            text-shadow: 1px 1px 2px #000000;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .block-reward {
            font-size: 8.75px;
            color: #ffffff;
            text-shadow: 1px 1px 2px #000000;
            font-weight: bold;
            max-width: 90%;
            line-height: 1.4;
        }
        
        /* ÈïêÂ≠êÂïÜÂ∫ó‰ºòÂåñ */
        .pickaxe-shop {
            margin-top: 30px;
            padding: 25px;
            background-color: #f9f9f9;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        .shop-title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 20px;
            color: var(--dark-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            display: inline-block;
        }
        
        .pickaxe-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .pickaxe-item {
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: var(--border-radius);
            text-align: center;
            transition: var(--transition);
            background: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .pickaxe-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        
        .pickaxe-item.owned {
            border-color: var(--secondary-color);
            background-color: #e8f5e9;
        }
        
        .pickaxe-item.current {
            border-color: var(--primary-color);
            background-color: #e3f2fd;
            font-weight: bold;
        }
        
        .pickaxe-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--dark-color);
        }
        
        .pickaxe-stats {
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        .buy-btn {
            padding: 10px 20px;
            font-size: 14px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            width: 100%;
        }
        
        .buy-btn:hover:not(:disabled) {
            background-color: #e68900;
        }
        
        .buy-btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        /* ÁÇºËçØÁ≥ªÁªü‰ºòÂåñ */
        .alchemy-system, .forging-system, .embedding-system {
            margin-top: 30px;
            padding: 25px;
            background-color: #f9f9f9;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        .alchemy-input {
            padding: 12px;
            font-size: 16px;
            width: 200px;
            margin-right: 10px;
            border: 2px solid #ddd;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }
        
        .alchemy-input:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        .alchemy-btn {
            padding: 12px 25px;
            font-size: 16px;
            background-color: #9C27B0;
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }
        
        .alchemy-btn:hover {
            background-color: #7B1FA2;
        }
        
        .alchemy-result {
            margin-top: 15px;
            padding: 15px;
            background-color: #e3f2fd;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: bold;
            border-left: 4px solid var(--primary-color);
        }
        
        /* ËÉΩÈáèÁ≥ªÁªü‰ºòÂåñ */
        .energy-system {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(145deg, #e3f2fd, #bbdefb);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        /* ÁâπÊÆäÊ†∑Âºè */
        .special-block {
            background: linear-gradient(45deg, #C0C0C0, #E8E8E8, #C0C0C0);
        }
        
        /* ÈáçÁΩÆÊåâÈíÆÊ†∑Âºè */
        .reset-section {
            text-align: center;
            margin: 25px 0;
            padding: 20px;
            background-color: #ffebee;
            border-radius: var(--border-radius);
        }
        
        .reset-btn {
            padding: 12px 24px;
            font-size: 16px;
            background-color: var(--danger-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }
        
        .reset-btn:hover {
            background-color: #d32f2f;
        }
        
        .warning-text {
            color: #666;
            font-size: 14px;
            margin-top: 10px;
        }
        
        /* ÊØèÁßíÊåñÁüøÊòæÁ§∫ */
        .mining-per-second-display {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 15px;
            border-radius: var(--border-radius);
            font-weight: bold;
            z-index: 1000;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .pickaxe-list {
                grid-template-columns: 1fr;
            }
            
            .mine-block {
                width: 250px;
                height: 250px;
            }
            
            .system-tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .tab-btn {
                width: 100%;
                max-width: 300px;
            }
            
            .block-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .control-btn {
                width: 100%;
                max-width: 300px;
            }
        }
        
        /* ÊàêÂ∞±Á≥ªÁªüÊ†∑Âºè */
        .achievements-system {
            margin-top: 30px;
            padding: 25px;
            background-color: #f9f9f9;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            display: none;
        }
        
        .achievements-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .achievements-search {
            margin: 20px 0;
            text-align: center;
        }
        
        .achievements-summary {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin: 20px 0;
            color: var(--dark-color);
        }
        
        .achievements-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            max-height: 600px;
            overflow-y: auto;
        }
        
        .achievement-item {
            background-color: white;
            border: 2px solid #ddd;
            border-radius: var(--border-radius);
            padding: 15px;
            transition: var(--transition);
            position: relative;
        }
        
        .achievement-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .achievement-item.completed {
            border-color: var(--secondary-color);
            background-color: #e8f5e9;
        }
        
        .achievement-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--dark-color);
        }
        
        .achievement-description {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }
        
        .achievement-progress {
            font-size: 12px;
            color: #888;
        }
        
        .achievement-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .achievement-badge.pending {
            background-color: #ffc107;
        }
        
        .achievement-badge.completed {
            background-color: var(--secondary-color);
            color: white;
        }
        
        /* Âä®ÁîªÊïàÊûú */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes achievementUnlock {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); box-shadow: 0 0 15px rgba(76, 175, 80, 0.5); }
            100% { transform: scale(1); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease;
        }
        
        .achievement-unlock {
            animation: achievementUnlock 1s ease;
        }
        .block-color-1 { background-color: #8B4513; }
        .block-color-2 { background-color: #A9A9A9; }
        .block-color-3 { background-color: #CD853F; }
        .block-color-4 { background-color: #B87333; }
        .block-color-5 { background-color: #FFD700; }
        .block-color-6 { background-color: #00CED1; }
        .block-color-7 { background-color: #9400D3; }
        .block-color-8 { background-color: #FF4500; }
        .block-color-9 { background-color: #4B0082; }
        .block-color-10 { background-color: #800080; }
        .block-color-11 { background-color: #000000; color: white; }
        .block-color-12 { background-color: #4B0082; color: white; }
        .block-color-13 { background-color: #800080; color: white; }
        .block-color-14 { background-color: #9400D3; color: white; }
        .block-color-15 { background-color: #8A2BE2; color: white; }
        .block-color-16 { background-color: #9370DB; color: white; }
        .block-color-17 { background-color: #DDA0DD; color: black; }
        .block-color-18 { background-color: #EE82EE; color: black; }
        .block-color-19 { background-color: #DA70D6; color: black; }
        .block-color-20 { background-color: #BA55D3; color: white; }
        .block-color-21 { background-color: #9932CC; color: white; }
        .block-color-22 { background-color: #8B008B; color: white; }
        .block-color-23 { background-color: #6A5ACD; color: white; }
        .block-color-24 { background-color: #483D8B; color: white; }
        .block-color-25 { background-color: #3E2723; color: white; }
        .block-color-26 { background-color: #263238; color: white; }
        .block-color-27 { background-color: #1A237E; color: white; }
        .block-color-28 { background-color: #311B92; color: white; }
        .block-color-29 { background-color: #4A148C; color: white; }
        .block-color-30 { background-color: #6A1B9A; color: white; }
        .block-color-31 { background-color: #8E24AA; color: white; }
        .block-color-32 { background-color: #4527A0; color: white; }
        .block-color-33 { background-color: #3949AB; color: white; }
        .block-color-34 { background-color: #303F9F; color: white; }
        .block-color-35 { background-color: #1976D2; color: white; }
        .block-color-36 { background-color: #0D47A1; color: white; }
        .block-color-37 { background-color: #01579B; color: white; }
        .block-color-38 { background-color: #006064; color: white; }
        .block-color-39 { background-color: #004D40; color: white; }
        .block-color-40 { background-color: #1B5E20; color: white; }
        .block-color-41 { background-color: #2E7D32; color: white; }
        .block-color-42 { background-color: #388E3C; color: white; }
        .block-color-43 { background-color: #43A047; color: white; }
        .block-color-44 { background-color: #4CAF50; color: white; }
        .block-color-45 { background-color: #66BB6A; color: black; }
        .block-color-46 { background-color: #81C784; color: black; }
        .block-color-47 { background-color: #A5D6A7; color: black; }
        .block-color-48 { background-color: #C8E6C9; color: black; }
        .block-color-49 { background-color: #E8F5E9; color: black; }
        .block-color-50 { background-color: #F1F8E9; color: black; }
        .block-color-51 { background: linear-gradient(45deg, #FFEB3B, #FFF176); color: black; }
        .block-color-52 { background: linear-gradient(45deg, #FFC107, #FFD54F); color: black; }
        .block-color-53 { background: linear-gradient(45deg, #FF9800, #FFB74D); color: black; }
        .block-color-54 { background: linear-gradient(45deg, #FF5722, #FF8A65); color: black; }
        .alchemy-block-color-1 { background-color: #FF6B6B; }
        .alchemy-block-color-2 { background-color: #4ECDC4; }
        .alchemy-block-color-3 { background-color: #45B7D1; }
        .alchemy-block-color-4 { background-color: #96CEB4; }
        .alchemy-block-color-5 { background-color: #FFEAA7; }
        .special-block-color-1 { background: linear-gradient(45deg, #C0C0C0, #E8E8E8, #C0C0C0); color: #000; }
        .special-block-color-2 { background: linear-gradient(45deg, #FFD700, #FFA500, #FFD700); color: #000; }
            .special-block-color-3 { background: linear-gradient(45deg, #9C27B0, #BA68C8, #9C27B0); color: white; }
            .special-block-color-4 { background: linear-gradient(45deg, #1E88E5, #64B5F6, #1E88E5); color: white; }
            .special-block-color-5 { background: linear-gradient(45deg, #0D47A1, #42A5F5, #0D47A1); color: white; }
            /* Â•áÁÇπÊñπÂùóÊ†∑Âºè */
            .special-block-color-7,
            .special-block-color-8,
            .special-block-color-9,
            .special-block-color-10,
            .special-block-color-11 { background: linear-gradient(45deg, #4B0082, #8A2BE2, #4B0082); color: white; border-color: #9370DB; }
            .special-block-color-8 { background: linear-gradient(45deg, #800080, #9370DB, #800080); }
            .special-block-color-9 { background: linear-gradient(45deg, #9400D3, #BA55D3, #9400D3); }
            .special-block-color-10 { background: linear-gradient(45deg, #8B008B, #DA70D6, #8B008B); }
            .special-block-color-11 { background: linear-gradient(45deg, #9932CC, #DDA0DD, #9932CC); color: white; }

/* ÁªàÁÑâÊ†∏ÂøÉÊñπÂùó - ÈªëËâ≤Ê∏êÂèò */
.special-block-black-gradient {
    background: linear-gradient(45deg, #000000, #1a1a1a, #000000, #1a1a1a, #000000);
    color: white;
    border-color: #333333;
    animation: blackPulse 3s infinite;
    background-size: 200% 200%;
}

/* ÁªàÁÑâÈõÜÈòµÊñπÂùó - ÂΩ©Ëâ≤Ê∏êÂèò */
.special-block-colorful-gradient {
    background: linear-gradient(135deg, #FF0000, #FF5500, #FF7F00, #FFAA00, #FFFF00, #AAFF00, #00FF00, #00AAFF, #0000FF, #4B0082, #8B00FF, #CC00FF, #FF00AA, #FF0000);
    color: white;
    border-color: #FFFFFF;
    animation: colorShift 2.78s ease infinite;
    background-size: 600% 600%;
}

@keyframes blackPulse {
    0%, 100% { background-position: 0% 50%; box-shadow: 0 0 10px rgba(255, 255, 255, 0.3); }
    50% { background-position: 100% 50%; box-shadow: 0 0 20px rgba(255, 255, 255, 0.5); }
}

@keyframes colorShift {
    0% { background-position: 0% 50%; box-shadow: 0 0 15px rgba(255, 0, 0, 0.5); }
    12.5% { background-position: 20% 50%; box-shadow: 0 0 15px rgba(255, 77, 0, 0.5); }
    25% { background-position: 40% 50%; box-shadow: 0 0 15px rgba(255, 155, 0, 0.5); }
    37.5% { background-position: 80% 50%; box-shadow: 0 0 15px rgba(255, 255, 0, 0.5); }
    50% { background-position: 120% 50%; box-shadow: 0 0 15px rgba(127, 255, 0, 0.5); }
    62.5% { background-position: 180% 50%; box-shadow: 0 0 15px rgba(0, 179, 255, 0.5); }
    75% { background-position: 240% 50%; box-shadow: 0 0 15px rgba(0, 0, 255, 0.5); }
    87.5% { background-position: 300% 50%; box-shadow: 0 0 15px rgba(139, 0, 255, 0.5); }
    100% { background-position: 360% 50%; box-shadow: 0 0 15px rgba(255, 0, 127, 0.5); }
}          /* Èï∂ÂµåÁ≥ªÁªüÊ†∑Âºè */
            .embedding-block {
                margin: 20px 0;
                padding: 15px;
                background-color: #e3f2fd;
                border-radius: 5px;
                border: 1px solid #bbdefb;
            }
            .embedding-blocks {
                margin-top: 20px;
            }
            .embedding-block h4 {
                margin-top: 0;
                color: #1565C0;
            }
            .embedding-block p {
                margin: 5px 0;
                font-size: 16px;
            }
            .alchemy-block-color-6 { background-color: #FF6B6B; }
            .alchemy-block-color-7 { background-color: #4ECDC4; }
            .alchemy-block-color-8 { background-color: #45B7D1; }
            .alchemy-block-color-9 { background-color: #96CEB4; }
            .alchemy-block-color-10 { background-color: #FFEAA7; }
            .alchemy-block-color-11 { background-color: #DDA0DD; }
            .alchemy-block-color-12 { background-color: #9370DB; }
            .alchemy-block-color-13 { background-color: #8A2BE2; }
            .alchemy-block-color-14 { background-color: #9400D3; }
            .alchemy-block-color-15 { background-color: #800080; }
            .alchemy-block-color-16 { background-color: #4B0082; color: white; }
    </style>
    
</head>
<body>
    <div class="game-container">
        <h1>ÊåñÁüøÊ∏∏Êàè</h1>
        
        <!-- FPSÊòæÁ§∫ÂÖÉÁ¥† -->
<div id="fps-counter" style="position: fixed; top: 10px; left: 10px; background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 5px; font-family: monospace; font-size: 14px; z-index: 1000;">FPS: 0</div>
        
        <!-- ÊØèÁßíÊåñÁüøÊòæÁ§∫Â∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂàõÂª∫ -->
        
        <div class="stats-container">
            <!-- Âü∫Á°Ä‰ø°ÊÅØ -->
            <div class="stats-group fade-in">
                <h3>Âü∫Á°Ä‰ø°ÊÅØ</h3>
                <div class="stat-item">
                    <span class="stat-label">ÈáëÂ∏Å:</span>
                    <span class="stat-value" id="gold">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ÂΩìÂâçÈïêÂ≠ê:</span>
                    <span class="stat-value" id="current-pickaxe">Êú®Èïê</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ÊîªÂáª‰º§ÂÆ≥:</span>
                    <span class="stat-value" id="attack-damage">1</span>
                </div>
                <div class="stat-item" id="auto-save-status">
                    <span class="stat-value">Ëá™Âä®‰øùÂ≠ò: ËøõË°å‰∏≠</span>
                </div>
            </div>
            
            <!-- Â¢ûÁõä‰ø°ÊÅØ -->
            <div class="stats-group fade-in">
                <h3>Â¢ûÁõäÂ±ûÊÄß</h3>
                <div class="stat-item">
                    <span class="stat-label">ÈïêÂ≠êÂ¢ûÁõä:</span>
                    <span class="stat-value" id="pickaxe-bonus">1</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">‰ΩøÁî®Â¢ûÁõä:</span>
                    <span class="stat-value" id="usage-bonus">1</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ÈáëÂ∏ÅÂ¢ûÁõä:</span>
                    <span class="stat-value" id="gold-bonus">1</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ÁÇºËçØÂ¢ûÁõä:</span>
                    <span class="stat-value" id="alchemy-bonus">1</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ÁªàÁÑâÂ¢ûÁõä:</span>
                    <span class="stat-value" id="end-bonus">1ÂÄç</span>
                </div>
            </div>
            
            <!-- ËµÑÊ∫ê‰ø°ÊÅØ -->
            <div class="stats-group resources fade-in">
                <h3>Á®ÄÊúâËµÑÊ∫ê</h3>
                <div class="stat-item">
                    <span class="stat-label">ÁÇºËçØÂÄº:</span>
                    <span class="stat-value" id="alchemy-points">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ÁÇºËçØÁªìÊô∂:</span>
                    <span class="stat-value" id="alchemy-crystals">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Èì±Èî≠:</span>
                    <span class="stat-value" id="iridium-ingots">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">¨≠∂Èî≠:</span>
                    <span class="stat-value" id="hassium-ingots">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Â•áÁÇπ:</span>
                    <span class="stat-value" id="singularity">0</span>
                </div>
            </div>
            
            <!-- È´òÁ∫ßËµÑÊ∫ê -->
            <div class="stats-group advanced fade-in">
                <h3>È´òÁ∫ßËµÑÊ∫ê</h3>
                <div class="stat-item">
                    <span class="stat-label">Áâ©Ë¥®:</span>
                    <span class="stat-value" id="matter">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ËÉΩÈáè:</span>
                    <span class="stat-value" id="energy">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Èáè‰∫ßÊ†∏ÂøÉ:</span>
                    <span class="stat-value" id="production-core">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ÁªàÁÑâÊ†∏ÂøÉ:</span>
                    <span class="stat-value" id="end-core">0</span>
                </div>
            </div>
            
            <!-- ËÉΩÈáèÁ≥ªÁªü -->
            <div class="stats-group fade-in">
                <h3>ËÉΩÈáèÁ≥ªÁªü</h3>
                <div class="stat-item">
                    <span class="stat-label">ËÉΩÈáèÂÄçÈÄü:</span>
                    <span class="stat-value" id="energy-multiplier">1</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ËÉΩÈáèÂ¢ûÁõä:</span>
                    <span class="stat-value" id="energy-bonus">1</span>
                </div>
            </div>
        </div>
        
        <div class="system-tabs fade-in">
            <button class="tab-btn active" id="mining-tab">ÊåñÁüøÁ≥ªÁªü</button>
            <button class="tab-btn" id="alchemy-tab">ÁÇºËçØÁ≥ªÁªü</button>
            <button class="tab-btn" id="forging-tab">Ê∑¨ÁÇºÁ≥ªÁªü</button>
            <button class="tab-btn" id="embedding-tab">Èï∂ÂµåÁ≥ªÁªü</button>
            <button class="tab-btn" id="achievements-tab">ÊàêÂ∞±Á≥ªÁªü</button>
        </div>
        
        <div style="text-align: center; margin-bottom: 20px;">
            <button class="control-btn" id="reset-game-btn" style="background-color: #f44336;">ÈáçÁΩÆÊ∏∏Êàè</button>
            <p style="color: #666; font-size: 12px; margin-top: 5px;">ÈáçÁΩÆÂ∞ÜÊ∏ÖÈô§ÊâÄÊúâÊ∏∏ÊàèÊï∞ÊçÆÔºåÊó†Ê≥ïÊÅ¢Â§çÔºÅ</p>
        </div>
        
        <!-- ÊàêÂ∞±Á≥ªÁªü -->
        <div id="achievements-system" class="achievements-system fade-in">
            <h2 class="shop-title">ÊàêÂ∞±Á≥ªÁªü</h2>
            <div class="achievements-controls">
                <button class="control-btn" id="achievement-category-all">ÊâÄÊúâÊàêÂ∞±</button>
                <button class="control-btn" id="achievement-category-resources">ËµÑÊ∫êÊàêÂ∞±</button>
                <button class="control-btn" id="achievement-category-stats">Â±ûÊÄßÊàêÂ∞±</button>
                <button class="control-btn" id="achievement-category-mining">ÊåñÁüøÊàêÂ∞±</button>
                <button class="control-btn" id="achievement-category-completed">Â∑≤ÂÆåÊàê</button>
            </div>
            <div class="achievements-search">
                <input type="text" id="achievement-search" placeholder="ÊêúÁ¥¢ÊàêÂ∞±..." class="alchemy-input">
            </div>
            <div class="achievements-summary">
                <p>Â∑≤ÂÆåÊàê: <span id="completed-achievements-count">0</span>/<span id="total-achievements-count">0</span></p>
            </div>
            <div class="achievements-list" id="achievements-list">
                <!-- ÊàêÂ∞±Â∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
        
        <div class="alchemy-system fade-in">
            <div class="shop-title">ÁÇºËçØÁ≥ªÁªü</div>
            <div style="margin-top: 15px;">
                <h3>‰∏ÄÈîÆÁÇºËçØ</h3>
                <input type="number" class="alchemy-input" id="batch-alchemy-value" placeholder="ÊØèÊ¨°ÁÇºËçØÂÄº" min="1">
                <input type="number" class="alchemy-input" id="batch-alchemy-times" placeholder="ÁÇºËçØÊ¨°Êï∞" min="1" max="1000">
                <button class="alchemy-btn" id="batch-alchemy-btn">‰∏ÄÈîÆÁÇºËçØ</button>
            </div>
            <div style="margin-top: 20px;">
                <h3>ÁÇºËçØÁªìÊô∂</h3>
                <p>ÁÇºËçØÂÄº10000‰ª•‰∏äÂèØ‰ª•ÁªìÊô∂ÔºåËé∑Âæó <span id="crystals-preview">0.0</span> ÁªìÊô∂</p>
                <button class="alchemy-btn" id="crystallize-btn" disabled>ÁªìÊô∂</button>
            </div>
            <div class="alchemy-result" id="alchemy-result"></div>
        </div>
        
        <div class="forging-system fade-in">
            <div class="shop-title">Ê∑¨ÁÇºÁ≥ªÁªü</div>
            <div style="margin-top: 15px;">
                <h3>Ê∂àËÄóÁÇºËçØÁªìÊô∂ËøõË°åÊ∑¨ÁÇº</h3>
                <input type="number" class="alchemy-input" id="forging-crystal-value" placeholder="Ê∂àËÄóÁªìÊô∂Êï∞Èáè" min="1">
                <button class="alchemy-btn" id="forging-btn">ÂºÄÂßãÊ∑¨ÁÇº</button>
            </div>
            <div style="margin-top: 20px;">
                <h3>ÂΩìÂâçÊ∑¨ÁÇºÂ±ûÊÄß</h3>
                <div class="forging-stats">
                    <div class="forging-stat-item">‰º§ÂÆ≥Â¢ûÁõä: <span id="forging-damage-bonus">0%</span></div>
                    <div class="forging-stat-item">ÊØèÊ¨°ÊîªÂáªËé∑Âæó‰ΩøÁî®Â¢ûÁõä: <span id="forging-usage-bonus">0%</span></div>
                    <div class="forging-stat-item">ÊØèÊ¨°Ëé∑ÂæóÈáëÂ∏Å: <span id="forging-gold-gain">0%</span></div>
                    <div class="forging-stat-item">ÁªìÊô∂ÊñπÂùóËé∑ÂæóÁÇºËçØÂ¢ûÁõä: <span id="forging-crystal-bonus">0%</span></div>
                </div>
            </div>
            <div class="alchemy-result" id="forging-result"></div>
        </div>
        
        <!-- Èï∂ÂµåÁ≥ªÁªü -->
        <div class="embedding-system fade-in">
            <div class="shop-title">Èï∂ÂµåÁ≥ªÁªü</div>
            <div style="margin-top: 15px;">
                <h3>ÂΩìÂâçÂ•áÁÇπÊï∞Èáè: <span id="embedding-singularity-count">0</span></h3>
                
                <!-- Èï∂ÂµåÂå∫Âùó -->
                <div class="embedding-blocks">
                    <div class="embedding-block">
                        <h4>Èï∂ÂµåÂå∫Âùó1 - ÊîªÂáªÂ¢ûÁõä</h4>
                        <p>ÂΩìÂâçÈï∂Âµå: <span id="embedding-count-0">0</span> Â•áÁÇπ</p>
                        <p>Â¢ûÁõäÂÄçÁéá: <span id="embedding-bonus-0">1.00</span>x (ÊîªÂáª√ó((Èï∂ÂµåÊï∞Èáè+1)^0.36))</p>
                        <input type="number" class="alchemy-input" id="embedding-input-0" placeholder="Èï∂ÂµåÊï∞Èáè" min="1">
                        <button class="alchemy-btn" onclick="embedSingularity(0)">Èï∂ÂµåÂ•áÁÇπ</button>
                    </div>
                    
                    <div class="embedding-block">
                        <h4>Èï∂ÂµåÂå∫Âùó2 - ÁÇºËçØÂÄºËé∑ÂèñÂ¢ûÁõä</h4>
                        <p>ÂΩìÂâçÈï∂Âµå: <span id="embedding-count-1">0</span> Â•áÁÇπ</p>
                        <p>Â¢ûÁõäÂÄçÁéá: <span id="embedding-bonus-1">1.00</span>x (ÁÇºËçØÂÄºËé∑Âèñ√ó((Èï∂ÂµåÊï∞Èáè+1)^0.28))</p>
                        <input type="number" class="alchemy-input" id="embedding-input-1" placeholder="Èï∂ÂµåÊï∞Èáè" min="1">
                        <button class="alchemy-btn" onclick="embedSingularity(1)">Èï∂ÂµåÂ•áÁÇπ</button>
                    </div>
                    
                    <div class="embedding-block">
                        <h4>Èï∂ÂµåÂå∫Âùó3 - ‰ΩøÁî®Â¢ûÁõäËé∑ÂèñÂ¢ûÁõä</h4>
                        <p>ÂΩìÂâçÈï∂Âµå: <span id="embedding-count-2">0</span> Â•áÁÇπ</p>
                        <p>Â¢ûÁõäÂÄçÁéá: <span id="embedding-bonus-2">1.00</span>x (‰ΩøÁî®Â¢ûÁõäËé∑Âèñ√ó((Èï∂ÂµåÊï∞Èáè+1)^0.24))</p>
                        <input type="number" class="alchemy-input" id="embedding-input-2" placeholder="Èï∂ÂµåÊï∞Èáè" min="1">
                        <button class="alchemy-btn" onclick="embedSingularity(2)">Èï∂ÂµåÂ•áÁÇπ</button>
                    </div>
                    
                    <div class="embedding-block">
                        <h4>Èï∂ÂµåÂå∫Âùó4 - ÈáëÂ∏ÅËé∑ÂèñÂ¢ûÁõä</h4>
                        <p>ÂΩìÂâçÈï∂Âµå: <span id="embedding-count-3">0</span> Â•áÁÇπ</p>
                        <p>Â¢ûÁõäÂÄçÁéá: <span id="embedding-bonus-3">1.00</span>x (ÈáëÂ∏ÅËé∑Âèñ√ó((Èï∂ÂµåÊï∞Èáè+1)^0.2))</p>
                        <input type="number" class="alchemy-input" id="embedding-input-3" placeholder="Èï∂ÂµåÊï∞Èáè" min="1">
                        <button class="alchemy-btn" onclick="embedSingularity(3)">Èï∂ÂµåÂ•áÁÇπ</button>
                    </div>
                    
                    <div class="embedding-block">
                        <h4>Èï∂ÂµåÂå∫Âùó5 - ÂÖ®Â±ûÊÄßÂ¢ûÁõä</h4>
                        <p>ÂΩìÂâçÈï∂Âµå: <span id="embedding-count-4">0</span> Â•áÁÇπ</p>
                        <p>Â¢ûÁõäÂÄçÁéá: <span id="embedding-bonus-4">1.00</span>x (ÊîªÂáª„ÄÅÁÇºËçØÂÄºËé∑Âèñ„ÄÅÈáëÂ∏ÅËé∑Âèñ„ÄÅ‰ΩøÁî®Â¢ûÁõäËé∑Âèñ√ó((Èï∂ÂµåÊï∞Èáè+1)^0.16))</p>
                        <input type="number" class="alchemy-input" id="embedding-input-4" placeholder="Èï∂ÂµåÊï∞Èáè" min="1">
                        <button class="alchemy-btn" onclick="embedSingularity(4)">Èï∂ÂµåÂ•áÁÇπ</button>
                    </div>
                </div>
                
                <!-- ÈáçÁΩÆÊåâÈíÆ -->
                <div style="margin-top: 20px;">
                    <button class="alchemy-btn" onclick="resetEmbedding()" style="background-color: #f44336;">ÈáçÁΩÆÈï∂Âµå</button>
                    <p style="color: #666; margin-top: 10px;">ÈáçÁΩÆÈï∂ÂµåÂ∞ÜÂèñÂõûÊâÄÊúâÈï∂ÂµåÁöÑÂ•áÁÇπ</p>
                </div>
            </div>
            <div class="alchemy-result" id="embedding-result"></div>
        </div>
        
        <div class="mining-area fade-in">
            <div class="block-controls">
                <button class="control-btn" id="prev-block">‰∏ä‰∏ÄÁ∫ßÊñπÂùó</button>
                <button class="control-btn" id="next-block">‰∏ã‰∏ÄÁ∫ßÊñπÂùó</button>
                <button class="control-btn" id="toggle-block-type">ÂàáÊç¢ÊñπÂùóÁ±ªÂûã: ÊôÆÈÄö</button>
            </div>
            
            <div class="mine-block" id="mine-block">
                <div class="block-level">1Á∫ßÊñπÂùó</div>
                <div class="health-bar">
                    <div class="health-fill" id="health-fill"></div>
                </div>
                <div class="block-health">Ë°ÄÈáè: <span id="block-health">1000</span>/<span id="block-max-health">1000</span></div>
                <div class="block-reward"><span id="block-reward">Â•ñÂä±: 1 ÈáëÂ∏Å</span></div>
            </div>

        
        <div class="pickaxe-shop fade-in">
            <div class="shop-title">ÈïêÂ≠êÂïÜÂ∫ó</div>
            <div class="pickaxe-list" id="pickaxe-list">
                <!-- ÈïêÂ≠ê‰ºöÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
        
        <div class="energy-system fade-in">
            <h3>ËÉΩÈáèËΩ¨ÂåñÁ≥ªÁªü</h3>
            <p>Ê∂àËÄó100‰∏áÁâ©Ë¥®ÊèêÂçáËÉΩÈáèÂÄçÈÄü</p>
            <button class="alchemy-btn" id="convert-energy-btn">ÊèêÂçáÂÄçÈÄü</button>
            <button class="alchemy-btn" id="convert-energy-max-btn">‰∏ÄÈîÆÊèêÂçáÂÄçÈÄü</button>
            <div class="energy-stats">
                <p>ËÉΩÈáèÂÄçÈÄü: <span id="energy-multiplier-display">1</span></p>
                <p>ÊØè0.1ÁßíÂ¢ûÂä†Èáè: <span id="energy-gain-rate">0</span></p>
            </div>
        </div>
        
        <div class="pickaxe-shop fade-in">
            <div class="shop-title">ÈïêÂ≠êÂïÜÂ∫ó</div>
            <div class="pickaxe-list" id="pickaxe-list">
                <!-- ÈïêÂ≠ê‰ºöÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
        
        <!-- ÁâπÊÆäÊñπÂùóÈÄöËøá‰∏ªÊåñÁüøÂå∫ÂüüÊòæÁ§∫ -->
    </div>

    <script>
        // Ê∏∏ÊàèÊï∞ÊçÆ
        const gameData = {
            gold: 0,
            currentPickaxeIndex: 0,
            currentBlockIndex: 0,
            currentAlchemyBlockIndex: 0,
            currentSpecialBlockIndex: 0,
            usageBonus: 1,
            alchemyBonus: 1,
            alchemyPoints: 0,
            alchemyCrystals: 0, // ÁÇºËçØÁªìÊô∂
            iridiumIngots: 0,
            hassiumIngots: 0, // ¨≠∂Èî≠
            singularity: 0, // Â•áÁÇπÊï∞Èáè
            matter: 0, // Áâ©Ë¥®
            energy: 0, // ËÉΩÈáè
            energyMultiplier: 0, // ËÉΩÈáèÂÄçÈÄü
            productionCore: 0, // Èáè‰∫ßÊ†∏ÂøÉ
            endCore: 0, // ÁªàÁÑâÊ†∏ÂøÉ
            ownedPickaxes: [0], // 0Ë°®Á§∫Êú®ÈïêÂ∑≤Êã•Êúâ
            currentBlockType: 'normal', // 'normal', 'alchemy', 'special' Êàñ 'singularity'
            autoMiningEnabled: false, // Ëá™Âä®ÊåñÁüøÁä∂ÊÄÅ
            miningCount: 0, // ÊåñÁüøÊ¨°Êï∞ËÆ°Êï∞
            miningPerSecond: 0, // ÊØèÁßíÊåñÁüøÊ¨°Êï∞
            // Ê∑¨ÁÇºÂ±ûÊÄß
            forgingStats: {
                damageBonus: 0, // ‰º§ÂÆ≥Â¢ûÁõäÁôæÂàÜÊØî
                usageBonusGain: 0, // ÊØèÊ¨°ÊîªÂáªËé∑Âæó‰ΩøÁî®Â¢ûÁõäÁôæÂàÜÊØî
                goldGain: 0, // ÊØèÊ¨°Ëé∑ÂæóÈáëÂ∏ÅÁôæÂàÜÊØî
                crystalBonusGain: 0 // ÁªìÊô∂ÊñπÂùóËé∑ÂæóÁÇºËçØÂ¢ûÁõäÁôæÂàÜÊØî
            },
            // Â•áÁÇπÊñπÂùóÁ¥¢Âºï
            currentSingularityBlockIndex: 0,
            // Èï∂ÂµåÁ≥ªÁªüÊï∞ÊçÆ
            embeddingBlocks: [
                { count: 0, exponent: 0.36, name: 'ÊîªÂáªÂ¢ûÁõä' }, // Èï∂ÂµåÂå∫Âùó1ÔºöÊîªÂáª√ó((Èï∂ÂµåÊï∞Èáè+1)^0.36)
                { count: 0, exponent: 0.28, name: 'ÁÇºËçØÂÄºËé∑ÂèñÂ¢ûÁõä' }, // Èï∂ÂµåÂå∫Âùó2ÔºöÁÇºËçØÂÄºËé∑Âèñ√ó((Èï∂ÂµåÊï∞Èáè+1)^0.28)
                { count: 0, exponent: 0.24, name: '‰ΩøÁî®Â¢ûÁõäËé∑ÂèñÂ¢ûÁõä' }, // Èï∂ÂµåÂå∫Âùó3Ôºö‰ΩøÁî®Â¢ûÁõäËé∑Âèñ√ó((Èï∂ÂµåÊï∞Èáè+1)^0.24)
                { count: 0, exponent: 0.2, name: 'ÈáëÂ∏ÅËé∑ÂèñÂ¢ûÁõä' }, // Èï∂ÂµåÂå∫Âùó4ÔºöÈáëÂ∏ÅËé∑Âèñ√ó((Èï∂ÂµåÊï∞Èáè+1)^0.2)
                { count: 0, exponent: 0.16, name: 'ÂÖ®Â±ûÊÄßÂ¢ûÁõä' } // Èï∂ÂµåÂå∫Âùó5ÔºöÊîªÂáª„ÄÅÁÇºËçØÂÄºËé∑Âèñ„ÄÅÈáëÂ∏ÅËé∑Âèñ„ÄÅ‰ΩøÁî®Â¢ûÁõäËé∑Âèñ√ó((Èï∂ÂµåÊï∞Èáè+1)^0.16)
            ],
            // ÊàêÂ∞±Á≥ªÁªüÊï∞ÊçÆ
            achievements: [],
            completedAchievements: {}
        };

        // ÈïêÂ≠êÊï∞ÊçÆ
        const pickaxes = [
            { name: 'Êú®Èïê', bonus: 1, usageBonus: 1, cost: 0, costType: 'gold' },
            { name: 'Áü≥Èïê', bonus: 2, usageBonus: 2, cost: 1000, costType: 'gold' },
            { name: 'ÈìÅÈïê', bonus: 5, usageBonus: 3, cost: 100000, costType: 'gold' },
            { name: 'ÈáëÈïê', bonus: 10, usageBonus: 5, cost: 1000000, costType: 'gold' },
            { name: 'ÈíªÁü≥Èïê', bonus: 30, usageBonus: 10, cost: 20000000, costType: 'gold' },
            { name: '‰∏ãÁïåÂêàÈáëÈïê', bonus: 50, usageBonus: 15, cost: 100000000, costType: 'gold' },
            { name: 'ÈôÑÈ≠î‰∏ãÁïåÂêàÈáëÈïê', bonus: 100, usageBonus: 25, cost: 1000000000, costType: 'gold' },
            { name: 'Èì±Èïê', bonus: 1000, usageBonus: 100, cost: 20, costType: 'iridium' },
            { name: 'È´òÁ∫ØÂ∫¶Èì±Èïê', bonus: 4000, usageBonus: 200, cost: 1000, costType: 'iridium' },
            { name: '¨≠∂Èïê', bonus: 30000, usageBonus: 600, cost: 20, costType: 'hassium' }, // 20¨≠∂Èî≠ÔºåÂ¢ûÁõä30000Ôºå‰ΩøÁî®Â¢ûÁõä600
            { name: 'È´òÁ∫ØÂ∫¶¨≠∂Èïê', bonus: 100000, usageBonus: 1000, cost: 1000, costType: 'hassium' }, // 1000¨≠∂Èî≠ÔºåÂ¢ûÁõä100000Ôºå‰ΩøÁî®Â¢ûÁõä1000
            { name: 'ÈáëÂ∏ÅÁ•ûÈïê', bonus: 240000, usageBonus: 1600, cost: 1000000000000000000000, costType: 'gold' }, // 10ÂûìÈáëÂ∏Å(10^22)ÔºåÂ¢ûÁõä240000Ôºå‰ΩøÁî®Â¢ûÁõä1600
            { name: 'ÂàùÈò∂Â•áÁÇπÈïê', bonus: 540000, usageBonus: 2600, cost: 100, costType: 'singularity' }, // 100Â•áÁÇπÔºåÂ¢ûÁõä54‰∏áÔºåÊØèÊ¨°‰ΩøÁî®2600
            { name: '‰∏≠Èò∂Â•áÁÇπÈïê', bonus: 1200000, usageBonus: 4400, cost: 1000, costType: 'singularity' }, // 1000Â•áÁÇπÔºåÂ¢ûÁõä120‰∏áÔºåÊØèÊ¨°‰ΩøÁî®4400
            { name: 'È´òÈò∂Â•áÁÇπÈïê', bonus: 4000000, usageBonus: 7600, cost: 10000, costType: 'singularity' }, // 1‰∏áÂ•áÁÇπÔºåÂ¢ûÁõä400‰∏áÔºåÊØèÊ¨°‰ΩøÁî®7600
            { name: 'È°∂Èò∂Â•áÁÇπÈïê', bonus: 10000000, usageBonus: 16000, cost: 100000, costType: 'singularity' }, // 10‰∏áÂ•áÁÇπÔºåÂ¢ûÁõä1000‰∏áÔºåÊØèÊ¨°‰ΩøÁî®16000
            { name: 'ËÉΩÈáèÈïê', bonus: 20000000, usageBonus: 24000, cost: 100000, costType: 'energy' }, // 10‰∏áËÉΩÈáèÔºåÂ¢ûÁõä2000‰∏áÔºå‰ΩøÁî®24000
            { name: 'ËÅöËÉΩÈïê', bonus: 100000000, usageBonus: 36000, cost: 10000000, costType: 'energy' }, // 1000‰∏áËÉΩÈáèÔºåÂ¢ûÁõä1‰∫øÔºå‰ΩøÁî®36000
            { name: 'ÊûÅËÉΩÈïê', bonus: 320000000, usageBonus: 54000, cost: 100000000, costType: 'energy' }, // 1‰∫øËÉΩÈáèÔºåÂ¢ûÁõä3.2‰∫øÔºå‰ΩøÁî®54000
            { name: 'ÈáèËÉΩÈïê', bonus: 1600000000, usageBonus: 188000, costs: [{type: 'productionCore', amount: 5000}, {type: 'energy', amount: 500000000}] }, // 5000Èáè‰∫ßÊ†∏ÂøÉ+5‰∫øËÉΩÈáèÔºåÂ¢ûÁõä16‰∫øÔºå‰ΩøÁî®188000
            { name: '‰ΩøÁî®Èïê', bonus: 1, usageBonus: 1000000000000000, specialType: 'usage', costType: 'usage_bonus', cost: 1000000000000000000000, description: '‰º§ÂÆ≥Âº∫Âà∂‰∏∫1Ôºå‰ΩÜËé∑ÂæóÊûÅÂº∫ÁöÑ‰ΩøÁî®Â¢ûÁõä' }, // 1‰∫¨‰ΩøÁî®Â¢ûÁõäÔºåÁâπÊÆäÈïêÂ≠ê
            { name: 'ÈªëÊ¥ûÈïê', bonus: 1, usageBonus: 1, specialType: 'black_hole', cost: 100000, costType: 'singularity', description: 'ÊâÄÊúâÊ¶ÇÁéáÁâ©ÂìÅÂøÖÂá∫ÔºåÁâπÊÆäÊéâËêΩ‰ºòÂåñ' }, // 10‰∏áÂ•áÁÇπÔºåÁâπÊÆäÈïêÂ≠ê
            { name: 'ÁªàÁÑâÈïê', bonus: 128000000000, usageBonus: 4000000, cost: 1000, costType: 'endCore', description: 'ÊûÅÂº∫ÁöÑÈïêÂ≠êÔºåÁî±ÁªàÁÑâÊ†∏ÂøÉÊâìÈÄ†ÔºåÊã•ÊúâÊûÅÈ´òÁöÑÂü∫Á°Ä‰º§ÂÆ≥Âíå‰ΩøÁî®Â¢ûÁõä' }, // 1000ÁªàÁÑâÊ†∏ÂøÉÔºåÂ¢ûÁõä1280‰∫øÔºå‰ΩøÁî®4000000
            { name: 'Ê∞∏ÊÅíÈïê', bonus: 1024000000000000, usageBonus: 1024000000, costs: [{type: 'endCore', amount: 100000}, {type: 'iridiumIngots', amount: 100000}, {type: 'hassiumIngots', amount: 100000}, {type: 'singularity', amount: 10000000}, {type: 'gold', amount: 10000000000000000000000}, {type: 'alchemyCrystals', amount: 100000000}, {type: 'energy', amount: 100000000000}, {type: 'matter', amount: 1000000000}, {type: 'usage_bonus', amount: 10000000000}], description: 'ÁªàÊûÅÈïêÂ≠êÔºåÊåñÁªìÊô∂ÊñπÂùóÊó∂ÁÇºËçØÂ¢ûÁõä√ó10000„ÄÅÁâ©Ë¥®√ó100000000„ÄÅÈáè‰∫ßÊ†∏ÂøÉ√ó1000000„ÄÅÈáëÂ∏Å√ó1000000ÔºåÂ•áÁÇπËé∑Âèñ√ó100000' } // 10WÁªàÁÑâÊ†∏ÂøÉ+10WÈì±Èî≠+10W¨≠∂Èî≠+1ÂÖÜÂ•áÁÇπ+1000ËΩΩÈáëÂ∏Å+10‰∫øÁÇºËçØÁªìÊô∂+1000‰∫øËÉΩÈáè+10‰∫øÁâ©Ë¥®+10Êùº‰ΩøÁî®Â¢ûÁõä
        ];

        // ÊôÆÈÄöÊñπÂùóÊï∞ÊçÆ
        const blocks = [
            { level: 1, health: 1000, reward: 1 },
            { level: 2, health: 10000, reward: 5 },
            { level: 3, health: 50000, reward: 10 },
            { level: 4, health: 1000000, reward: 150 },
            { level: 5, health: 6000000, reward: 500 },
            { level: 6, health: 24000000, reward: 1800 },
            { level: 7, health: 100000000, reward: 6000 },
            { level: 8, health: 1000000000, reward: 40000 },
            { level: 9, health: 30000000000, reward: 1000000 },
            { level: 10, health: 1000000000000, reward: 20000000 },
            { level: 11, health: 200000000000000, reward: 1000000000 }, // 200ÂÖÜË°ÄÈáèÔºå10‰∫øÈáëÂ∏Å
            { level: 12, health: 1000000000000000, reward: 3000000000 }, // 1000ÂÖÜË°ÄÈáèÔºå30‰∫øÈáëÂ∏Å
            { level: 13, health: 100000000000000000, reward: 10000000000 }, // 10‰∫¨Ë°ÄÈáèÔºå100‰∫øÈáëÂ∏Å
            { level: 14, health: 10000000000000000000, reward: 40000000000 }, // 1000‰∫¨Ë°ÄÈáèÔºå400‰∫øÈáëÂ∏Å
            { level: 15, health: 10000000000000000000000, reward: 1000000000000 }, // 100ÂûìË°ÄÈáèÔºå1ÂÖÜÈáëÂ∏Å
            { level: 16, health: 1200000000000000000000000, reward: 3600000000000 }, // 1.2ÊùºË°ÄÈáèÔºå3.6ÂÖÜÈáëÂ∏Å
            { level: 17, health: 240000000000000000000000000, reward: 60000000000000 }, // 240ÊùºË°ÄÈáèÔºå60ÂÖÜÈáëÂ∏Å
            { level: 18, health: 1000000000000000000000000000000, reward: 1000000000000000 }, // 10Á©∞Ë°ÄÈáèÔºå1000ÂÖÜÈáëÂ∏Å
            { level: 19, health: 1000000000000000000000000000000000, reward: 480000000000000 }, // 10Ê≤üË°ÄÈáèÔºå4.8‰∫¨ÈáëÂ∏Å
            { level: 20, health: 1000000000000000000000000000000000000, reward: 12000000000000000 }, // 1Ê∂ßË°ÄÈáèÔºå120‰∫¨ÈáëÂ∏Å
            { level: 21, health: 10000000000000000000000000000000000000000, reward: 6000000000000000000 }, // 1Ê≠£Ë°ÄÈáèÔºå6000‰∫¨ÈáëÂ∏Å
            { level: 22, health: 100000000000000000000000000000000000000000000, reward: 100000000000000000000 }, // 1ËΩΩË°ÄÈáèÔºå10ÂûìÈáëÂ∏Å
            { level: 23, health: 1000000000000000000000000000000000000000000000000, reward: 36000000000000000000000 }, // 1ÊûÅË°ÄÈáèÔºå360ÂûìÈáëÂ∏Å
            { level: 24, health: 10000000000000000000000000000000000000000000000000000, reward: 1000000000000000000000000 }, // 1ÊÅíÊ≤≥Ê≤ôË°ÄÈáèÔºå1ÊùºÈáëÂ∏Å
            { level: 25, health: 100000000000000000000000000000000000000000000000000000000, reward: 10000000000000000000000000 }, // 1ÈòøÊõæÁ•áË°ÄÈáèÔºå10ÊùºÈáëÂ∏Å
            { level: 26, health: 1000000000000000000000000000000000000000000000000000000000000, reward: 100000000000000000000000000 }, // 1ÈÇ£Áî±‰ªñË°ÄÈáèÔºå100ÊùºÈáëÂ∏Å
            { level: 27, health: 10000000000000000000000000000000000000000000000000000000000000000, reward: 1000000000000000000000000000 }, // 1‰∏çÂèØÊÄùËÆÆË°ÄÈáèÔºå1000ÊùºÈáëÂ∏Å
            { level: 28, health: 100000000000000000000000000000000000000000000000000000000000000000000, reward: 10000000000000000000000000000 }, // 1Êó†ÈáèË°ÄÈáèÔºå10000ÊùºÈáëÂ∏Å
            { level: 29, health: 1000000000000000000000000000000000000000000000000000000000000000000000000, reward: 100000000000000000000000000000 }, // 1Â§ßÊï∞Ë°ÄÈáèÔºå100000ÊùºÈáëÂ∏Å
            { level: 30, health: 1e76, reward: 1000000000000000000000000000000 }, // 1ÂÖ®‰ªïÁ••Ë°ÄÈáèÔºå1000000ÊùºÈáëÂ∏Å
            { level: 31, health: 1e80, reward: 10000000000000000000000000000000 }, // 1‰∏áÂÖ®‰ªïÁ••Ë°ÄÈáèÔºå10000000ÊùºÈáëÂ∏Å
            { level: 32, health: 1e84, reward: 100000000000000000000000000000000 }, // 1Âè§ÊààÂ∞îË°ÄÈáèÔºå100000000ÊùºÈáëÂ∏Å
            { level: 33, health: 1e88, reward: 1000000000000000000000000000000000 }, // 1Âè§ÊààÂ∞îÊôÆÂãíÂÖãÊñØË°ÄÈáèÔºå1000000000ÊùºÈáëÂ∏Å
            { level: 34, health: 1e92, reward: 10000000000000000000000000000000000 }, // 1Âè§ÊààÂ∞îÁ±≥ÊôÆÂãíÂÖãÊñØË°ÄÈáèÔºå10000000000ÊùºÈáëÂ∏Å
            { level: 35, health: 1e96, reward: 100000000000000000000000000000000000 }, // 1ËëõÁ´ãÊÅíÊï∞Ë°ÄÈáèÔºå100000000000ÊùºÈáëÂ∏Å
            { level: 36, health: 1e100, reward: 1000000000000000000000000000000000000 }, // 1Â°îÁèÄÊï∞Ë°ÄÈáèÔºå1000000000000ÊùºÈáëÂ∏Å
            { level: 37, health: 1e104, reward: 10000000000000000000000000000000000000 }, // 1‰∏çÂèØÂêçÁä∂Êï∞Ë°ÄÈáèÔºå10000000000000ÊùºÈáëÂ∏Å
            { level: 38, health: 1e108, reward: 100000000000000000000000000000000000000 }, // 1‰∏áÂè§ÊààÂ∞îË°ÄÈáèÔºå100000000000000ÊùºÈáëÂ∏Å
            { level: 39, health: 1e112, reward: 1000000000000000000000000000000000000000 }, // 1‰∫øÂè§ÊààÂ∞îË°ÄÈáèÔºå1000000000000000ÊùºÈáëÂ∏Å
            { level: 40, health: 1e116, reward: 10000000000000000000000000000000000000000 }, // 1ÂÖÜÂè§ÊààÂ∞îË°ÄÈáèÔºå10000000000000000ÊùºÈáëÂ∏Å
            { level: 41, health: 1e120, reward: 100000000000000000000000000000000000000000 }, // 41Á∫ßÊñπÂùó
            { level: 42, health: 1e124, reward: 1000000000000000000000000000000000000000000 }, // 42Á∫ßÊñπÂùó
            { level: 43, health: 1e128, reward: 10000000000000000000000000000000000000000000 }, // 43Á∫ßÊñπÂùó
            { level: 44, health: 1e132, reward: 100000000000000000000000000000000000000000000 }, // 44Á∫ßÊñπÂùó
            { level: 45, health: 1e136, reward: 1000000000000000000000000000000000000000000000 }, // 45Á∫ßÊñπÂùó
            { level: 46, health: 1e140, reward: 10000000000000000000000000000000000000000000000 }, // 46Á∫ßÊñπÂùó
            { level: 47, health: 1e144, reward: 100000000000000000000000000000000000000000000000 }, // 47Á∫ßÊñπÂùó
            { level: 48, health: 1e148, reward: 1000000000000000000000000000000000000000000000000 }, // 48Á∫ßÊñπÂùó
            { level: 49, health: 1e152, reward: 10000000000000000000000000000000000000000000000000 }, // 49Á∫ßÊñπÂùó
            { level: 50, health: 1e156, reward: 100000000000000000000000000000000000000000000000000 } ,
            { level: 51, health: 1e160, reward: 1000000000000000000000000000000000000000000000000000 },
            { level: 52, health: 1e164, reward: 10000000000000000000000000000000000000000000000000000 },
            { level: 53, health: 1e168, reward: 100000000000000000000000000000000000000000000000000000 },
            { level: 54, health: 1e172, reward: 1000000000000000000000000000000000000000000000000000000 }// 50Á∫ßÊñπÂùó

        ];
        
        // ÁÇºËçØÊñπÂùóÊï∞ÊçÆ
        const alchemyBlocks = [
            { level: 1, health: 1000000, rewardChance: 0.05, rewardType: 'alchemy', baseReward: 1 }, // 1Á∫ßÁÇºËçØÊñπÂùóÔºå100‰∏áË°ÄÈáè
            { level: 2, health: 10000000, rewardChance: 0.15, rewardType: 'alchemy', baseReward: 1 }, // 2Á∫ßÁÇºËçØÊñπÂùóÔºå1000‰∏áË°ÄÈáè
            { level: 3, health: 500000000, rewardChance: 0.40, rewardType: 'alchemy', baseReward: 1 }, // 3Á∫ßÁÇºËçØÊñπÂùóÔºå5‰∫øË°ÄÈáè
            { level: 4, health: 100000000000, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 1 }, // 4Á∫ßÁÇºËçØÊñπÂùóÔºå1000‰∫øË°ÄÈáè
            { level: 5, health: 500000000000, rewardType: 'alchemy', specialRewards: [0.1, 0.2, 0.3, 0.4] }, // 5Á∫ßÁÇºËçØÊñπÂùóÔºå5000‰∫øË°ÄÈáè
            { level: 6, health: 10000000000000, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 5 }, // 6Á∫ßÁÇºËçØÊñπÂùóÔºå10ÂÖÜË°ÄÈáè
            { level: 7, health: 1000000000000000, rewardType: 'alchemy', weightedRewards: [ // 7Á∫ßÁÇºËçØÊñπÂùóÔºå1000ÂÖÜË°ÄÈáè
                { value: 10, weight: 0.50 },  // 50%Ê¶ÇÁéáËé∑Âæó10ÁÇºËçØÂÄº
                { value: 15, weight: 0.35 },  // 35%Ê¶ÇÁéáËé∑Âæó15ÁÇºËçØÂÄº
                { value: 20, weight: 0.10 },  // 10%Ê¶ÇÁéáËé∑Âæó20ÁÇºËçØÂÄº
                { value: 30, weight: 0.05 }   // 5%Ê¶ÇÁéáËé∑Âæó30ÁÇºËçØÂÄº
            ]},
            { level: 8, health: 10000000000000000000, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 50 }, // 8Á∫ßÁÇºËçØÊñπÂùóÔºå1000‰∫¨Ë°ÄÈáè
            { level: 9, health: 1000000000000000000000, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 100 }, // 9Á∫ßÁÇºËçØÊñπÂùóÔºå10ÂûìË°ÄÈáè
            { level: 10, health: 1000000000000000000000000, rewardType: 'alchemy', weightedRewards: [ // 10Á∫ßÁÇºËçØÊñπÂùóÔºå10ÊùºË°ÄÈáè
                { value: 200, weight: 0.50 },  // 50%Ê¶ÇÁéáËé∑Âæó200ÁÇºËçØÂÄº
                { value: 300, weight: 0.50 }   // 50%Ê¶ÇÁéáËé∑Âæó300ÁÇºËçØÂÄº
            ]},
            { level: 11, health: 10000000000000000000000000000, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 512 }, // 11Á∫ßÁÇºËçØÊñπÂùóÔºå1Á©∞Ë°ÄÈáè
            { level: 12, health: 100000000000000000000000000000000, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 1080 }, // 12Á∫ßÁÇºËçØÊñπÂùóÔºå1Ê≤üË°ÄÈáè
            { level: 13, health: 1000000000000000000000000000000000000, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 2200 }, // 13Á∫ßÁÇºËçØÊñπÂùóÔºå1Ê∂ßË°ÄÈáè
            { level: 14, health: 10000000000000000000000000000000000000000, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 4600 }, // 14Á∫ßÁÇºËçØÊñπÂùóÔºå1Ê≠£Ë°ÄÈáè
            { level: 15, health: 100000000000000000000000000000000000000000000, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 10000 }, // 15Á∫ßÁÇºËçØÊñπÂùóÔºå1ËΩΩË°ÄÈáè
            { level: 16, health: 1000000000000000000000000000000000000000000000000, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 24000 }, // 16Á∫ßÁÇºËçØÊñπÂùóÔºå1ÊûÅË°ÄÈáè
            { level: 17, health: 100000000000000000000000000000000000000000000000000000000, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 40000 }, // 17Á∫ßÁÇºËçØÊñπÂùóÔºå1ÈòøÊõæÁ•áË°ÄÈáè
            { level: 18, health: 10000000000000000000000000000000000000000000000000000000000000000, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 64000 }, // 18Á∫ßÁÇºËçØÊñπÂùóÔºå1‰∏çÂèØÊÄùËÆÆË°ÄÈáè
            { level: 19, health: 1000000000000000000000000000000000000000000000000000000000000000000000000, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 100000 }, // 19Á∫ßÁÇºËçØÊñπÂùóÔºå1Â§ßÊï∞Ë°ÄÈáè
            { level: 20, health: 1e80, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 140000 }, // 20Á∫ßÁÇºËçØÊñπÂùóÔºå1ÂÖ®‰ªïÁ••Ë°ÄÈáè
            { level: 21, health: 1e88, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 200000 }, // 21Á∫ßÁÇºËçØÊñπÂùóÔºå1‰∏áÂÖ®‰ªïÁ••Ë°ÄÈáè
            { level: 22, health: 1e96, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 280000 }, // 22Á∫ßÁÇºËçØÊñπÂùóÔºå1Âè§ÊààÂ∞îË°ÄÈáè
            { level: 23, health: 1e104, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 380000 }, // 23Á∫ßÁÇºËçØÊñπÂùóÔºå1Âè§ÊààÂ∞îÊôÆÂãíÂÖãÊñØË°ÄÈáè
            { level: 24, health: 1e112, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 540000 }, // 24Á∫ßÁÇºËçØÊñπÂùóÔºå1Âè§ÊààÂ∞îÁ±≥ÊôÆÂãíÂÖãÊñØË°ÄÈáè
            { level: 25, health: 1e120, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 760000 }, // 25Á∫ßÁÇºËçØÊñπÂùóÔºå1ËëõÁ´ãÊÅíÊï∞Ë°ÄÈáè
            { level: 26, health: 1e128, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 1200000 },
            { level: 27, health: 1e136, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 1700000 },
            { level: 28, health: 1e144, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 2600000 },
            { level: 29, health: 1e152, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 4400000 },
            { level: 30, health: 1e160, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 7200000 },
            { level: 31, health: 1e168, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 11000000 },
            { level: 32, health: 1e172, rewardChance: 1.0, rewardType: 'alchemy', baseReward: 17000000 },
        ];
        
        // ÁâπÊÆäÊñπÂùóÊï∞ÊçÆ
        const specialBlocks = [
            { id: 1, name: 'Èì±Âùó', health: 10000000000000, dropChance: 0.001, dropItem: 'iridium', dropAmount: 1 }, // 10ÂÖÜË°ÄÈáè
            { id: 2, name: 'È´òÁ∫ØÂ∫¶Èì±Âùó', health: 10000000000000000, dropChance: 0.1, dropItem: 'iridium', dropAmount: 1 }, // 1‰∫¨Ë°ÄÈáè
            { id: 3, name: 'ÁªìÊô∂ÊñπÂùó', health: 1, type: 'crystal' }, // ÁªìÊô∂ÊñπÂùóÔºåË°ÄÈáè‰∏∫1
            { id: 4, name: '¨≠∂Âùó', health: 100000000000000000000000, dropChance: 0.001, dropItem: 'hassium', dropAmount: 1 }, // 1000ÂûìË°ÄÈáè
            { id: 5, name: 'È´òÁ∫ØÂ∫¶¨≠∂Âùó', health: 100000000000000000000000000, dropChance: 0.1, dropItem: 'hassium', dropAmount: 1 }, // 100ÊùºË°ÄÈáè
            { id: 6, name: '‰ΩøÁî®ÊñπÂùó', health: 1, type: 'usage_bonus' }, // ‰ΩøÁî®ÊñπÂùóÔºå‰ΩøÁî®Â¢ûÁõäÂà∞Ëææ10‰∫ø‰ª•‰∏äÁÇπÂáªÊâçÊúâÊïà
            { id: 7, name: 'Áâ©Ë¥®ÊñπÂùó', health: 10000000000000000000000000000000000000000000000000000000000000000, dropChance: 1.0, type: 'matter' }, // 1‰∏çÂèØÊÄùËÆÆË°ÄÈáè
            { id: 8, name: 'Èáè‰∫ßÊ†∏ÂøÉ', health: 1e68, type: 'production_core' }, // Èáè‰∫ßÊ†∏ÂøÉÊñπÂùó
            { id: 9, name: 'ÁªàÁÑâÊ†∏ÂøÉ', health: 1e124, dropChance: 0.01, dropItem: 'endCore', dropAmount: 1, color: 'black-gradient' }, // 1ÁªàÁÑâÊ†∏ÂøÉÊñπÂùóÔºå1%Ê¶ÇÁéáËé∑Âæó1ÁªàÁÑâÊ†∏ÂøÉÔºåÈªëËâ≤Ê∏êÂèò
            { id: 10, name: 'ÁªàÁÑâÈõÜÈòµ', health: 1e160, specialDropRanges: true, color: 'colorful-gradient', dropRanges: [
                { chance: 0.005, min: 1, max: 100000000 },        // 0.005%Ê¶ÇÁéá1Ëá≥1‰∫øÔºàÈô§‰ª•10Ôºâ
                { chance: 0.003, min: 100000000, max: 1e16 }, // 0.003%Ê¶ÇÁéá1‰∫øËá≥1‰∫¨ÔºàÈô§‰ª•10Ôºâ
                { chance: 0.0015, min: 1e16, max: 1e24 }, // 0.0015%Ê¶ÇÁéá1‰∫¨Ëá≥1ÊùºÔºàÈô§‰ª•10Ôºâ
                { chance: 0.0005, min:1e24, max: 1e32 } // 0.0005%Ê¶ÇÁéá1ÊùºËá≥1Ê≤üÔºàÈô§‰ª•10Ôºâ
            ], blackHoleRanges: [
                { chance: 0.5, min: 1, max: 100000000 },        // 50%Ê¶ÇÁéá1Ëá≥1‰∫ø
                { chance: 0.3, min: 100000000, max:1e16 },
                { chance: 0.15, min: 1e16, max: 1e24 }, // 30%Ê¶ÇÁéá1‰∫øËá≥1‰∫¨
                { chance: 0.045, min: 1e24, max: 1e32 }, // 4.5%Ê¶ÇÁéá1‰∫¨Ëá≥1Êùº
                { chance: 0.0045, min: 1e32, max: 1e40 }, // 0.45%Ê¶ÇÁéá10ÊùºËá≥1Ê≤ü
                { chance: 0.0004, min: 1e40, max: 1e48 }, 
                { chance: 0.0001, min: 1e48, max: 1e56 }// 0.05%Ê¶ÇÁéá1Ê≤üËá≥1Ê≠£
            ], dropItem: 'endCore' } // ÁªàÁÑâÈõÜÈòµÊñπÂùó
        ];
        
        // Â•áÁÇπÊñπÂùóÊï∞ÊçÆ
        const singularityBlocks = [
            { id: 7, name: '1Á∫ßÂ•áÁÇπÊñπÂùó', health: 100000000000000000000000000000000, dropChance: 0.001, dropItem: 'singularity', dropAmount: 1 }, // 1Ê≤üË°ÄÈáè
            { id: 8, name: '2Á∫ßÂ•áÁÇπÊñπÂùó', health: 1000000000000000000000000000000000000, dropChance: 0.01, dropItem: 'singularity', dropAmount: 1 }, // 1Ê∂ßË°ÄÈáè
            { id: 9, name: '3Á∫ßÂ•áÁÇπÊñπÂùó', health: 10000000000000000000000000000000000000000, dropChance: 0.1, dropItem: 'singularity', dropAmount: 1 }, // 1Ê≠£Ë°ÄÈáè
            { id: 10, name: '4Á∫ßÂ•áÁÇπÊñπÂùó', health: 100000000000000000000000000000000000000000000, dropChance: 1.0, dropItem: 'singularity', dropAmount: 1 }, // 1ËΩΩË°ÄÈáè
            { id: 11, name: '5Á∫ßÂ•áÁÇπÊñπÂùó', health: 1000000000000000000000000000000000000000000000000, dropChance: 1.0, dropItem: 'singularity', dropAmount: 10 }, // 1ÊûÅË°ÄÈáèÔºà1e48ÔºâÔºå100%Ê¶ÇÁéáËé∑Âæó10Â•áÁÇπ
            { id: 12, name: '6Á∫ßÂ•áÁÇπÊñπÂùó', health: 1e80, dropChance: 1.0, dropItem: 'singularity', dropAmount: 10000 },
            { id: 13, name: '7Á∫ßÂ•áÁÇπÊñπÂùó', health: 1e100, dropChance: 1.0, dropItem: 'singularity', dropAmount: 1000000}, 
            { id: 14, name: '8Á∫ßÂ•áÁÇπÊñπÂùó', health: 1e120, dropChance: 1.0, dropItem: 'singularity', dropAmount: 100000000 }, 
            { id: 15, name: '9Á∫ßÂ•áÁÇπÊñπÂùó', health: 1e140, dropChance: 1.0, dropItem: 'singularity', dropAmount: 10000000000 },
            { id: 15, name: 'ÁªàÁ∫ßÂ•áÁÇπÊñπÂùó', health: 1e160, dropChance: 1.0, dropItem: 'singularity', dropAmount: 1000000000000 },
             // 1Âè§ÊààÂ∞îË°ÄÈáèÔºå100%Ê¶ÇÁéáËé∑Âæó10WÂ•áÁÇπ
        ];

        // Ê∑ªÂä†ÊØèÁßíÊåñÁüøÊ¨°Êï∞ÊòæÁ§∫ÂÖÉÁ¥†Âà∞Âè≥‰∏äËßí
        const miningPerSecondElement = document.createElement('div');
        miningPerSecondElement.id = 'mining-per-second';
        miningPerSecondElement.className = 'mining-per-second-display';
        miningPerSecondElement.textContent = 'ÊØèÁßíÊåñÁüø: 0Ê¨°';
        miningPerSecondElement.style.position = 'absolute';
        miningPerSecondElement.style.top = '10px';
        miningPerSecondElement.style.right = '10px';
        miningPerSecondElement.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
        miningPerSecondElement.style.color = 'white';
        miningPerSecondElement.style.padding = '10px';
        miningPerSecondElement.style.borderRadius = '5px';
        miningPerSecondElement.style.fontWeight = 'bold';
        document.querySelector('.game-container').appendChild(miningPerSecondElement);
        
        // ËÉΩÈáèËΩ¨ÂåñÊåâÈíÆÁöÑ‰∫ã‰ª∂ÁõëÂê¨Âô®Â∑≤ÁßªËá≥DOMContentLoadedÂÜÖÈÉ®
        
        // DOMÂÖÉÁ¥†
        const goldElement = document.getElementById('gold');
        const currentPickaxeElement = document.getElementById('current-pickaxe');
        const pickaxeBonusElement = document.getElementById('pickaxe-bonus');
        const usageBonusElement = document.getElementById('usage-bonus');
        const goldBonusElement = document.getElementById('gold-bonus');
        const alchemyBonusElement = document.getElementById('alchemy-bonus');
        const attackDamageElement = document.getElementById('attack-damage');
        const alchemyPointsElement = document.getElementById('alchemy-points');
        const alchemyCrystalsElement = document.getElementById('alchemy-crystals');
        const iridiumIngotsElement = document.getElementById('iridium-ingots');
        const hassiumIngotsElement = document.getElementById('hassium-ingots');
        const matterElement = document.getElementById('matter');
        const energyElement = document.getElementById('energy');
        const energyMultiplierElement = document.getElementById('energy-multiplier');
        const energyMultiplierDisplayElement = document.getElementById('energy-multiplier-display');
        const energyGainRateElement = document.getElementById('energy-gain-rate');
        const productionCoreElement = document.getElementById('production-core');
        const energyBonusElement = document.getElementById('energy-bonus');
        const convertEnergyButton = document.getElementById('convert-energy-btn');
        const convertEnergyMaxButton = document.getElementById('convert-energy-max-btn');
        const mineBlockElement = document.getElementById('mine-block');
        const blockLevelElement = document.querySelector('.block-level');
        const blockHealthElement = document.getElementById('block-health');
        const blockMaxHealthElement = document.getElementById('block-max-health');
        const healthFillElement = document.getElementById('health-fill');
        const blockRewardElement = document.getElementById('block-reward');
        const prevBlockButton = document.getElementById('prev-block');
        const nextBlockButton = document.getElementById('next-block');
        const toggleBlockTypeButton = document.getElementById('toggle-block-type');
        const pickaxeListElement = document.getElementById('pickaxe-list');
        const autoSaveStatusElement = document.getElementById('auto-save-status');
        const miningTabButton = document.getElementById('mining-tab');
        const alchemyTabButton = document.getElementById('alchemy-tab');
        const embeddingTabButton = document.getElementById('embedding-tab');
        const embeddingSystemElement = document.querySelector('.embedding-system');
        const alchemySystemElement = document.querySelector('.alchemy-system');
        const alchemyResultElement = document.getElementById('alchemy-result');
        const batchAlchemyValueElement = document.getElementById('batch-alchemy-value');
        const batchAlchemyTimesElement = document.getElementById('batch-alchemy-times');
        const batchAlchemyButtonElement = document.getElementById('batch-alchemy-btn');
        // Ê∑¨ÁÇºÁ≥ªÁªüÁõ∏ÂÖ≥DOMÂÖÉÁ¥†
        const forgingTabButton = document.getElementById('forging-tab');
        const forgingSystemElement = document.querySelector('.forging-system');
        const forgingCrystalValueElement = document.getElementById('forging-crystal-value');
        const forgingButtonElement = document.getElementById('forging-btn');
        const forgingResultElement = document.getElementById('forging-result');
        const forgingDamageBonusElement = document.getElementById('forging-damage-bonus');
        const forgingUsageBonusElement = document.getElementById('forging-usage-bonus');
        const forgingGoldGainElement = document.getElementById('forging-gold-gain');
        const forgingCrystalBonusElement = document.getElementById('forging-crystal-bonus');

        // ÂΩìÂâçÊñπÂùóÊï∞ÊçÆ
        let currentBlock = { ...blocks[gameData.currentBlockIndex] };

        // Êõ¥Êñ∞Ê∏∏ÊàèÁªüËÆ°‰ø°ÊÅØ
        function updateStats() {
            goldElement.textContent = formatNumber(gameData.gold);
            alchemyPointsElement.textContent = formatNumber(gameData.alchemyPoints);
            alchemyCrystalsElement.textContent = formatNumber(gameData.alchemyCrystals);
            iridiumIngotsElement.textContent = formatNumber(gameData.iridiumIngots);
            hassiumIngotsElement.textContent = formatNumber(gameData.hassiumIngots);
            matterElement.textContent = formatNumber(gameData.matter);
            energyElement.textContent = formatNumber(gameData.energy);
            energyMultiplierElement.textContent = formatNumber(gameData.energyMultiplier);
            energyMultiplierDisplayElement.textContent = formatNumber(gameData.energyMultiplier);
            const energyGainRate = (1 + gameData.productionCore) * gameData.energyMultiplier;
            energyGainRateElement.textContent = formatNumber(energyGainRate);
            productionCoreElement.textContent = formatNumber(gameData.productionCore);
            
            // ÊòæÁ§∫ÁªàÁÑâÊ†∏ÂøÉÊï∞ÈáèÂíåÁªàÁÑâÂ¢ûÁõä
            const endCoreElement = document.getElementById('end-core');
            const endBonusElement = document.getElementById('end-bonus');
            if (endCoreElement) endCoreElement.textContent = formatNumber(gameData.endCore);
            if (endBonusElement) {
                const endBonus = 1 + Math.pow(gameData.endCore, Math.exp(1/Math.E));
                endBonusElement.textContent = formatNumber(endBonus) + 'ÂÄç';
            }
            
            // Êõ¥Êñ∞Ê∑¨ÁÇºÂ¢ûÁõäÊòæÁ§∫
            if (gameData.forgingStats) {
                if (forgingDamageBonusElement) {
                    const damageBonus = gameData.forgingStats.damageBonus || 0;
                    forgingDamageBonusElement.textContent = damageBonus >= 100 ? formatNumber(damageBonus) + '%' : damageBonus.toFixed(2) + '%';
                }
                if (forgingUsageBonusElement) {
                    const usageBonus = gameData.forgingStats.usageBonusGain || 0;
                    forgingUsageBonusElement.textContent = usageBonus >= 100 ? formatNumber(usageBonus) + '%' : usageBonus.toFixed(2) + '%';
                }
                if (forgingGoldGainElement) {
                    const goldGain = gameData.forgingStats.goldGain || 0;
                    forgingGoldGainElement.textContent = goldGain >= 100 ? formatNumber(goldGain) + '%' : goldGain.toFixed(2) + '%';
                }
                if (forgingCrystalBonusElement) {
                    const crystalBonus = gameData.forgingStats.crystalBonus || 0;
                    forgingCrystalBonusElement.textContent = crystalBonus >= 100 ? formatNumber(crystalBonus) + '%' : crystalBonus.toFixed(2) + '%';
                }
            }
            
            // ËÆ°ÁÆóËÉΩÈáèÂ¢ûÁõä: 1 + (ËÉΩÈáè^(2^(1/3)))
        const energyBonus = 1 + Math.pow(gameData.energy, Math.pow(2, 1/3));
            energyBonusElement.textContent = formatNumber(energyBonus);
            
            // Êõ¥Êñ∞ÁÇºËçØÁªìÊô∂È¢ÑËßàÂíåÊåâÈíÆÁä∂ÊÄÅ
              const crystalsPreviewElement = document.getElementById('crystals-preview');
              const crystallizeBtnElement = document.getElementById('crystallize-btn');
              
              if (gameData.alchemyPoints >= 10000) {
                  const crystalsPreview = gameData.alchemyPoints / 10000;
                  crystalsPreviewElement.textContent = crystalsPreview.toFixed(1);
                  crystallizeBtnElement.disabled = false;
              } else {
                  crystalsPreviewElement.textContent = '0.0';
                  crystallizeBtnElement.disabled = true;
              }
            
            const currentPickaxe = pickaxes[gameData.currentPickaxeIndex];
            currentPickaxeElement.textContent = currentPickaxe.name;
            pickaxeBonusElement.textContent = formatNumber(currentPickaxe.bonus) + 'ÂÄç';
            usageBonusElement.textContent = formatNumber(gameData.usageBonus) + 'ÂÄç';
            alchemyBonusElement.textContent = formatNumber(gameData.alchemyBonus) + 'ÂÄç';
            
            // Êõ¥Êñ∞Â•áÁÇπÊï∞ÈáèÊòæÁ§∫
            const singularityElement = document.getElementById('embedding-singularity-count');
            if (singularityElement) {
                singularityElement.textContent = formatNumber(gameData.singularity);
            }
            // Êõ¥Êñ∞‰∏ªÁïåÈù¢Â•áÁÇπÊï∞ÈáèÊòæÁ§∫
            const mainSingularityElement = document.getElementById('singularity');
            if (mainSingularityElement) {
                mainSingularityElement.textContent = formatNumber(gameData.singularity);
            }
            
            // ËÆ°ÁÆóÈáëÂ∏ÅÂ¢ûÁõä: 1 + (ÈáëÂ∏Å^0.4) Áî®‰∫éÂÄçÂ¢ûÊîªÂáªÂäõ
            const attackBonus = 1 + Math.pow(gameData.gold, 0.4);
            // ËÆ°ÁÆóÊ∑¨ÁÇºÂ¢ûÁõä: Áî®‰∫éÂÄçÂ¢ûÈáëÂ∏ÅËé∑Âèñ
            const forgingBonus = 1 + gameData.forgingStats.goldGain / 100;
            goldBonusElement.textContent = formatNumber(attackBonus) + 'ÂÄç';
            
            // ËÆ°ÁÆóÊîªÂáª‰º§ÂÆ≥: ‰ΩøÁî®Â¢ûÁõä * ÊîªÂáªÂäõÂ¢ûÁõä * ÁÇºËçØÂ¢ûÁõä * ÈïêÂ≠êÂ¢ûÁõä * Ê∑¨ÁÇº‰º§ÂÆ≥Â¢ûÁõä * Èï∂ÂµåÊîªÂáªÂ¢ûÁõä * Èï∂ÂµåÂÖ®Â±ûÊÄßÂ¢ûÁõä * ËÉΩÈáèÂ¢ûÁõä
            // ‰øÆÂ§çÂÆûÈôÖ‰º§ÂÆ≥‰∏éÊòæÁ§∫‰º§ÂÆ≥‰∏ç‰∏ÄËá¥ÁöÑÈóÆÈ¢ò
            const damageBonus = 1 + gameData.forgingStats.damageBonus / 100;
            const embeddingAttackBonus = calculateEmbeddingBonus(1); // Ëé∑ÂèñÈï∂ÂµåÊîªÂáªÂ¢ûÁõä
            const embeddingAllBonus = calculateEmbeddingBonus(5); // Ëé∑ÂèñÈï∂ÂµåÂÖ®Â±ûÊÄßÂ¢ûÁõä
            // ËÆ°ÁÆóËÉΩÈáèÂ¢ûÁõäÔºö1 + ËÉΩÈáè^(2^(1/3))
        const damageEnergyBonus = 1 + Math.pow(gameData.energy, Math.pow(2, 1/3));
            // ËÆ°ÁÆóÁªàÁÑâÂ¢ûÁõäÔºö1 + ÁªàÁÑâÊ†∏ÂøÉÊï∞Èáè^(Ê†πÂè∑2*(e^(1/e)))
            const endBonus = 1 + Math.pow(gameData.endCore, Math.sqrt(2) * Math.exp(1/Math.E));
            const attackDamage = Math.floor(gameData.usageBonus * attackBonus * gameData.alchemyBonus * currentPickaxe.bonus * damageBonus * embeddingAttackBonus * embeddingAllBonus * damageEnergyBonus * endBonus);
            attackDamageElement.textContent = formatNumber(attackDamage);
            
            // Êõ¥Êñ∞Ê∑¨ÁÇºÂ±ûÊÄßÊòæÁ§∫
            if (forgingDamageBonusElement) forgingDamageBonusElement.textContent = gameData.forgingStats.damageBonus.toFixed(1) + '%';
            if (forgingUsageBonusElement) forgingUsageBonusElement.textContent = gameData.forgingStats.usageBonusGain.toFixed(1) + '%';
            if (forgingGoldGainElement) forgingGoldGainElement.textContent = gameData.forgingStats.goldGain.toFixed(1) + '%';
            if (forgingCrystalBonusElement) forgingCrystalBonusElement.textContent = gameData.forgingStats.crystalBonusGain.toFixed(1) + '%';
            
            // Ëé∑ÂèñÂΩìÂâçÊñπÂùóÊï∞ÊçÆÔºàÊ†πÊçÆÊñπÂùóÁ±ªÂûãÔºâ
            const isAlchemy = gameData.currentBlockType === 'alchemy';
            const isSpecial = gameData.currentBlockType === 'special';
            const isSingularity = gameData.currentBlockType === 'singularity';
            
            // Êõ¥Êñ∞ÊñπÂùó‰ø°ÊÅØ
            if (isAlchemy) {
                blockLevelElement.textContent = `${currentBlock.level}Á∫ßÁÇºËçØÊñπÂùó`;
                blockHealthElement.textContent = formatNumber(currentBlock.health);
                blockMaxHealthElement.textContent = formatNumber(currentBlock.maxHealth || currentBlock.health);
                
                if (currentBlock.weightedRewards) {
                    // 7Á∫ßÂä†ÊùÉÊ¶ÇÁéáÁÇºËçØÊñπÂùó
                    let rewardText = 'ÊéâËêΩÔºö';
                    currentBlock.weightedRewards.forEach((reward, index) => {
                        rewardText += `${reward.value}ÁÇºËçØÂÄº(${Math.round(reward.weight * 100)}%)`;
                        if (index < currentBlock.weightedRewards.length - 1) {
                              rewardText += ' ';
                          }
                      });
                    blockRewardElement.textContent = rewardText;
                } else if (currentBlock.specialRewards) {
                    // 5Á∫ßÁâπÊÆäÁÇºËçØÊñπÂùóÔºåËØ¶ÁªÜÊòæÁ§∫ÊéâËêΩÊ¶ÇÁéá
                    let rewardText = 'ÊéâËêΩÔºö';
                    currentBlock.specialRewards.forEach((weight, index) => {
                        rewardText += `${index + 1}ÁÇºËçØÂÄº(${Math.round(weight * 100)}%)`;
                        if (index < currentBlock.specialRewards.length - 1) {
                            rewardText += ' ';
                        }
                    });
                    blockRewardElement.textContent = rewardText;
                } else if (currentBlock.rewardChance && currentBlock.baseReward) {
                    // ÊôÆÈÄöÁÇºËçØÊñπÂùó
                    blockRewardElement.textContent = `(Ê¶ÇÁéá ${Math.round(currentBlock.rewardChance * 100)}%) Ëé∑Âæó ${currentBlock.baseReward} ÁÇºËçØÂÄº`;
                }
            } else if (isSingularity) {
                blockLevelElement.textContent = currentBlock.name;
                blockHealthElement.textContent = formatNumber(currentBlock.health);
                blockMaxHealthElement.textContent = formatNumber(currentBlock.maxHealth || currentBlock.health);
                blockRewardElement.textContent = `ÊéâËêΩ: Â•áÁÇπ ${currentBlock.dropAmount}‰∏™ (Ê¶ÇÁéá: ${(currentBlock.dropChance * 100).toFixed(2)}%)`;
            } else if (isSpecial) {
                blockLevelElement.textContent = `${currentBlock.name} (${currentBlock.id})`;
                blockHealthElement.textContent = formatNumber(currentBlock.health);
                blockMaxHealthElement.textContent = formatNumber(currentBlock.maxHealth || currentBlock.health);
                if (currentBlock.type === 'crystal') {
                    blockRewardElement.textContent = 'ÁÇºËçØÂ¢ûÁõä';
                } else if (currentBlock.type === 'usage_bonus') {
                    // ‰ΩøÁî®ÊñπÂùóÁâπÊÆäÊòæÁ§∫ - ËÆ°ÁÆóÂÆûÈôÖÂ¢ûÁõäÊï∞ÂÄºÔºàÂåÖÂê´Ê∑¨ÁÇºÂ¢ûÁõäÂíåÈï∂ÂµåÂ¢ûÁõäÔºâ
                    const currentPickaxe = pickaxes[gameData.currentPickaxeIndex];
                    const baseUsageGain = currentPickaxe.usageBonus || 0;
                    // ËÆ°ÁÆóÂü∫Á°Ä100ÂÄçÂ¢ûÁõä
                    const baseBonusGain = 100 * baseUsageGain;
                    // Ê∑ªÂä†Ê∑¨ÁÇº‰ΩøÁî®Â¢ûÁõä
                    const usageBonusMultiplier = 1 + gameData.forgingStats.usageBonusGain / 100;
                    // Ê∑ªÂä†Èï∂ÂµåÂ¢ûÁõäÔºà‰ΩøÁî®Â¢ûÁõäËé∑ÂèñÂ¢ûÁõäÔºâ
                    const embeddingUsageBonus = calculateEmbeddingBonus(3);
                    const bonusGain = baseBonusGain * usageBonusMultiplier * embeddingUsageBonus;
                    const formattedBonus = formatNumber(bonusGain);
                    blockRewardElement.innerHTML = `<span style="font-size: 6px; color: #666;">‰ΩøÁî®Â¢ûÁõä10‰∫ø‰ª•‰∏äËß£ÈîÅ</span>`;
                } else {
                    // Ê†πÊçÆÊñπÂùóÁöÑdropItemÂ±ûÊÄßÊòæÁ§∫Ê≠£Á°ÆÁöÑÊéâËêΩÁâ©ÂìÅÂêçÁß∞
            if (currentBlock.type === 'matter') {
                // ÊòæÁ§∫Áâ©Ë¥®ÊñπÂùóÁöÑËØ¶ÁªÜÊéâËêΩÊ¶ÇÁéáÔºåÂåÖÊã¨ÈªëÊ¥ûÈïêÊïàÊûú
                blockRewardElement.innerHTML = `ÊéâËêΩ: Áâ©Ë¥®<br>
                    ÊôÆÈÄöÈïêÊéâËêΩ:<br>
                    1Áâ©Ë¥®: 90%<br>
                    10Áâ©Ë¥®: 9%<br>
                    100Áâ©Ë¥®: 0.9%<br>
                    1000Áâ©Ë¥®: 0.09%<br>
                    10000Áâ©Ë¥®: 0.01%<br>
                    <br>
                    ÈªëÊ¥ûÈïêÊéâËêΩ:<br>
                    1Áâ©Ë¥®: 10%<br>
                    10Áâ©Ë¥®: 15%<br>
                    100Áâ©Ë¥®: 20%<br>
                    1000Áâ©Ë¥®: 25%<br>
                    10000Áâ©Ë¥®: 30%`;
            } else if (currentBlock.type === 'production_core') {
                // ÊòæÁ§∫Èáè‰∫ßÊ†∏ÂøÉÊñπÂùóÁöÑËØ¶ÁªÜÊéâËêΩÊ¶ÇÁéáÔºåÂåÖÊã¨ÈªëÊ¥ûÈïêÊïàÊûú
                blockRewardElement.innerHTML = `ÊéâËêΩ: Èáè‰∫ßÊ†∏ÂøÉ<br>
                    ÊôÆÈÄöÈïêÊéâËêΩ:<br>
                    1Èáè‰∫ßÊ†∏ÂøÉ: 0.9%<br>
                    10Èáè‰∫ßÊ†∏ÂøÉ: 0.09%<br>
                    100Èáè‰∫ßÊ†∏ÂøÉ: 0.01%<br>
                    Êó†ÊéâËêΩ: 99%<br>
                    <br>
                    ÈªëÊ¥ûÈïêÊéâËêΩ:<br>
                    1Èáè‰∫ßÊ†∏ÂøÉ: 90%<br>
                    10Èáè‰∫ßÊ†∏ÂøÉ: 9%<br>
                    100Èáè‰∫ßÊ†∏ÂøÉ: 1%`;
            } else {
                let dropItemName;
                if (currentBlock.dropItem === 'iridium') {
                    dropItemName = 'Èì±Èî≠';
                } else if (currentBlock.dropItem === 'hassium') {
                    dropItemName = '¨≠∂Èî≠';
                } else if (currentBlock.dropItem === 'singularity') {
                    dropItemName = 'Â•áÁÇπ';
                } else if (currentBlock.dropItem === 'endCore') {
                    dropItemName = 'ÁªàÁÑâÊ†∏ÂøÉ';
                    
                    // ÁªàÁÑâÈõÜÈòµÁâπÊÆäÊéâËêΩÊ¶ÇÁéáÊòæÁ§∫
                    if (currentBlock.specialDropRanges) {
                        let probabilityText = `ÊéâËêΩ: ÁªàÁÑâÊ†∏ÂøÉ<br>`;
                        probabilityText += `ÊôÆÈÄöÈïêÊéâËêΩ:<br>`;
                        
                        // ÊòæÁ§∫ÊôÆÈÄöÊéâËêΩÊ¶ÇÁéáÂå∫Èó¥
                        currentBlock.dropRanges.forEach((range, index) => {
                            probabilityText += `${index + 1}. ${formatNumber(range.min)}Ëá≥${formatNumber(range.max)}: ${(range.chance * 100).toFixed(2)}%<br>`;
                        });
                        
                        probabilityText += `ÈªëÊ¥ûÈïêÊéâËêΩ:<br>`;
                        // ÊòæÁ§∫ÈªëÊ¥ûÈïêÊéâËêΩÊ¶ÇÁéáÂå∫Èó¥
                        currentBlock.blackHoleRanges.forEach((range, index) => {
                            probabilityText += `${index + 1}. ${formatNumber(range.min)}Ëá≥${formatNumber(range.max)}: ${(range.chance * 100).toFixed(2)}%<br>`;
                        });
                        
                        blockRewardElement.innerHTML = probabilityText;
                    } else {
                        // ÊôÆÈÄöÁªàÁÑâÊ†∏ÂøÉÊñπÂùó
                        blockRewardElement.textContent = `ÊéâËêΩ: ${dropItemName} (Ê¶ÇÁéá: ${(currentBlock.dropChance * 100).toFixed(2)}%)`;
                    }
                } else {
                    blockRewardElement.textContent = `ÊéâËêΩ: ${dropItemName} (Ê¶ÇÁéá: ${(currentBlock.dropChance * 100).toFixed(2)}%)`;
                }
            }
                }
            } else {
                blockLevelElement.textContent = `${currentBlock.level}Á∫ßÊñπÂùó`;
                blockHealthElement.textContent = formatNumber(currentBlock.health);
                blockMaxHealthElement.textContent = formatNumber(currentBlock.maxHealth || currentBlock.health);
                blockRewardElement.textContent = `Â•ñÂä±: ${formatNumber(currentBlock.reward)}`;
            }
            
            // Êõ¥Êñ∞Ë°ÄÈáèÊù°
            const healthPercentage = (currentBlock.health / currentBlock.maxHealth) * 100;
            healthFillElement.style.width = `${healthPercentage}%`;
            
            // Êõ¥Êñ∞Ë°ÄÈáèÊù°È¢úËâ≤
            if (healthPercentage > 60) {
                healthFillElement.style.backgroundColor = '#4CAF50';
            } else if (healthPercentage > 30) {
                healthFillElement.style.backgroundColor = '#FFC107';
            } else {
                healthFillElement.style.backgroundColor = '#F44336';
            }
            
            // Êõ¥Êñ∞ÊñπÂùóÈ¢úËâ≤
            if (isAlchemy) {
                mineBlockElement.className = 'mine-block alchemy-block-color-' + currentBlock.level;
            } else if (currentBlock.color === 'black-gradient') {
                // ÁªàÁÑâÊ†∏ÂøÉÊñπÂùó - ÈªëËâ≤Ê∏êÂèò
                mineBlockElement.className = 'mine-block special-block-black-gradient';
            } else if (currentBlock.color === 'colorful-gradient') {
                // ÁªàÁÑâÈõÜÈòµÊñπÂùó - ÂΩ©Ëâ≤Ê∏êÂèò
                mineBlockElement.className = 'mine-block special-block-colorful-gradient';
            } else if (isSpecial || isSingularity) {
                mineBlockElement.className = 'mine-block special-block-color-' + currentBlock.id;
            } else {
                mineBlockElement.className = 'mine-block block-color-' + currentBlock.level;
            }
            
            // Êõ¥Êñ∞ÊéßÂà∂ÊåâÈíÆÁä∂ÊÄÅ
            if (isAlchemy) {
                prevBlockButton.disabled = gameData.currentAlchemyBlockIndex === 0;
                nextBlockButton.disabled = gameData.currentAlchemyBlockIndex === alchemyBlocks.length - 1;
            } else if (isSingularity) {
                prevBlockButton.disabled = gameData.currentSingularityBlockIndex === 0;
                nextBlockButton.disabled = gameData.currentSingularityBlockIndex === singularityBlocks.length - 1;
            } else if (isSpecial) {
                prevBlockButton.disabled = gameData.currentSpecialBlockIndex === 0;
                nextBlockButton.disabled = gameData.currentSpecialBlockIndex === specialBlocks.length - 1;
            } else {
                prevBlockButton.disabled = gameData.currentBlockIndex === 0;
                nextBlockButton.disabled = gameData.currentBlockIndex === blocks.length - 1;
            }
            
            // Êõ¥Êñ∞ÊñπÂùóÁ±ªÂûãÂàáÊç¢ÊåâÈíÆ
            let blockTypeText = 'ÊôÆÈÄö';
            if (isAlchemy) blockTypeText = 'ÁÇºËçØ';
            if (isSpecial) blockTypeText = 'ÁâπÊÆä';
            if (isSingularity) blockTypeText = 'Â•áÁÇπ';
            toggleBlockTypeButton.textContent = `ÂàáÊç¢ÊñπÂùóÁ±ªÂûã: ${blockTypeText}`;
            
            // Êõ¥Êñ∞ÂïÜÂ∫ó
            updateShop();
        }
        
        // ÊØèÁßíÊõ¥Êñ∞ÊåñÁüøÊ¨°Êï∞ÁªüËÆ°
        setInterval(() => {
            // Êõ¥Êñ∞ÊØèÁßíÊåñÁüøÊ¨°Êï∞
            gameData.miningPerSecond = gameData.miningCount;
            // Êõ¥Êñ∞ÊòæÁ§∫
            document.getElementById('mining-per-second').textContent = `ÊØèÁßíÊåñÁüø: ${formatNumber(gameData.miningPerSecond)}Ê¨°`;
            // ÈáçÁΩÆËÆ°Êï∞ÔºåÂáÜÂ§á‰∏ã‰∏ÄÁßíÁªüËÆ°
            gameData.miningCount = 0;
        }, 1000);
        
        // Ëá™Âä®‰øùÂ≠òÊ∏∏Êàè
        function autoSaveGame() {
            const saveData = {
                gameData: { ...gameData },
                currentBlock: { ...currentBlock }
            };
            
            localStorage.setItem('miningGameSave', JSON.stringify(saveData));
            
            // Êõ¥Êñ∞Ëá™Âä®‰øùÂ≠òÁä∂ÊÄÅ
            autoSaveStatusElement.textContent = 'Ëá™Âä®‰øùÂ≠ò: Â∑≤‰øùÂ≠ò';
            autoSaveStatusElement.style.color = '#4CAF50';
            
            setTimeout(() => {
                autoSaveStatusElement.textContent = 'Ëá™Âä®‰øùÂ≠ò: ËøõË°å‰∏≠';
            }, 1000);
        }
        
        // Âä†ËΩΩÊ∏∏Êàè
        function loadGame() {
            const savedData = localStorage.getItem('miningGameSave');
            
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                Object.assign(gameData, parsedData.gameData);
                
                // Ê†πÊçÆÂΩìÂâçÊñπÂùóÁ±ªÂûãÂä†ËΩΩÊ≠£Á°ÆÁöÑÊñπÂùó
                if (gameData.currentBlockType === 'alchemy') {
                    currentBlock = { ...alchemyBlocks[gameData.currentAlchemyBlockIndex] };
                } else if (gameData.currentBlockType === 'special') {
                    currentBlock = { ...specialBlocks[gameData.currentSpecialBlockIndex] };
                } else if (gameData.currentBlockType === 'singularity') {
                    currentBlock = { ...singularityBlocks[gameData.currentSingularityBlockIndex] };
                } else {
                    currentBlock = { ...blocks[gameData.currentBlockIndex] };
                }
                
                currentBlock.maxHealth = currentBlock.health;
                updateStats();
                alert('Ê∏∏ÊàèÂ∑≤Âä†ËΩΩÔºÅ');
            } else {
                alert('Ê≤°ÊúâÊâæÂà∞Â≠òÊ°£ÔºÅ');
            }
        }
        
        // ÂàáÊç¢Á≥ªÁªüÊ†áÁ≠æ
        function switchTab(tab) {
            // ÁßªÈô§ÊâÄÊúâÊ†áÁ≠æÈ°µÁöÑÊ¥ªÂä®Áä∂ÊÄÅ
            miningTabButton.classList.remove('active');
            alchemyTabButton.classList.remove('active');
            if (forgingTabButton) forgingTabButton.classList.remove('active');
            if (embeddingTabButton) embeddingTabButton.classList.remove('active');
            // ÁßªÈô§ÊàêÂ∞±Á≥ªÁªüÊ†áÁ≠æÁöÑÊ¥ªÂä®Áä∂ÊÄÅ
            const achievementsTabButton = document.getElementById('achievements-tab');
            if (achievementsTabButton) achievementsTabButton.classList.remove('active');
            
            // ÈöêËóèÊâÄÊúâÁ≥ªÁªü
            alchemySystemElement.style.display = 'none';
            if (forgingSystemElement) forgingSystemElement.style.display = 'none';
            if (embeddingSystemElement) embeddingSystemElement.style.display = 'none';
            // ÈöêËóèÊàêÂ∞±Á≥ªÁªü
            const achievementsSystemElement = document.getElementById('achievements-system');
            if (achievementsSystemElement) achievementsSystemElement.style.display = 'none';
            
            // Ê†πÊçÆÊ†áÁ≠æÈ°µÂêçÁß∞ÊòæÁ§∫Áõ∏Â∫îÁ≥ªÁªü
            if (tab === 'mining') {
                miningTabButton.classList.add('active');
                // ÊòæÁ§∫ÊåñÁüøÂå∫Âüü„ÄÅÈïêÂ≠êÂïÜÂ∫óÂíåËÉΩÈáèÁ≥ªÁªü
                const miningAreaElement = document.querySelector('.mining-area');
                const pickaxeShopElement = document.querySelector('.pickaxe-shop');
                const statsElement = document.querySelector('.stats');
                
                if (miningAreaElement) miningAreaElement.style.display = 'block';
                if (pickaxeShopElement) pickaxeShopElement.style.display = 'block';
                if (statsElement) statsElement.style.display = 'block';
            } else if (tab === 'alchemy') {
                alchemyTabButton.classList.add('active');
                alchemySystemElement.style.display = 'block';
            } else if (tab === 'forging' && forgingTabButton && forgingSystemElement) {
                forgingTabButton.classList.add('active');
                forgingSystemElement.style.display = 'block';
            } else if (tab === 'embedding' && embeddingTabButton && embeddingSystemElement) {
                embeddingTabButton.classList.add('active');
                embeddingSystemElement.style.display = 'block';
                updateEmbeddingDisplay();
            }
        }
        
        // ÂàáÊç¢ÊñπÂùóÁ±ªÂûã
        function toggleBlockType() {
            // Âæ™ÁéØÂàáÊç¢ÔºöÊôÆÈÄö -> ÁÇºËçØ -> ÁâπÊÆä -> Â•áÁÇπ -> ÊôÆÈÄö
            if (gameData.currentBlockType === 'normal') {
                gameData.currentBlockType = 'alchemy';
            } else if (gameData.currentBlockType === 'alchemy') {
                gameData.currentBlockType = 'special';
            } else if (gameData.currentBlockType === 'special') {
                gameData.currentBlockType = 'singularity';
            } else {
                gameData.currentBlockType = 'normal';
            }
            
            // ÈáçÁΩÆÂΩìÂâçÊñπÂùó
            if (gameData.currentBlockType === 'alchemy') {
                currentBlock = { ...alchemyBlocks[gameData.currentAlchemyBlockIndex] };
                document.getElementById('toggle-block-type').textContent = 'ÂàáÊç¢ÊñπÂùóÁ±ªÂûã: ÁÇºËçØ';
            } else if (gameData.currentBlockType === 'special') {
                currentBlock = { ...specialBlocks[gameData.currentSpecialBlockIndex] };
                document.getElementById('toggle-block-type').textContent = 'ÂàáÊç¢ÊñπÂùóÁ±ªÂûã: ÁâπÊÆä';
            } else if (gameData.currentBlockType === 'singularity') {
                currentBlock = { ...singularityBlocks[gameData.currentSingularityBlockIndex] };
                document.getElementById('toggle-block-type').textContent = 'ÂàáÊç¢ÊñπÂùóÁ±ªÂûã: Â•áÁÇπ';
            } else {
                currentBlock = { ...blocks[gameData.currentBlockIndex] };
                document.getElementById('toggle-block-type').textContent = 'ÂàáÊç¢ÊñπÂùóÁ±ªÂûã: ÊôÆÈÄö';
            }
            currentBlock.maxHealth = currentBlock.health;
            
            updateStats();
        }
        
        // ÊâßË°åÂçïÊ¨°ÁÇºËçØ
        function doSingleAlchemy(amount) {
            // Ê∂àËÄóÁÇºËçØÂÄº
            gameData.alchemyPoints -= amount;
            
            // ÁîüÊàêÈöèÊú∫Êï∞
            const random = Math.random();
            let resultMessage = '';
            let bonusGain = 0;
            
            if (random < 0.5) {
                // 50% Ê¶ÇÁéáÁÇ∏ÈîÖ
                resultMessage = 'ÁÇ∏ÈîÖ‰∫ÜÔºÅ';
                bonusGain = 0;
            } else if (random < 0.9) {
                // 40% Ê¶ÇÁéáËé∑ÂæóÂü∫Á°ÄÂ¢ûÁõä
                const baseGain = Math.pow(amount, 1/3);
                bonusGain = baseGain;
                resultMessage = `Ëé∑Âæó ${bonusGain.toFixed(2)} ÁÇºËçØÂ¢ûÁõäÔºÅ`;
            } else if (random < 0.975) {
                // 7.5% Ê¶ÇÁéáËé∑Âæó10ÂÄçÂ¢ûÁõä
                const baseGain = Math.pow(amount, 1/3);
                bonusGain = 10 * baseGain;
                resultMessage = `10ÂÄçÂá∫Ë¥ßÔºÅËé∑Âæó ${bonusGain.toFixed(2)} ÁÇºËçØÂ¢ûÁõäÔºÅ`;
            } else {
                // 2.5% Ê¶ÇÁéáËé∑Âæó100ÂÄçÂ¢ûÁõä
                const baseGain = Math.pow(amount, 1/3);
                bonusGain = 100 * baseGain;
                resultMessage = `100ÂÄçÂá∫Ë¥ßÔºÅÔºÅÔºÅËé∑Âæó ${bonusGain.toFixed(2)} ÁÇºËçØÂ¢ûÁõäÔºÅ`;
            }
            
            // Êõ¥Êñ∞ÁÇºËçØÂ¢ûÁõä
            gameData.alchemyBonus += bonusGain;
            
            return { resultMessage, bonusGain };
        }
        
        // ÁÇºËçØÂäüËÉΩÂ∑≤ÁßªÈô§Ôºå‰ªÖ‰øùÁïô‰∏ÄÈîÆÁÇºËçØ
        
        // ‰∏ÄÈîÆÁÇºËçØÂäüËÉΩÔºà‰ºòÂåñÁâàÔºâ
        function performBatchAlchemy() {
            let batchValue = parseInt(batchAlchemyValueElement.value);
            let batchTimes = parseInt(batchAlchemyTimesElement.value);
            
            // È™åËØÅËæìÂÖ•
            if (isNaN(batchValue) || batchValue <= 0) {
                batchValue = 1;
                batchAlchemyValueElement.value = '1';
            }
            
            if (isNaN(batchTimes) || batchTimes <= 0) {
                batchTimes = 1;
                batchAlchemyTimesElement.value = '1';
            } else if (batchTimes > 1000) {
                batchTimes = 1000;
                batchAlchemyTimesElement.value = '1000';
            }
            
            // Ê£ÄÊü•ÁÇºËçØÂÄºÊòØÂê¶Ë∂≥Â§üÔºåÂ¶ÇÊûú‰∏çË∂≥ÂàôËá™Âä®Ë∞ÉÊï¥
            const totalRequired = batchValue * batchTimes;
            if (totalRequired > gameData.alchemyPoints) {
                if (batchTimes === 1) {
                    // Â¶ÇÊûúÊ¨°Êï∞‰∏∫1ÔºåË∞ÉÊï¥ÁÇºËçØÂÄº
                    batchValue = Math.floor(gameData.alchemyPoints);
                    batchAlchemyValueElement.value = batchValue.toString();
                } else {
                    // Â¶ÇÊûúÊ¨°Êï∞Â§ß‰∫é1ÔºåË∞ÉÊï¥Ê¨°Êï∞
                    batchTimes = Math.floor(gameData.alchemyPoints / batchValue);
                    if (batchTimes < 1) {
                        batchTimes = 1;
                        batchValue = Math.floor(gameData.alchemyPoints);
                        batchAlchemyValueElement.value = batchValue.toString();
                    }
                    batchAlchemyTimesElement.value = batchTimes.toString();
                }
            }
            
            // Á°Æ‰øùËá≥Â∞ëÊúâ‰∏ÄÊ¨°ÁÇºËçØ
            if (batchValue <= 0 || gameData.alchemyPoints <= 0) {
                alert('ÁÇºËçØÂÄº‰∏çË∂≥ÔºÅ');
                return;
            }
            
        // ÁÆÄÂçïÂèØÈù†ÁöÑFPSËÆ°Êï∞Âô®ÂÆûÁé∞
        document.addEventListener('DOMContentLoaded', function() {
            const fpsCounter = document.getElementById('fps-counter');
            if (!fpsCounter) return;
            
            let frames = 0;
            let startTime = performance.now();
            let lastFrameTime = startTime;
            
            function updateFPS() {
                const now = performance.now();
                frames++;
                
                // ËÆ°ÁÆóÂΩìÂâçÂ∏ßÁéáÔºàÊØèÂ∏ßÈÉΩÊõ¥Êñ∞Ôºâ
                const currentFPS = Math.round(1000 / (now - lastFrameTime));
                fpsCounter.textContent = `FPS: ${currentFPS}`;
                
                lastFrameTime = now;
                
                // ÁªßÁª≠‰∏ã‰∏ÄÂ∏ß
                requestAnimationFrame(updateFPS);
            }
            
            // ÂêØÂä®FPSËÆ°Êï∞Âô®
            requestAnimationFrame(updateFPS);
        });
        
        // ÊâßË°åÊâπÈáèÁÇºËçØ
            let totalBonus = 0;
            let successCount = 0;
            let tenXCount = 0;
            let hundredXCount = 0;
            
            for (let i = 0; i < batchTimes; i++) {
                const result = doSingleAlchemy(batchValue);
                totalBonus += result.bonusGain;
                
                if (result.resultMessage.includes('ÁÇ∏ÈîÖ') === false) {
                    successCount++;
                    if (result.resultMessage.includes('10ÂÄç')) {
                        tenXCount++;
                    } else if (result.resultMessage.includes('100ÂÄç')) {
                        hundredXCount++;
                    }
                }
            }
            
            // ÊòæÁ§∫ÁªºÂêàÁªìÊûú
            let batchResultMessage = `‰∏ÄÈîÆÁÇºËçØÂÆåÊàêÔºÅÂÖ±ËøõË°å${batchTimes}Ê¨°ÁÇºËçØ„ÄÇ`;
            batchResultMessage += `\nÊàêÂäüÊ¨°Êï∞: ${successCount}`;
            batchResultMessage += `\nËé∑ÂæóÊÄªÂ¢ûÁõä: ${totalBonus.toFixed(2)}`;
            batchResultMessage += `\n10ÂÄçÂá∫Ë¥ßÊ¨°Êï∞: ${tenXCount}`;
            batchResultMessage += `\n100ÂÄçÂá∫Ë¥ßÊ¨°Êï∞: ${hundredXCount}`;
            
            alchemyResultElement.textContent = batchResultMessage;
            
            // Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü
            batchAlchemyValueElement.value = '';
            batchAlchemyTimesElement.value = '';
            
            // Êõ¥Êñ∞ÁªüËÆ°‰ø°ÊÅØ
            updateStats();
        }
        
        // ‰∏çÈúÄË¶ÅÂçïÁã¨ÁöÑÊåñÊéòÁâπÊÆäÊñπÂùóÂáΩÊï∞Ôºå‰ΩøÁî®Áªü‰∏ÄÁöÑmineBlockÂáΩÊï∞

        // Êõ¥Êñ∞ÂïÜÂ∫óÊòæÁ§∫
        function updateShop() {
            pickaxeListElement.innerHTML = '';
            
            pickaxes.forEach((pickaxe, index) => {
                const isOwned = gameData.ownedPickaxes.includes(index);
                const isCurrent = index === gameData.currentPickaxeIndex;
                
                const pickaxeItem = document.createElement('div');
                pickaxeItem.className = `pickaxe-item ${isOwned ? 'owned' : ''} ${isCurrent ? 'current' : ''}`;
                
                const nameElement = document.createElement('div');
                nameElement.textContent = pickaxe.name;
                
                const bonusElement = document.createElement('div');
                bonusElement.textContent = `Â¢ûÁõä: ${pickaxe.bonus}`;
                
                const usageElement = document.createElement('div');
                usageElement.textContent = `‰ΩøÁî®Â¢ûÁõä: ${pickaxe.usageBonus}`;
                
                const costElement = document.createElement('div');
                if (pickaxe.costs) {
                    // Â§öËµÑÊ∫êÊ∂àËÄóÁöÑÊÉÖÂÜµ
                    let costText = '‰ª∑Ê†º: ';
                    const costParts = [];
                    pickaxe.costs.forEach(cost => {
                        let resourceName = '';
                        switch(cost.type) {
                            case 'productionCore':
                                resourceName = 'Èáè‰∫ßÊ†∏ÂøÉ';
                                break;
                            case 'energy':
                                resourceName = 'ËÉΩÈáè';
                                break;
                            case 'endCore':
                                resourceName = 'ÁªàÁÑâÊ†∏ÂøÉ';
                                break;
                            case 'iridiumIngots':
                                resourceName = 'Èì±Èî≠';
                                break;
                            case 'hassiumIngots':
                                resourceName = '¨≠∂Èî≠';
                                break;
                            case 'singularity':
                                resourceName = 'Â•áÁÇπ';
                                break;
                            case 'gold':
                                resourceName = 'ÈáëÂ∏Å';
                                break;
                            case 'alchemyCrystals':
                                resourceName = 'ÁÇºËçØÁªìÊô∂';
                                break;
                            case 'matter':
                                resourceName = 'Áâ©Ë¥®';
                                break;
                            case 'usage_bonus':
                                resourceName = '‰ΩøÁî®Â¢ûÁõä';
                                break;
                            default:
                                resourceName = cost.type;
                        }
                        costParts.push(`${formatNumber(cost.amount)} ${resourceName}`);
                    });
                    costElement.textContent = costText + costParts.join(' + ');
                } else if (pickaxe.costType === 'iridium') {
                    costElement.textContent = `‰ª∑Ê†º: ${pickaxe.cost} Èì±Èî≠`;
                } else if (pickaxe.costType === 'hassium') {
                    costElement.textContent = `‰ª∑Ê†º: ${pickaxe.cost} ¨≠∂Èî≠`;
                } else if (pickaxe.costType === 'singularity') {
                    costElement.textContent = `‰ª∑Ê†º: ${pickaxe.cost} Â•áÁÇπ`;
                } else if (pickaxe.costType === 'energy') {
                    costElement.textContent = `‰ª∑Ê†º: ${formatNumber(pickaxe.cost)} ËÉΩÈáè`;
                } else if (pickaxe.costType === 'usage_bonus') {
                    costElement.textContent = `‰ª∑Ê†º: ${formatNumber(pickaxe.cost)} ‰ΩøÁî®Â¢ûÁõä`;
                } else if (pickaxe.costType === 'endCore') {
                    costElement.textContent = `‰ª∑Ê†º: ${pickaxe.cost} ÁªàÁÑâÊ†∏ÂøÉ`;
                } else {
                    costElement.textContent = `‰ª∑Ê†º: ${formatNumber(pickaxe.cost)} ÈáëÂ∏Å`;
                }
                
                // Ê∑ªÂä†ÁâπÊÆäÈïêÂ≠êÊèèËø∞
                if (pickaxe.description) {
                    const descriptionElement = document.createElement('div');
                    descriptionElement.textContent = pickaxe.description;
                    descriptionElement.style.color = '#FFD700';
                    descriptionElement.style.fontSize = '12px';
                    descriptionElement.style.marginTop = '5px';
                    pickaxeItem.appendChild(descriptionElement);
                }
                
                const actionButton = document.createElement('button');
                actionButton.className = 'buy-btn';
                
                if (isOwned) {
                    if (isCurrent) {
                        actionButton.textContent = 'ÂΩìÂâç‰ΩøÁî®';
                        actionButton.disabled = true;
                    } else {
                        actionButton.textContent = 'ÂàáÊç¢‰ΩøÁî®';
                        actionButton.addEventListener('click', () => {
                            gameData.currentPickaxeIndex = index;
                            updateStats();
                        });
                    }
                } else {
                    actionButton.textContent = 'Ë¥≠‰π∞';
                    
                    // Ê£ÄÊü•ÊòØÂê¶ÂèØ‰ª•Ë¥≠‰π∞
                    let canAfford = false;
                    if (pickaxe.costs) {
                        // Â§öËµÑÊ∫êÊ∂àËÄóÁöÑÊ£ÄÊü•
                        canAfford = true;
                        pickaxe.costs.forEach(cost => {
                            switch(cost.type) {
                                case 'productionCore':
                                    if (!(gameData.productionCore >= cost.amount)) {
                                        canAfford = false;
                                    }
                                    break;
                                case 'energy':
                                    if (!(gameData.energy >= cost.amount)) {
                                        canAfford = false;
                                    }
                                    break;
                                case 'endCore':
                                    if (!(gameData.endCore >= cost.amount)) {
                                        canAfford = false;
                                    }
                                    break;
                                case 'iridiumIngots':
                                    if (!(gameData.iridiumIngots >= cost.amount)) {
                                        canAfford = false;
                                    }
                                    break;
                                case 'hassiumIngots':
                                    if (!(gameData.hassiumIngots >= cost.amount)) {
                                        canAfford = false;
                                    }
                                    break;
                                case 'singularity':
                                    if (!(gameData.singularity >= cost.amount)) {
                                        canAfford = false;
                                    }
                                    break;
                                case 'gold':
                                    if (!(gameData.gold >= cost.amount)) {
                                        canAfford = false;
                                    }
                                    break;
                                case 'alchemyCrystals':
                                    if (!(gameData.alchemyCrystals && gameData.alchemyCrystals >= cost.amount)) {
                                        canAfford = false;
                                    }
                                    break;
                                case 'matter':
                                    if (!(gameData.matter && gameData.matter >= cost.amount)) {
                                        canAfford = false;
                                    }
                                    break;
                                case 'usage_bonus':
                                    if (!(gameData.usageBonus >= cost.amount)) {
                                        canAfford = false;
                                    }
                                    break;
                                default:
                                    // Êú™Áü•ËµÑÊ∫êÁ±ªÂûãÔºåÈªòËÆ§‰∏∫‰∏çÂèØË¥≠‰π∞
                                    canAfford = false;
                            }
                        });
                    } else if (pickaxe.costType === 'iridium') {
                        canAfford = gameData.iridiumIngots >= pickaxe.cost;
                    } else if (pickaxe.costType === 'hassium') {
                        canAfford = gameData.hassiumIngots >= pickaxe.cost;
                    } else if (pickaxe.costType === 'singularity') {
                        canAfford = gameData.singularity >= pickaxe.cost;
                    } else if (pickaxe.costType === 'energy') {
                        canAfford = gameData.energy >= pickaxe.cost;
                    } else if (pickaxe.costType === 'usage_bonus') {
                        canAfford = gameData.usageBonus >= pickaxe.cost;
                    } else if (pickaxe.costType === 'endCore') {
                        canAfford = gameData.endCore >= pickaxe.cost;
                    } else {
                        canAfford = gameData.gold >= pickaxe.cost;
                    }
                    actionButton.disabled = !canAfford;
                    
                    actionButton.addEventListener('click', () => {
                        if (canAfford) {
                            // Êâ£Èô§ÂØπÂ∫îË¥ßÂ∏Å
                            if (pickaxe.costs) {
                                // Â§öËµÑÊ∫êÊ∂àËÄóÁöÑÊâ£Èô§
                                pickaxe.costs.forEach(cost => {
                                    switch(cost.type) {
                                        case 'productionCore':
                                            gameData.productionCore -= cost.amount;
                                            break;
                                        case 'energy':
                                            gameData.energy -= cost.amount;
                                            break;
                                        case 'endCore':
                                            gameData.endCore -= cost.amount;
                                            break;
                                        case 'iridiumIngots':
                                            gameData.iridiumIngots -= cost.amount;
                                            break;
                                        case 'hassiumIngots':
                                            gameData.hassiumIngots -= cost.amount;
                                            break;
                                        case 'singularity':
                                            gameData.singularity -= cost.amount;
                                            break;
                                        case 'gold':
                                            gameData.gold -= cost.amount;
                                            break;
                                        case 'alchemyCrystals':
                                            // ÂÅáËÆæalchemyCrystalsÂú®gameData‰∏≠Áõ¥Êé•ÂèØÁî®
                                            if (gameData.alchemyCrystals) {
                                                gameData.alchemyCrystals -= cost.amount;
                                            }
                                            break;
                                        case 'matter':
                                            // ÂÅáËÆæmatterÂú®gameData‰∏≠Áõ¥Êé•ÂèØÁî®
                                            if (gameData.matter) {
                                                gameData.matter -= cost.amount;
                                            }
                                            break;
                                        case 'usage_bonus':
                                            gameData.usageBonus -= cost.amount;
                                            break;
                                    }
                                });
                            } else if (pickaxe.costType === 'iridium') {
                        gameData.iridiumIngots -= pickaxe.cost;
                    } else if (pickaxe.costType === 'hassium') {
                        gameData.hassiumIngots -= pickaxe.cost;
                    } else if (pickaxe.costType === 'singularity') {
                        gameData.singularity -= pickaxe.cost;
                    } else if (pickaxe.costType === 'energy') {
                        gameData.energy -= pickaxe.cost;
                    } else if (pickaxe.costType === 'usage_bonus') {
                        gameData.usageBonus -= pickaxe.cost;
                    } else if (pickaxe.costType === 'endCore') {
                        gameData.endCore -= pickaxe.cost;
                    } else {
                        gameData.gold -= pickaxe.cost;
                    }
                            
                            gameData.ownedPickaxes.push(index);
                            gameData.currentPickaxeIndex = index;
                            updateStats();
                        }
                    });
                }
                
                pickaxeItem.appendChild(nameElement);
                pickaxeItem.appendChild(bonusElement);
                pickaxeItem.appendChild(usageElement);
                pickaxeItem.appendChild(costElement);
                pickaxeItem.appendChild(actionButton);
                
                pickaxeListElement.appendChild(pickaxeItem);
            });
        }

        // ÊåñÁüøÂáΩÊï∞
        function mineBlock() {
            // Â¢ûÂä†ÊåñÁüøÊ¨°Êï∞ËÆ°Êï∞
            gameData.miningCount++;
            // Ê∏ÖÈô§ÂèØËÉΩÂ≠òÂú®ÁöÑÂ¢ûÁõäÊòæÁ§∫ÔºàÊØèÊ¨°ÁÇπÂáª‰ªª‰ΩïÊñπÂùóÈÉΩ‰ºöÊ∏ÖÈô§Ôºâ
            const bonusDisplayElement = document.getElementById('crystal-bonus-display');
            if (bonusDisplayElement) {
                bonusDisplayElement.textContent = '';
            }
            // Ê∏ÖÈô§ÂèØËÉΩÂ≠òÂú®ÁöÑ‰ΩøÁî®Â¢ûÁõäÊòæÁ§∫
            const usageBonusDisplayElement = document.getElementById('usage-bonus-display');
            if (usageBonusDisplayElement) {
                usageBonusDisplayElement.textContent = '';
            }
            
            const currentPickaxe = pickaxes[gameData.currentPickaxeIndex];
            
            // ËÆ°ÁÆóÈáëÂ∏ÅÂ¢ûÁõä: 1 + (ÈáëÂ∏Å^0.4) Áî®‰∫éÂÄçÂ¢ûÊîªÂáªÂäõ
            const attackBonus = 1 + Math.pow(gameData.gold, 0.4);
            // ËÆ°ÁÆóÊ∑¨ÁÇºÂ¢ûÁõä: Áî®‰∫éÂÄçÂ¢ûÈáëÂ∏ÅËé∑Âèñ
            const forgingBonus = 1 + gameData.forgingStats.goldGain / 100;
            
            // ËÆ°ÁÆóÊîªÂáª‰º§ÂÆ≥: ‰ΩøÁî®Â¢ûÁõä * ÊîªÂáªÂäõÂ¢ûÁõä * ÁÇºËçØÂ¢ûÁõä * ÈïêÂ≠êÂ¢ûÁõä * Ê∑¨ÁÇº‰º§ÂÆ≥Â¢ûÁõä * Èï∂ÂµåÊîªÂáªÂ¢ûÁõä * Èï∂ÂµåÂÖ®Â±ûÊÄßÂ¢ûÁõä * ËÉΩÈáèÂ¢ûÁõä
            // ‰øÆÂ§çÂÆûÈôÖ‰º§ÂÆ≥‰∏éÊòæÁ§∫‰º§ÂÆ≥‰∏ç‰∏ÄËá¥ÁöÑÈóÆÈ¢òÔºåÁ°Æ‰øùÊòæÁ§∫ÂíåÂÆûÈôÖËÆ°ÁÆó‰∏ÄËá¥
            const damageBonus = 1 + gameData.forgingStats.damageBonus / 100;
            const embeddingAttackBonus = calculateEmbeddingBonus(1); // Ëé∑ÂèñÈï∂ÂµåÊîªÂáªÂ¢ûÁõä
            const embeddingAllBonus = calculateEmbeddingBonus(5); // Ëé∑ÂèñÈï∂ÂµåÂÖ®Â±ûÊÄßÂ¢ûÁõä
            // ËÆ°ÁÆóËÉΩÈáèÂ¢ûÁõäÔºö1 + (ËÉΩÈáè^(2^(1/3)))
        const damageEnergyBonus = 1 + Math.pow(gameData.energy, Math.pow(2, 1/3));
        // ËÆ°ÁÆóÁªàÁÑâÂ¢ûÁõäÔºö1 + ÁªàÁÑâÊ†∏ÂøÉÊï∞Èáè^(Ê†πÂè∑2*(e^(1/e)))
        const endBonus = 1 + Math.pow(gameData.endCore, Math.sqrt(2) * Math.exp(1/Math.E));
        
            // ÁâπÊÆäÈïêÂ≠êÂ§ÑÁêÜ
            let attackDamage = 1; // ÈªòËÆ§‰º§ÂÆ≥‰∏∫1ÔºåÁâπÊÆäÈïêÂ≠êÂèØËÉΩ‰ºöË¶ÜÁõñËøô‰∏™ÂÄº
            
            if (currentPickaxe.specialType === 'usage') {
                // ‰ΩøÁî®ÈïêÔºö‰º§ÂÆ≥Âº∫Âà∂‰∏∫1
                attackDamage = 1;
            } else {
                // ÊôÆÈÄöËÆ°ÁÆó‰º§ÂÆ≥
                attackDamage = Math.floor(gameData.usageBonus * attackBonus * gameData.alchemyBonus * currentPickaxe.bonus * damageBonus * embeddingAttackBonus * embeddingAllBonus * damageEnergyBonus * endBonus);
            }
            
            // ÂáèÂ∞ëÊñπÂùóË°ÄÈáè
            currentBlock.health -= attackDamage;
            
            // Â¢ûÂä†‰ΩøÁî®Â¢ûÁõäÔºåÂåÖÂê´Ê∑¨ÁÇºÂ¢ûÁõäÂíåÈï∂ÂµåÂ¢ûÁõä
            let usageBonusGain = currentPickaxe.usageBonus * (1 + gameData.forgingStats.usageBonusGain / 100);
            const embeddingUsageBonus = calculateEmbeddingBonus(3); // Ëé∑ÂèñÈï∂Âµå‰ΩøÁî®Â¢ûÁõäËé∑ÂèñÂ¢ûÁõä
            
            // ‰ΩøÁî®ÈïêÁâπÊÆäÂ§ÑÁêÜÔºö‰ΩøÁî®Â¢ûÁõä‰∏∫ÁõÆÂâçÊúÄÂº∫ÈïêÂ≠ê‰ΩøÁî®Â¢ûÁõäÁöÑ100ÂÄç
            if (currentPickaxe.specialType === 'usage') {
                // ÊâæÂà∞ÊúÄÂº∫ÁöÑ‰ΩøÁî®Â¢ûÁõäÔºà‰∏çÂåÖÊã¨ÁâπÊÆäÈïêÂ≠êÔºâ
                // ‰ΩøÁî®Â¢ûÁõäÂõ∫ÂÆö‰∏∫10‰∫øÔºå‰ªçËÄÉËôëÈîªÈÄ†Á≥ªÁªüÁöÑ‰ΩøÁî®Â¢ûÁõäÂä†Êàê
                usageBonusGain = 1000000000 * (1 + gameData.forgingStats.usageBonusGain / 100);
            }
            
            gameData.usageBonus += usageBonusGain * embeddingUsageBonus * embeddingAllBonus;
            
            // Ê£ÄÊü•ÊñπÂùóÊòØÂê¶Ë¢´ÊåñÁ©∫
            if (currentBlock.health <= 0) {
                // Ê†πÊçÆÊñπÂùóÁ±ªÂûãÂ§ÑÁêÜÂ•ñÂä±
                if (gameData.currentBlockType === 'alchemy') {
                    // ÁÇºËçØÊñπÂùó
                    const isBlackHolePickaxe = currentPickaxe.specialType === 'black_hole';
                    
                    if (currentBlock.weightedRewards) {
                        let rewardAmount = 0;
                        
                        if (isBlackHolePickaxe) {
                            // ÈªëÊ¥ûÈïêÁâπÊÆäÂ§ÑÁêÜÔºö7Á∫ßÁÇºËçØÊñπÂùóÂøÖÂÆöÊéâËêΩ30ÁÇºËçØÂÄº
                            if (currentBlock.level === 7) {
                                rewardAmount = 30;
                            } else if (currentBlock.level === 10) {
                                // 10Á∫ßÁÇºËçØÊñπÂùóÂøÖÂÆöÊéâËêΩ300ÁÇºËçØÂÄº
                                rewardAmount = 300;
                            } else {
                                // ÂÖ∂‰ªñÂä†ÊùÉÊñπÂùóÈÄâÊã©ÊúÄÂ§ßÂÄº
                                let maxReward = 0;
                                currentBlock.weightedRewards.forEach(item => {
                                    if (item.value > maxReward) {
                                        maxReward = item.value;
                                    }
                                });
                                rewardAmount = maxReward;
                            }
                        } else {
                            // Ê≠£Â∏∏ÈöèÊú∫
                            const random = Math.random();
                            let cumulativeProbability = 0;
                            
                            for (let i = 0; i < currentBlock.weightedRewards.length; i++) {
                                cumulativeProbability += currentBlock.weightedRewards[i].weight;
                                if (random < cumulativeProbability) {
                                    rewardAmount = currentBlock.weightedRewards[i].value;
                                    break;
                                }
                            }
                        }
                        
                        const embeddingAlchemyBonus = calculateEmbeddingBonus(2); // Ëé∑ÂèñÈï∂ÂµåÁÇºËçØÂÄºËé∑ÂèñÂ¢ûÁõä
                        const embeddingAllBonus = calculateEmbeddingBonus(5); // Ëé∑ÂèñÈï∂ÂµåÂÖ®Â±ûÊÄßÂ¢ûÁõä
                        gameData.alchemyPoints += Math.floor(rewardAmount * embeddingAlchemyBonus * embeddingAllBonus);
                    } else if (currentBlock.specialRewards) {
                        // 5Á∫ßÁâπÊÆäÁÇºËçØÊñπÂùó
                        let rewardAmount = 0;
                        
                        if (isBlackHolePickaxe) {
                            // ÈªëÊ¥ûÈïêÔºö5Á∫ßÁÇºËçØÊñπÂùóÂøÖÂÆöÊéâËêΩ4ÁÇºËçØÂÄº
                            rewardAmount = 4;
                        } else {
                            // Ê≠£Â∏∏ÈöèÊú∫
                            const random = Math.random();
                            let cumulativeProbability = 0;
                            
                            for (let i = 0; i < currentBlock.specialRewards.length; i++) {
                                cumulativeProbability += currentBlock.specialRewards[i];
                                if (random < cumulativeProbability) {
                                    rewardAmount = i + 1;
                                    break;
                                }
                            }
                        }
                        
                        const embeddingAlchemyBonus = calculateEmbeddingBonus(2); // Ëé∑ÂèñÈï∂ÂµåÁÇºËçØÂÄºËé∑ÂèñÂ¢ûÁõä
                        const embeddingAllBonus = calculateEmbeddingBonus(5); // Ëé∑ÂèñÈï∂ÂµåÂÖ®Â±ûÊÄßÂ¢ûÁõä
                        gameData.alchemyPoints += Math.floor(rewardAmount * embeddingAlchemyBonus * embeddingAllBonus);
                    } else {
                        // ÊôÆÈÄöÁÇºËçØÊñπÂùó
                        const embeddingAlchemyBonus = calculateEmbeddingBonus(2); // Ëé∑ÂèñÈï∂ÂµåÁÇºËçØÂÄºËé∑ÂèñÂ¢ûÁõä
                        const embeddingAllBonus = calculateEmbeddingBonus(5); // Ëé∑ÂèñÈï∂ÂµåÂÖ®Â±ûÊÄßÂ¢ûÁõä
                        
                        if (isBlackHolePickaxe || Math.random() < currentBlock.rewardChance) {
                            gameData.alchemyPoints += Math.floor(currentBlock.baseReward * embeddingAlchemyBonus * embeddingAllBonus);
                        }
                    }
                } else if (gameData.currentBlockType === 'special') {
                    // ÁâπÊÆäÊñπÂùóÔºàÂ¶ÇÈì±ÂùóÔºâ
                    if (currentBlock.type === 'crystal') {
                        // ÁªìÊô∂ÊñπÂùóÔºöÁÇºËçØÂ¢ûÁõä = ÁÇºËçØÁªìÊô∂ * Ê∑¨ÁÇºÂ¢ûÁõä
                        const alchemyCrystals = gameData.alchemyCrystals;
                        const crystalBonusGain = gameData.forgingStats.crystalBonusGain;
                        let bonusGain = alchemyCrystals * crystalBonusGain;
                        
                        // Ê∞∏ÊÅíÈïêÁâπÊÆäÊïàÊûúÔºöÁÇºËçØÂ¢ûÁõä√ó10000
                        const isEternalPickaxe = gameData.currentPickaxeIndex === 23; // Ê∞∏ÊÅíÈïêÁöÑÁ¥¢Âºï
                        if (isEternalPickaxe) {
                            bonusGain *= 10000;
                        }
                        
                        gameData.alchemyBonus += bonusGain;
                        
                        // Ëé∑ÂèñÂΩìÂâçÊòæÁ§∫ÁöÑÂå∫ÂùóÂÅ•Â∫∑‰ø°ÊÅØÂÖÉÁ¥†
                        const healthDisplay = document.querySelector('.block-health');
                        
                        if (healthDisplay) {
                            // ÂàõÂª∫ÊàñÊõ¥Êñ∞Â¢ûÁõäÊòæÁ§∫ÂÖÉÁ¥†
                            let bonusDisplayElement = document.getElementById('crystal-bonus-display');
                            if (!bonusDisplayElement) {
                                bonusDisplayElement = document.createElement('div');
                                bonusDisplayElement.id = 'crystal-bonus-display';
                                bonusDisplayElement.style.color = '#4CAF50';
                                bonusDisplayElement.style.fontWeight = 'bold';
                                healthDisplay.after(bonusDisplayElement);
                            }
                            
                            // ËÆæÁΩÆÂ¢ûÁõäÊòæÁ§∫ÊñáÊú¨Ôºå‰ΩøÁî®Ê†ºÂºèÂåñÊï∞ÂÄº
                            bonusDisplayElement.textContent = `ÁÇºËçØÂ¢ûÁõä +${formatNumber(bonusGain)}`;
                            
                            // Ê∑ªÂä†Èó™ÁÉÅÂä®ÁîªÊïàÊûú
                            bonusDisplayElement.style.animation = 'none';
                            void bonusDisplayElement.offsetWidth; // Ëß¶ÂèëÈáçÁªò
                            bonusDisplayElement.style.animation = 'highlight 1s ease-in-out';
                            
                            // Ê∑ªÂä†CSSÂä®ÁîªÔºàÂ¶ÇÊûú‰∏çÂ≠òÂú®Ôºâ
                            if (!document.getElementById('crystal-bonus-animation')) {
                                const style = document.createElement('style');
                                style.id = 'crystal-bonus-animation';
                                style.textContent = `
                                    @keyframes highlight {
                                        0% { opacity: 0.5; transform: scale(1); }
                                        50% { opacity: 1; transform: scale(1.05); }
                                        100% { opacity: 1; transform: scale(1); }
                                    }
                                `;
                                document.head.appendChild(style);
                            }
                        }
                    } else if (currentBlock.type === 'matter') {
                        // Áâ©Ë¥®ÊñπÂùóÔºöÊ†πÊçÆÊ¶ÇÁéáÊéâËêΩ‰∏çÂêåÊï∞ÈáèÁöÑÁâ©Ë¥®
                        let matterAmount = 0;
                        
                        if (currentPickaxe.specialType === 'black_hole') {
                            // ÈªëÊ¥ûÈïêÁâπÊÆäÊéâËêΩÔºö10%Ê¶ÇÁéáÊéâËêΩ1Áâ©Ë¥®Ôºå15%Ê¶ÇÁéáÊéâËêΩ10Áâ©Ë¥®Ôºå20ÔºÖÊ¶ÇÁéáÊéâËêΩ100Áâ©Ë¥®Ôºå25ÔºÖÊ¶ÇÁéáÊéâËêΩ1000Áâ©Ë¥®Ôºå30ÔºÖÊ¶ÇÁéáÊéâËêΩ1WÁâ©Ë¥®
                            const random = Math.random();
                            if (random < 0.1) {
                                matterAmount = 1;
                            } else if (random < 0.25) {
                                matterAmount = 10;
                            } else if (random < 0.45) {
                                matterAmount = 100;
                            } else if (random < 0.7) {
                                matterAmount = 1000;
                            } else {
                                matterAmount = 10000;
                            }
                        } else {
                            // ÊôÆÈÄöÊéâËêΩ
                            const random = Math.random();
                            if (random < 0.9) {
                                matterAmount = 1;
                            } else if (random < 0.99) {
                                matterAmount = 10;
                            } else if (random < 0.999) {
                                matterAmount = 100;
                            } else if (random < 0.9999) {
                                matterAmount = 1000;
                            } else {
                                matterAmount = 10000;
                            }
                        }
                        // Ê∞∏ÊÅíÈïêÁâπÊÆäÊïàÊûúÔºöÁâ©Ë¥®√ó100000000
                        const isEternalPickaxe = gameData.currentPickaxeIndex === 23;
                        if (isEternalPickaxe) {
                            matterAmount *= 100000000;
                        }
                        gameData.matter += matterAmount;
                    } else if (currentBlock.type === 'production_core') {
                        // Èáè‰∫ßÊ†∏ÂøÉÊñπÂùóÔºöÊ†πÊçÆÊ¶ÇÁéáÊéâËêΩ‰∏çÂêåÊï∞ÈáèÁöÑÈáè‰∫ßÊ†∏ÂøÉ
                        let coreAmount = 0;
                        
                        if (currentPickaxe.specialType === 'black_hole') {
                            // ÈªëÊ¥ûÈïêÁâπÊÆäÊéâËêΩÔºö90Ê¶ÇÁéáÊéâËêΩ1Ê†∏ÂøÉÔºå9Ê¶ÇÁéá10Ê†∏ÂøÉÔºå1Ê¶ÇÁéá100Ê†∏ÂøÉ
                            const random = Math.random();
                            if (random < 0.9) {
                                coreAmount = 1;
                            } else if (random < 0.99) {
                                coreAmount = 10;
                            } else {
                                coreAmount = 100;
                            }
                        } else {
                            // ÊôÆÈÄöÊéâËêΩ
                            const random = Math.random();
                            if (random < 0.009) {
                                coreAmount = 1;
                            } else if (random < 0.0099) {
                                coreAmount = 10;
                            } else if (random < 0.01) {
                                coreAmount = 100;
                            }
                        }
                        // Ê∞∏ÊÅíÈïêÁâπÊÆäÊïàÊûúÔºöÈáè‰∫ßÊ†∏ÂøÉ√ó1000000
                        const isEternalPickaxe = gameData.currentPickaxeIndex === 23;
                        if (isEternalPickaxe) {
                            coreAmount *= 1000000;
                        }
                        gameData.productionCore += coreAmount;
                    } else if (currentBlock.type === 'usage_bonus') {
                        // ‰ΩøÁî®ÊñπÂùóÔºöÂΩì‰ΩøÁî®Â¢ûÁõäÂà∞Ëææ10‰∫ø‰ª•‰∏äÁÇπÂáªÊâçÊúâÊïàÔºåÁÇπÂáªËé∑Âæó100ÂÄçÊØèÊ¨°ÊåñÁüøËé∑ÂæóÁöÑ‰ΩøÁî®Â¢ûÁõä
                        if (gameData.usageBonus >= 1000000000) {
                            // ËÆ°ÁÆóÊØèÊ¨°ÊåñÁüøËé∑ÂæóÁöÑÂü∫Á°Ä‰ΩøÁî®Â¢ûÁõäÔºàÊ†πÊçÆÈïêÂ≠êÔºâ
                            const currentPickaxe = pickaxes[gameData.currentPickaxeIndex];
                            const baseUsageGain = currentPickaxe.usageBonus;
                            // ËÆ°ÁÆó100ÂÄçÂ¢ûÁõä
                            const baseBonusGain = 100 * baseUsageGain;
                            // Ê∑ªÂä†Ê∑¨ÁÇº‰ΩøÁî®Â¢ûÁõä
                            const usageBonusMultiplier = 1 + gameData.forgingStats.usageBonusGain / 100;
                            // Ê∑ªÂä†Èï∂ÂµåÂ¢ûÁõäÔºà‰ΩøÁî®Â¢ûÁõäËé∑ÂèñÂ¢ûÁõäÔºâ
                            const embeddingUsageBonus = calculateEmbeddingBonus(3);
                            const embeddingAllBonus = calculateEmbeddingBonus(5); // Ëé∑ÂèñÈï∂ÂµåÂÖ®Â±ûÊÄßÂ¢ûÁõä
                            const bonusGain = baseBonusGain * usageBonusMultiplier * embeddingUsageBonus * embeddingAllBonus;
                            // Â¢ûÂä†‰ΩøÁî®Â¢ûÁõä
                            gameData.usageBonus += bonusGain;
                            
                            // Ëé∑ÂèñÂΩìÂâçÊòæÁ§∫ÁöÑÂå∫ÂùóÂÅ•Â∫∑‰ø°ÊÅØÂÖÉÁ¥†
                            const healthDisplay = document.querySelector('.block-health');
                            
                            if (healthDisplay) {
                                // ÂàõÂª∫ÊàñÊõ¥Êñ∞‰ΩøÁî®Â¢ûÁõäÊòæÁ§∫ÂÖÉÁ¥†
                                let usageBonusDisplayElement = document.getElementById('usage-bonus-display');
                                if (!usageBonusDisplayElement) {
                                    usageBonusDisplayElement = document.createElement('div');
                                    usageBonusDisplayElement.id = 'usage-bonus-display';
                                    usageBonusDisplayElement.style.color = '#FF9800';
                                    usageBonusDisplayElement.style.fontWeight = 'bold';
                                    healthDisplay.after(usageBonusDisplayElement);
                                }
                                
                                // ËÆæÁΩÆ‰ΩøÁî®Â¢ûÁõäÊòæÁ§∫ÊñáÊú¨Ôºå‰ΩøÁî®Ê†ºÂºèÂåñÊï∞ÂÄº
                                usageBonusDisplayElement.textContent = `‰ΩøÁî®Â¢ûÁõä +${formatNumber(bonusGain)}`;
                                
                                // Ê∑ªÂä†Èó™ÁÉÅÂä®ÁîªÊïàÊûú
                                usageBonusDisplayElement.style.animation = 'none';
                                void usageBonusDisplayElement.offsetWidth; // Ëß¶ÂèëÈáçÁªò
                                usageBonusDisplayElement.style.animation = 'highlight 1s ease-in-out';
                            }
                        }
                    } else {
                        // ÊôÆÈÄöÁâπÊÆäÊñπÂùóÔºàÂ¶ÇÈì±Âùó„ÄÅ¨≠∂ÂùóÔºâ
                        
                        // ÈªëÊ¥ûÈïê‰ΩøÊâÄÊúâÊ¶ÇÁéáÊéâËêΩÁâ©ÂìÅÂèò‰∏∫ÂøÖÂá∫
                        if (currentPickaxe.specialType === 'black_hole' || Math.random() < currentBlock.dropChance) {
                            // Ê†πÊçÆÊñπÂùóÁ±ªÂûãÊéâËêΩ‰∏çÂêåÁâ©ÂìÅ
                            if (currentBlock.dropItem === 'iridium') {
                                gameData.iridiumIngots += currentBlock.dropAmount;
                            } else if (currentBlock.dropItem === 'hassium') {
                                gameData.hassiumIngots += currentBlock.dropAmount;
                            } else if (currentBlock.dropItem === 'singularity') {
                                gameData.singularity += currentBlock.dropAmount;
                            } else if (currentBlock.dropItem === 'endCore') {
                                // ÁªàÁÑâÈõÜÈòµÁâπÊÆäÊéâËêΩÂ§ÑÁêÜ
                                if (currentBlock.specialDropRanges) {
                                    const random = Math.random();
                                    const ranges = currentPickaxe.specialType === 'black_hole' ? currentBlock.blackHoleRanges : currentBlock.dropRanges;
                                    
                                    let cumulativeChance = 0;
                                    for (const range of ranges) {
                                        cumulativeChance += range.chance;
                                        if (random < cumulativeChance) {
                                            // Âú®ÂΩìÂâçÂå∫Èó¥ÂÜÖÁîüÊàêÈöèÊú∫Êï∞Èáè
                                            const dropAmount = Math.floor(Math.random() * (range.max - range.min + 1)) + range.min;
                                            // Ê∞∏ÊÅíÈïê‰∏çÂä†ÊàêÁªàÁÑâÈõÜÈòµ
                                            gameData.endCore += dropAmount;
                                            break;
                                        }
                                    }
                                } else if (currentBlock.minDropAmount !== undefined && currentBlock.maxDropAmount !== undefined) {
                                    // ÊôÆÈÄöÈöèÊú∫ÊéâËêΩÊï∞Èáè
                                    const dropAmount = Math.floor(Math.random() * (currentBlock.maxDropAmount - currentBlock.minDropAmount + 1)) + currentBlock.minDropAmount;
                                    gameData.endCore += dropAmount;
                                } else {
                                    gameData.endCore += currentBlock.dropAmount;
                                }
                            }
                        }
                    }
                    // Êõ¥Êñ∞UIÊòæÁ§∫ÔºåÁ°Æ‰øùÁî®Êà∑ËÉΩÁúãÂà∞ÊØèÊ¨°Ëé∑ÂæóÁöÑÁÇºËçØÂ¢ûÁõä
                    updateStats();
                } else if (gameData.currentBlockType === 'singularity') {
                    // Â•áÁÇπÊñπÂùóÁâπÊÆäÂ§ÑÁêÜÔºåÁ°Æ‰øù‰∏çËøõÂÖ•ÊôÆÈÄöÊñπÂùóÁöÑÈáëÂ∏ÅÂ•ñÂä±ÈÄªËæë
                    // Â•áÁÇπÊñπÂùóÂèØËÉΩÊúâËá™Â∑±ÁöÑÊéâËêΩÊú∫Âà∂ÊàñÁâπÊÆäÂ•ñÂä±
                    if (currentBlock.dropChance) {
                        // ÈªëÊ¥ûÈïê‰ΩøÊâÄÊúâÊ¶ÇÁéáÊéâËêΩÁâ©ÂìÅÂèò‰∏∫ÂøÖÂá∫
                        if (currentPickaxe.specialType === 'black_hole' || Math.random() < currentBlock.dropChance) {
                            if (currentBlock.dropAmount) {
                                    let singularityAmount = currentBlock.dropAmount;
                                    // Ê∞∏ÊÅíÈïêÁâπÊÆäÊïàÊûúÔºöÂ•áÁÇπËé∑Âèñ√ó100000
                                    const isEternalPickaxe = gameData.currentPickaxeIndex === 23;
                                    if (isEternalPickaxe) {
                                        singularityAmount *= 100000;
                                    }
                                    gameData.singularity += singularityAmount;
                                    // ÁßªÈô§Ëé∑ÂæóÂ•áÁÇπÁöÑÊèêÁ§∫ÊñáÊú¨ÔºåÂè™Âú®ÊñπÂùóUI‰∏äÊòæÁ§∫
                                }
                        }
                    }
                } else {
                    // ÊôÆÈÄöÊñπÂùóÔºåËé∑ÂæóÈáëÂ∏ÅÂ•ñÂä±ÔºåÂåÖÂê´Ê∑¨ÁÇºÂ¢ûÁõäÂíåÈï∂ÂµåÂ¢ûÁõä
                    const embeddingGoldBonus = calculateEmbeddingBonus(4); // Ëé∑ÂèñÈï∂ÂµåÈáëÂ∏ÅËé∑ÂèñÂ¢ûÁõä
                    const embeddingAllBonus = calculateEmbeddingBonus(5); // Ëé∑ÂèñÈï∂ÂµåÂÖ®Â±ûÊÄßÂ¢ûÁõä
                    let goldReward = Math.floor(currentBlock.reward * forgingBonus * embeddingGoldBonus * embeddingAllBonus);
                    
                    // Ê∞∏ÊÅíÈïêÁâπÊÆäÊïàÊûúÔºöÈáëÂ∏Å√ó1000000
                    const isEternalPickaxe = gameData.currentPickaxeIndex === 23;
                    if (isEternalPickaxe) {
                        goldReward *= 1000000;
                    }
                    
                    gameData.gold += goldReward;
                }
                
                // ÈáçÁΩÆÊñπÂùó
                if (gameData.currentBlockType === 'alchemy') {
                    currentBlock = { ...alchemyBlocks[gameData.currentAlchemyBlockIndex] };
                } else if (gameData.currentBlockType === 'special') {
                    currentBlock = { ...specialBlocks[gameData.currentSpecialBlockIndex] };
                } else if (gameData.currentBlockType === 'singularity') {
                    currentBlock = { ...singularityBlocks[gameData.currentSingularityBlockIndex] };
                } else {
                    currentBlock = { ...blocks[gameData.currentBlockIndex] };
                }
                currentBlock.maxHealth = currentBlock.health;
            }
            
            // Êõ¥Êñ∞Ê∏∏ÊàèÁä∂ÊÄÅÂíåÁªüËÆ°‰ø°ÊÅØ
            updateStats();
        }

        // ÂàáÊç¢Âà∞‰∏ä‰∏ÄÁ∫ßÊñπÂùó
        function prevBlock() {
            if (gameData.currentBlockType === 'alchemy') {
                if (gameData.currentAlchemyBlockIndex > 0) {
                    gameData.currentAlchemyBlockIndex--;
                    currentBlock = { ...alchemyBlocks[gameData.currentAlchemyBlockIndex] };
                    currentBlock.maxHealth = currentBlock.health;
                    updateStats();
                }
            } else if (gameData.currentBlockType === 'singularity') {
                if (gameData.currentSingularityBlockIndex > 0) {
                    gameData.currentSingularityBlockIndex--;
                    currentBlock = { ...singularityBlocks[gameData.currentSingularityBlockIndex] };
                    currentBlock.maxHealth = currentBlock.health;
                    updateStats();
                }
            } else if (gameData.currentBlockType === 'special') {
                if (gameData.currentSpecialBlockIndex > 0) {
                    gameData.currentSpecialBlockIndex--;
                    currentBlock = { ...specialBlocks[gameData.currentSpecialBlockIndex] };
                    currentBlock.maxHealth = currentBlock.health;
                    updateStats();
                }
            } else {
                if (gameData.currentBlockIndex > 0) {
                    gameData.currentBlockIndex--;
                    currentBlock = { ...blocks[gameData.currentBlockIndex] };
                    currentBlock.maxHealth = currentBlock.health;
                    updateStats();
                }
            }
        }

        // ÁÇºËçØÁªìÊô∂ÂäüËÉΩ
        function createAlchemyCrystals() {
            if (gameData.alchemyPoints >= 10000) {
                // ËÆ°ÁÆóËé∑ÂæóÁöÑÁÇºËçØÁªìÊô∂Ôºö(ÁÇºËçØÂÄº/10000)Ôºå‰øùÁïô‰∏Ä‰ΩçÂ∞èÊï∞
                const crystalsGained = gameData.alchemyPoints / 10000;
                const roundedCrystals = Math.round(crystalsGained * 10) / 10; // ‰øùÁïô‰∏Ä‰ΩçÂ∞èÊï∞
                
                // Â¢ûÂä†ÁÇºËçØÁªìÊô∂Âπ∂Â∞ÜÁÇºËçØÂÄºÂΩíÈõ∂
                gameData.alchemyCrystals += roundedCrystals;
                gameData.alchemyPoints = 0;
                
                // Êõ¥Êñ∞UIÊòæÁ§∫ÁªìÊûú
                updateStats();
            }
        }
        
        // ËÉΩÈáèËΩ¨ÂåñÁõ∏ÂÖ≥ÂäüËÉΩ
        // ÂàõÂª∫ËÉΩÈáèÂÄçÈÄüÊèêÂçáÈÄöÁü•
        function createEnergyMultiplierNotification(amount) {
            const energyElement = document.getElementById('energy');
            if (energyElement) {
                const notification = document.createElement('div');
                notification.textContent = `+${amount} ËÉΩÈáèÂÄçÈÄü`;
                notification.style.position = 'absolute';
                notification.style.color = '#4CAF50';
                notification.style.fontWeight = 'bold';
                notification.style.fontSize = '14px';
                notification.style.zIndex = '1000';
                notification.style.pointerEvents = 'none';
                
                const rect = energyElement.getBoundingClientRect();
                notification.style.left = `${rect.left + rect.width / 2}px`;
                notification.style.top = `${rect.top}px`;
                document.body.appendChild(notification);
                
                // Âä®ÁîªÊïàÊûú
                let pos = 0;
                const interval = setInterval(() => {
                    pos += 1;
                    notification.style.transform = `translate(-50%, -${pos}px)`;
                    if (pos > 50) {
                        clearInterval(interval);
                        document.body.removeChild(notification);
                    }
                }, 10);
            }
        }
        
        // ËΩ¨ÂåñËÉΩÈáèÂäüËÉΩ
        function convertEnergy() {
            const matterCost = 1000000; // 100‰∏áÁâ©Ë¥®
            if (gameData.matter >= matterCost) {
                gameData.matter -= matterCost;
                gameData.energyMultiplier += 1; // ÊØè100‰∏áÁâ©Ë¥®ÊèêÂçá1ËÉΩÈáèÂÄçÈÄü
                updateStats();
                createEnergyMultiplierNotification(1);
            }
        }
        
        // ‰∏ÄÈîÆÊèêÂçáËÉΩÈáèÂÄçÈÄüÂäüËÉΩ
        function convertEnergyMax() {
            const matterCost = 1000000; // 100‰∏áÁâ©Ë¥®
            const maxUpgrades = Math.floor(gameData.matter / matterCost);
            if (maxUpgrades > 0) {
                gameData.matter -= maxUpgrades * matterCost;
                gameData.energyMultiplier += maxUpgrades;
                updateStats();
                createEnergyMultiplierNotification(maxUpgrades);
            }
        }

        // ÂàáÊç¢Âà∞‰∏ã‰∏ÄÁ∫ßÊñπÂùó
        function nextBlock() {
            if (gameData.currentBlockType === 'alchemy') {
                if (gameData.currentAlchemyBlockIndex < alchemyBlocks.length - 1) {
                    gameData.currentAlchemyBlockIndex++;
                    currentBlock = { ...alchemyBlocks[gameData.currentAlchemyBlockIndex] };
                    currentBlock.maxHealth = currentBlock.health;
                    updateStats();
                }
            } else if (gameData.currentBlockType === 'singularity') {
                if (gameData.currentSingularityBlockIndex < singularityBlocks.length - 1) {
                    gameData.currentSingularityBlockIndex++;
                    currentBlock = { ...singularityBlocks[gameData.currentSingularityBlockIndex] };
                    currentBlock.maxHealth = currentBlock.health;
                    updateStats();
                }
            } else if (gameData.currentBlockType === 'special') {
                if (gameData.currentSpecialBlockIndex < specialBlocks.length - 1) {
                    gameData.currentSpecialBlockIndex++;
                    currentBlock = { ...specialBlocks[gameData.currentSpecialBlockIndex] };
                    currentBlock.maxHealth = currentBlock.health;
                    updateStats();
                }
            } else {
                if (gameData.currentBlockIndex < blocks.length - 1) {
                    gameData.currentBlockIndex++;
                    currentBlock = { ...blocks[gameData.currentBlockIndex] };
                    currentBlock.maxHealth = currentBlock.health;
                    updateStats();
                }
            }
        }

        // ÊòæÁ§∫ÊéâËêΩÈÄöÁü•
        function showDropNotification(itemName, amount) {
            const notification = document.createElement('div');
            notification.className = 'drop-notification';
            notification.textContent = `Ëé∑Âæó‰∫Ü ${amount} ‰∏™${itemName}ÔºÅ`;
            notification.style.position = 'fixed';
            notification.style.top = '50%';
            notification.style.left = '50%';
            notification.style.transform = 'translate(-50%, -50%)';
            notification.style.backgroundColor = 'rgba(0, 128, 0, 0.8)';
            notification.style.color = 'white';
            notification.style.padding = '10px 20px';
            notification.style.borderRadius = '5px';
            notification.style.zIndex = '1000';
            notification.style.fontSize = '18px';
            notification.style.fontWeight = 'bold';
            notification.style.opacity = '0';
            notification.style.transition = 'opacity 0.3s, transform 0.3s';
            
            document.body.appendChild(notification);
            
            // ÊòæÁ§∫Âä®Áîª
            setTimeout(() => {
                notification.style.opacity = '1';
                notification.style.transform = 'translate(-50%, -60%)';
            }, 10);
            
            // 3ÁßíÂêéÈöêËóèÂπ∂ÁßªÈô§
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translate(-50%, -70%)';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 2700);
        }
        
        // Ê†ºÂºèÂåñÂ§ßÊï∞Â≠óÊòæÁ§∫
        function formatNumber(num) {
            // Á°Æ‰øùnumÊòØÊï∞Â≠ó
            if (typeof num !== 'number' || isNaN(num)) {
                return '0.0';
            }
            
            if (num < 10000) {
                // Â∞è‰∫é10000ÁöÑÊï∞Â≠ó‰πü‰øùÁïô‰∏Ä‰ΩçÂ∞èÊï∞
                return num.toFixed(1);
            }
            
            const units = ['‰∏á', '‰∫ø', 'ÂÖÜ', '‰∫¨', 'Âûì', 'Êùº', 'Á©∞', 'Ê≤ü', 'Ê∂ß', 'Ê≠£', 'ËΩΩ', 'ÊûÅ', 
                         'ÊÅíÊ≤≥Ê≤ô', 'ÈòøÊõæÁ•á', 'ÈÇ£Áî±‰ªñ', '‰∏çÂèØÊÄùËÆÆ', 'Êó†Èáè', 'Â§ßÊï∞', 'ÂÖ®‰ªï‰ΩØ', 'È¢ëÊ≥¢ÁΩó', 
                         '‰∫¨Êù∞ÁΩó', 'ÁüúÁæØÁΩó', '‰∏áÁüúÁæØÁΩó', '‰∫øÁüúÁæØÁΩó', 'Âè§ÊààÂ∞î','‰∏áÂè§ÊààÂ∞î','‰∫øÂè§ÊààÂ∞î','ÂÖÜÂè§ÊààÂ∞î','‰∫¨Âè§ÊààÂ∞î','ÂûìÂè§ÊààÂ∞î','ÊùºÂè§ÊààÂ∞î','Á©∞Âè§ÊààÂ∞î','Ê≤üÂè§ÊààÂ∞î','Ê∂ßÂè§ÊààÂ∞î','Ê≠£Âè§ÊààÂ∞î','ËΩΩÂè§ÊààÂ∞î','ÊûÅÂè§ÊààÂ∞î','‰∏çÂèØËØ¥‰∏çÂèØËØ¥ËΩ¨','ÂÖÉ„Äá','ÂÖÉ‰∏Ä','ÂÖÉ‰∫å','ÂÖÉ‰∏â','ÂÖÉ‰∫ñ','ÂÖÉ„êÖ','ÂÖÉŒª','ÂÖÉ‰∏É','ÂÖÉ‰∏∑','ÂÖÉÂéπ','ÂÖÉÂçÅ','ÂÖÉÂªø','ÂÖÉÂçÖ','ÂÖÉÂçå','ÂÖÉÁôæ','ÂÖÉÂçÉ','ÂÖÉ‰∏á','ÂÖÉ‰∫ø','ÂÖÉÂÖÜ','ÂÖÉ‰∫¨','ÂÖÉÂûì','ÂÖÉÊùº','ÂÖÉÁ©∞','ÂÖÉÊ≤ü','ÂÖÉÊ∂ß','ÂÖÉÊ≠£','ÂÖÉËΩΩ','ÂÖÉÊûÅ','ÂÖÉÊÅíÊ≤≥Ê≤ô','ÂÖÉÈòøÊõæÁ•á','ÂÖÉÈÇ£Áî±‰ªñ','ÂÖÉ‰∏çÂèØÊÄùËÆÆ','ÂÖÉÊó†Èáè','ÂÖÉÂ§ßÊï∞','ÂÖÉÈ¢ëÊ≥¢ÁΩó','ÂÖÉ‰∫¨Êù∞ÁΩó','ÂÖÉÁüúÁæØÁΩó','ÂÖÉÂè§ÊààÂ∞î','ÂÖÉÂçêÔºàÈÄöÂÖ≥ÔºÅÔºÅÔºÅÔºâ'];
            let unitIndex = 0;
            let currentNum = num;
            
            // Âçï‰ΩçÂàáÊç¢ÈòàÂÄº‰∏∫10000Ôºå10000ËøõÂà∂
            while (unitIndex < units.length && currentNum >= 10000) {
                currentNum /= 10000;
                unitIndex++;
            }
            
            // Á°Æ‰øùËøîÂõûÊ≠£Á°ÆÁöÑÂçï‰ΩçË°®Á§∫ÔºåÊâÄÊúâÊï∞Â≠óÈÉΩ‰øùÁïô‰∏Ä‰ΩçÂ∞èÊï∞
            if (unitIndex > 0) {
                return currentNum.toFixed(1) + units[unitIndex - 1];
            }
            
            // Ê≤°Êúâ‰ΩøÁî®Âçï‰ΩçÊó∂Áõ¥Êé•ËøîÂõûÊï∞Â≠ó
            return currentNum.toFixed(1);
        }

        // Ëá™Âä®ÊåñÁüøÂäüËÉΩ
        let autoMiningFrameId; // ‰ΩøÁî®requestAnimationFrame ID
        
        function toggleAutoMining() {
            gameData.autoMiningEnabled = !gameData.autoMiningEnabled;
            const autoMiningButton = document.getElementById('auto-mining-btn');
            
            if (gameData.autoMiningEnabled) {
                autoMiningButton.textContent = 'ÂÖ≥Èó≠Ëá™Âä®ÊåñÁüø';
                autoMiningButton.style.backgroundColor = '#f44336';
                
                // ‰ΩøÁî®requestAnimationFrameÂÆûÁé∞ÊúÄÈ´òÊÄßËÉΩÁöÑËá™Âä®ÊåñÁüø
                function mineAsFastAsPossible() {
                    if (gameData.autoMiningEnabled) {
                        mineBlock();
                        autoMiningFrameId = requestAnimationFrame(mineAsFastAsPossible);
                    }
                }
                mineAsFastAsPossible();
            } else {
                autoMiningButton.textContent = 'ÂºÄÂêØËá™Âä®ÊåñÁüø';
                autoMiningButton.style.backgroundColor = '#4CAF50';
                
                if (autoMiningFrameId) {
                    cancelAnimationFrame(autoMiningFrameId);
                }
            }
        }
        
        // Âú®DOMÂä†ËΩΩÂÆåÊàêÂêéÊ∑ªÂä†Ëá™Âä®ÊåñÁüøÊåâÈíÆ
        document.addEventListener('DOMContentLoaded', () => {
            const blockControls = document.querySelector('.block-controls');
            const autoMiningButton = document.createElement('button');
            autoMiningButton.id = 'auto-mining-btn';
            autoMiningButton.className = 'control-btn';
            autoMiningButton.textContent = 'ÂºÄÂêØËá™Âä®ÊåñÁüø';
            autoMiningButton.addEventListener('click', toggleAutoMining);
            blockControls.appendChild(autoMiningButton);
            
            // ÂêØÂä®Ëá™Âä®ËÉΩÈáèËé∑Âèñ
            setInterval(() => {
                // ÂΩìËÉΩÈáèÂÄçÈÄüÂ§ß‰∫é0Êó∂Ë°®Á§∫Â∑≤Ëß£ÈîÅËá™Âä®ËÉΩÈáèËé∑Âèñ
                if (gameData.energyMultiplier > 0) {
                    const energyGain = (1 + gameData.productionCore) * gameData.energyMultiplier;
                    gameData.energy += energyGain;
                    updateStats();
                }
            }, 100); // ÊØè0.1ÁßíÊâßË°å‰∏ÄÊ¨°
            
            // ÈáçÊñ∞Ëé∑ÂèñÊâÄÊúâDOMÂÖÉÁ¥†Âπ∂ÁªëÂÆö‰∫ã‰ª∂ÁõëÂê¨Âô®
            const mineBlockElement = document.getElementById('mine-block');
            const prevBlockButton = document.getElementById('prev-block');
            const nextBlockButton = document.getElementById('next-block');
            const toggleBlockTypeButton = document.getElementById('toggle-block-type');
            const miningTabButton = document.getElementById('mining-tab');
            const alchemyTabButton = document.getElementById('alchemy-tab');
            const forgingTabButton = document.getElementById('forging-tab');
            const embeddingTabButton = document.getElementById('embedding-tab');
            const forgingButtonElement = document.getElementById('forging-btn');
            const batchAlchemyButtonElement = document.getElementById('batch-alchemy-btn');
            const convertEnergyButton = document.getElementById('convert-energy-btn');
            const convertEnergyMaxButton = document.getElementById('convert-energy-max-btn');
            
            // ÁªëÂÆöÊâÄÊúâ‰∫ã‰ª∂ÁõëÂê¨Âô®
            if (mineBlockElement) mineBlockElement.addEventListener('click', mineBlock);
            if (prevBlockButton) prevBlockButton.addEventListener('click', prevBlock);
            if (nextBlockButton) nextBlockButton.addEventListener('click', nextBlock);
            if (toggleBlockTypeButton) toggleBlockTypeButton.addEventListener('click', toggleBlockType);
            if (miningTabButton) miningTabButton.addEventListener('click', () => switchTab('mining'));
            if (alchemyTabButton) alchemyTabButton.addEventListener('click', () => switchTab('alchemy'));
            if (forgingTabButton) forgingTabButton.addEventListener('click', () => switchTab('forging'));
            if (embeddingTabButton) embeddingTabButton.addEventListener('click', () => switchTab('embedding'));
            if (forgingButtonElement) forgingButtonElement.addEventListener('click', performForging);
            if (batchAlchemyButtonElement) batchAlchemyButtonElement.addEventListener('click', performBatchAlchemy);
            if (convertEnergyButton) convertEnergyButton.addEventListener('click', convertEnergy);
            if (convertEnergyMaxButton) convertEnergyMaxButton.addEventListener('click', convertEnergyMax);
        });
        
        // Ê∑¨ÁÇºÂäüËÉΩ
        // Èï∂ÂµåÁ≥ªÁªü
function updateEmbeddingDisplay() {
    for (let i = 0; i < gameData.embeddingBlocks.length; i++) {
        const block = gameData.embeddingBlocks[i];
        const countElement = document.getElementById(`embedding-count-${i}`);
        const bonusElement = document.getElementById(`embedding-bonus-${i}`);
        
        if (countElement) countElement.textContent = formatNumber(block.count);
        if (bonusElement) {
            const bonus = calculateEmbeddingBonus(i+1);
            // ÂØπ‰∫éÂ§ßÊï∞ÂÄºÔºå‰ΩøÁî®ÂÄçÊï∞ÊòæÁ§∫ËÄå‰∏çÊòØÁôæÂàÜÊØî
            if (bonus >= 100) {
                bonusElement.textContent = formatNumber(bonus) + 'ÂÄç';
            } else {
                bonusElement.textContent = (bonus * 100).toFixed(2) + '%';
            }
        }
    }
}

// ËÆ°ÁÆóÈï∂ÂµåÂ¢ûÁõä
function calculateEmbeddingBonus(blockIndex) {
    const block = gameData.embeddingBlocks[blockIndex - 1];
    if (!block) return 1;
    
    // Âè™ËÆ°ÁÆóÂü∫Á°ÄÁöÑÊåáÊï∞Â¢ûÁõäÔºå‰∏çÂÜçÂè†Âä†ÂÖ∂‰ªñÂå∫ÂùóÁöÑÂ¢ûÁõä
    const baseBonus = Math.pow(block.count + 1, block.exponent);
    
    return baseBonus;
}

// ÂÆö‰πâupdateStatsDisplayÂáΩÊï∞ÔºåÊõ¥Êñ∞Ê∏∏ÊàèÁªüËÆ°ÊòæÁ§∫
function updateStatsDisplay() {
    // Êõ¥Êñ∞Â•áÁÇπÊòæÁ§∫
    const singularityElement = document.getElementById('embedding-singularity-count');
    if (singularityElement) {
        singularityElement.textContent = formatNumber(gameData.singularity);
    }
    
    // Ë∞ÉÁî®updateStatsÊõ¥Êñ∞ÂÖ∂‰ªñÁªüËÆ°‰ø°ÊÅØ
    updateStats();
}

// ÊâßË°åÈï∂Âµå
function performEmbedding(blockIndex, amount = 1) {
    if (gameData.singularity < amount) {
        alert('Â•áÁÇπÊï∞Èáè‰∏çË∂≥ÔºÅ');
        return false;
    }
    
    gameData.singularity -= amount;
    gameData.embeddingBlocks[blockIndex - 1].count += amount;
    updateEmbeddingDisplay();
    updateStatsDisplay();
    return true;
}

// ÈáçÁΩÆÈï∂Âµå
function resetEmbedding() {
    if (gameData.singularity === 0 && gameData.embeddingBlocks.every(block => block.count === 0)) {
        alert('Ê≤°ÊúâÈï∂ÂµåÁöÑÂ•áÁÇπÂèØÈáçÁΩÆÔºÅ');
        return;
    }
    
    if (!confirm('Á°ÆÂÆöË¶ÅÈáçÁΩÆÊâÄÊúâÈï∂ÂµåÂêóÔºüËøôÂ∞ÜËøîËøò80%ÁöÑÂ•áÁÇπ„ÄÇ')) {
        return;
    }
    
    let totalSingularity = 0;
    for (let block of gameData.embeddingBlocks) {
        totalSingularity += block.count;
        block.count = 0;
    }
    
    gameData.singularity += Math.floor(totalSingularity * 0.8);
    updateEmbeddingDisplay();
    updateStatsDisplay();
}

function performForging() {
            // Ëé∑ÂèñËæìÂÖ•ÁöÑÁªìÊô∂Êï∞Èáè
            const crystalValue = parseInt(forgingCrystalValueElement.value);
            
            // È™åËØÅËæìÂÖ•
            if (isNaN(crystalValue) || crystalValue < 1) {
                forgingResultElement.textContent = "ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÁªìÊô∂Êï∞ÈáèÔºÅ";
                return;
            }
            
            // Ê£ÄÊü•ÁªìÊô∂Êï∞ÈáèÊòØÂê¶Ë∂≥Â§ü
            if (gameData.alchemyCrystals < crystalValue) {
                forgingResultElement.textContent = "ÁªìÊô∂Êï∞Èáè‰∏çË∂≥ÔºÅ";
                return;
            }
            
            // Ê∂àËÄóÁªìÊô∂
            gameData.alchemyCrystals -= crystalValue;
            
            // ËÆ°ÁÆóÂõõ‰∏™ÈöèÊú∫ËØçÊù°ÔºàÈó≠Âå∫Èó¥ÂÜÖÈöèÊú∫Ôºâ
            const damageBonus = calculateForgingBonus(crystalValue * 50, 20 * crystalValue);
            const usageBonusGain = calculateForgingBonus(crystalValue * 10, 4 * crystalValue);
            const goldGain = calculateForgingBonus(crystalValue * 5, 2 * crystalValue);
            const crystalBonusGain = calculateForgingBonus(crystalValue * 2.5, crystalValue);
            
            // Êõ¥Êñ∞Ê∑¨ÁÇºÂ±ûÊÄß
            gameData.forgingStats.damageBonus += damageBonus;
            gameData.forgingStats.usageBonusGain += usageBonusGain;
            gameData.forgingStats.goldGain += goldGain;
            gameData.forgingStats.crystalBonusGain += crystalBonusGain;
            
            // ÊòæÁ§∫Ê∑¨ÁÇºÁªìÊûú
            forgingResultElement.innerHTML = `
                Ê∑¨ÁÇºÊàêÂäüÔºÅÊ∂àËÄó‰∫Ü ${crystalValue} ‰∏™ÁÇºËçØÁªìÊô∂<br>
                Ëé∑ÂæóÂ±ûÊÄßÔºö<br>
                1. ‰º§ÂÆ≥Â¢ûÁõä +${damageBonus.toFixed(2)}%<br>
                2. ÊØèÊ¨°ÊîªÂáªËé∑Âæó‰ΩøÁî®Â¢ûÁõä +${usageBonusGain.toFixed(2)}%<br>
                3. ÊØèÊ¨°Ëé∑ÂæóÈáëÂ∏Å +${goldGain.toFixed(2)}%<br>
                4. ÁªìÊô∂ÊñπÂùóËé∑ÂæóÁÇºËçØÂ¢ûÁõä +${crystalBonusGain.toFixed(2)}%
            `;
            
            // Êõ¥Êñ∞Ê∏∏ÊàèÁªüËÆ°
            updateStats();
            
            // ‰øùÂ≠òÊ∏∏Êàè
            autoSaveGame();
        }
        
        // ËÆ°ÁÆóÊ∑¨ÁÇºÈöèÊú∫Â¢ûÁõäÔºàÈó≠Âå∫Èó¥Ôºâ
        function calculateForgingBonus(base, variance) {
            const min = base - variance;
            const max = base + variance;
            return Math.max(0, Math.random() * (max - min) + min);
        }
        
        // ÂàõÂª∫ËÉΩÈáèÂÄçÈÄüÊèêÂçáÈÄöÁü•
        function createEnergyMultiplierNotification(amount) {
            const energyElementRef = document.getElementById('energy');
            if (energyElementRef) {
                const notification = document.createElement('div');
                notification.textContent = `+${amount} ËÉΩÈáèÂÄçÈÄü`;
                notification.style.position = 'absolute';
                notification.style.color = '#4CAF50';
                notification.style.fontWeight = 'bold';
                notification.style.fontSize = '14px';
                notification.style.zIndex = '1000';
                notification.style.pointerEvents = 'none';
                
                const rect = energyElementRef.getBoundingClientRect();
                notification.style.left = `${rect.left + rect.width / 2}px`;
                notification.style.top = `${rect.top}px`;
                document.body.appendChild(notification);
                
                // Âä®ÁîªÊïàÊûú
                let pos = 0;
                const interval = setInterval(() => {
                    pos += 1;
                    notification.style.transform = `translate(-50%, -${pos}px)`;
                    if (pos > 50) {
                        clearInterval(interval);
                        document.body.removeChild(notification);
                    }
                }, 10);
            }
        }
        
        // ËΩ¨ÂåñËÉΩÈáèÂäüËÉΩ
        function convertEnergy() {
            const matterCost = 1000000; // 100‰∏áÁâ©Ë¥®
            if (gameData.matter >= matterCost) {
                gameData.matter -= matterCost;
                gameData.energyMultiplier += 1; // ÊØè100‰∏áÁâ©Ë¥®ÊèêÂçá1ËÉΩÈáèÂÄçÈÄü
                updateStats();
                createEnergyMultiplierNotification(1);
            }
        }
        
        // ‰∏ÄÈîÆÊèêÂçáËÉΩÈáèÂÄçÈÄüÂäüËÉΩ
        function convertEnergyMax() {
            const matterCost = 1000000; // 100‰∏áÁâ©Ë¥®
            const maxUpgrades = Math.floor(gameData.matter / matterCost);
            if (maxUpgrades > 0) {
                gameData.matter -= maxUpgrades * matterCost;
                gameData.energyMultiplier += maxUpgrades;
                updateStats();
                createEnergyMultiplierNotification(maxUpgrades);
            }
        }
        
        // ‰∫ã‰ª∂ÁõëÂê¨Âô®Â∑≤ÁßªËá≥DOMContentLoadedÂÜÖÈÉ®
        
        // ÂÆö‰πâembedSingularityÂáΩÊï∞ÔºåÁî®‰∫éHTML‰∏≠ÁöÑonclickË∞ÉÁî®
        window.embedSingularity = function(blockIndex) {
            const input = document.getElementById(`embedding-input-${blockIndex}`);
            const amount = parseInt(input.value) || 1;
            performEmbedding(blockIndex + 1, amount); // ËΩ¨Êç¢‰∏∫‰ªé1ÂºÄÂßãÁöÑÁ¥¢Âºï
        }
        
        // Ê∑ªÂä†ÈáçÁΩÆÈï∂ÂµåÊåâÈíÆÔºàÂ¶ÇÊûúÂ≠òÂú®Ôºâ
        const embeddingSystem = document.querySelector('.embedding-system');
        if (embeddingSystem && !document.getElementById('embedding-reset-button')) {
            const resetButton = document.createElement('button');
            resetButton.id = 'embedding-reset-button';
            resetButton.className = 'alchemy-btn';
            resetButton.textContent = 'ÈáçÁΩÆÈï∂ÂµåÔºàËøîËøò80%Â•áÁÇπÔºâ';
            resetButton.addEventListener('click', resetEmbedding);
            embeddingSystem.appendChild(resetButton);
        }
        
        // ÈáçÁΩÆÈï∂ÂµåÊåâÈíÆ‰∫ã‰ª∂ÁõëÂê¨
        const resetButton = document.getElementById('embedding-reset-button');
        if (resetButton) {
            resetButton.addEventListener('click', resetEmbedding);
        }
        document.getElementById('crystallize-btn').addEventListener('click', createAlchemyCrystals);

        // ËÆæÁΩÆÊØè5ÁßíËá™Âä®‰øùÂ≠ò
        setInterval(autoSaveGame, 5000);

        // È°µÈù¢ÂÖ≥Èó≠Ââç‰øùÂ≠ò
        window.addEventListener('beforeunload', autoSaveGame);

        // Â∞ùËØïÂä†ËΩΩÂ≠òÊ°£
        loadGame();

        // ÈáçÁΩÆÊ∏∏ÊàèÂáΩÊï∞
        function resetGame() {
            if (confirm('Á°ÆÂÆöË¶ÅÈáçÁΩÆÊ∏∏ÊàèÂêóÔºüËøôÂ∞ÜÊ∏ÖÈô§ÊâÄÊúâÊ∏∏ÊàèÊï∞ÊçÆÔºåÊó†Ê≥ïÊÅ¢Â§çÔºÅ')) {
                // ÈáçÁΩÆÊâÄÊúâÊ∏∏ÊàèÊï∞ÊçÆ
                gameData.gold = 0;
                gameData.currentPickaxeIndex = 0;
                gameData.currentBlockIndex = 0;
                gameData.currentAlchemyBlockIndex = 0;
                gameData.currentSpecialBlockIndex = 0;
                gameData.usageBonus = 1;
                gameData.alchemyBonus = 1;
                gameData.alchemyPoints = 0;
                gameData.alchemyCrystals = 0;
                gameData.iridiumIngots = 0;
                gameData.hassiumIngots = 0;
                gameData.singularity = 0;
                gameData.matter = 0;
                gameData.energy = 0;
                gameData.energyMultiplier = 0;
                gameData.productionCore = 0;
                gameData.endCore = 0;
                gameData.ownedPickaxes = [0];
                gameData.currentBlockType = 'normal';
                gameData.autoMiningEnabled = false;
                gameData.miningCount = 0;
                gameData.miningPerSecond = 0;
                
                // ÈáçÁΩÆÊ∑¨ÁÇºÂ±ûÊÄß
                gameData.forgingStats = {
                    damageBonus: 0,
                    usageBonusGain: 0,
                    goldGain: 0,
                    crystalBonusGain: 0
                };
                
                // ÈáçÁΩÆÈï∂ÂµåÁ≥ªÁªüÊï∞ÊçÆ
                gameData.embeddingBlocks = [
                    { count: 0, exponent: 0.36, name: 'ÊîªÂáªÂ¢ûÁõä' },
                    { count: 0, exponent: 0.28, name: 'ÁÇºËçØÂÄºËé∑ÂèñÂ¢ûÁõä' },
                    { count: 0, exponent: 0.24, name: '‰ΩøÁî®Â¢ûÁõäËé∑ÂèñÂ¢ûÁõä' },
                    { count: 0, exponent: 0.2, name: 'ÈáëÂ∏ÅËé∑ÂèñÂ¢ûÁõä' },
                    { count: 0, exponent: 0.16, name: 'ÂÖ®Â±ûÊÄßÂ¢ûÁõä' }
                ];
                
                // ÈáçÁΩÆÂΩìÂâçÊñπÂùó
                currentBlock = JSON.parse(JSON.stringify(blocks[0]));
                currentBlock.maxHealth = currentBlock.health;
                
                // Êõ¥Êñ∞UI
                updateStats();
                updateStatsDisplay();
                updatePickaxeList();
                updateBlockDisplay();
                
                // Ê∏ÖÈô§Â≠òÊ°£
                localStorage.removeItem('miningGameSave');
                localStorage.removeItem('miningGameData');
                
                // ÈáçÁΩÆÊàêÂ∞±Êï∞ÊçÆ
                gameData.achievements = [];
                gameData.completedAchievements = {};
                
                alert('Ê∏∏ÊàèÂ∑≤ÈáçÁΩÆÔºÅ');
            }
        }
        
        // ÈáçÁΩÆÊåâÈíÆ‰∫ã‰ª∂ÁõëÂê¨
        document.getElementById('reset-game-btn').addEventListener('click', resetGame);
        
        // ‰øùÂ≠òÊ∏∏ÊàèÊï∞ÊçÆ
        function saveGame() {
            localStorage.setItem('miningGameData', JSON.stringify(gameData));
        }
        
        // Âä†ËΩΩÊ∏∏ÊàèÊï∞ÊçÆ
        function loadGame() {
            const savedData = localStorage.getItem('miningGameData') || localStorage.getItem('miningGameSave');
            if (savedData) {
                try {
                    const parsedData = JSON.parse(savedData);
                    Object.assign(gameData, parsedData);
                    
                    // Á°Æ‰øùÊàêÂ∞±Áõ∏ÂÖ≥Êï∞ÊçÆÂ≠òÂú®
                    if (!gameData.achievements) {
                        gameData.achievements = [];
                    }
                    if (!gameData.completedAchievements) {
                        gameData.completedAchievements = {};
                    }
                } catch (e) {
                    console.error('Âä†ËΩΩÊ∏∏ÊàèÊï∞ÊçÆÂ§±Ë¥•:', e);
                }
            }
        }
        
        // Ëá™Âä®‰øùÂ≠ò
        function autoSaveGame() {
            saveGame();
        }
        
        // ÂàùÂßãÂåñÊ∏∏Êàè
        currentBlock.maxHealth = currentBlock.health;
        
        // ÂàùÂßãÂåñÊàêÂ∞±Á≥ªÁªü
        if (window.initAchievements) {
            initAchievements();
        }
        
        updateStats();
        updateStatsDisplay(); // Á°Æ‰øùÂ•áÁÇπÊï∞ÈáèÊ≠£Á°ÆÊòæÁ§∫
    </script>
</body>
</html>